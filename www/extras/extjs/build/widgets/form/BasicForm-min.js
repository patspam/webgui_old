/*
 * Ext JS Library 1.0.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */

Ext.form.BasicForm=function(el,_2){Ext.apply(this,_2);this.items=new Ext.util.MixedCollection(false,function(o){return o.id||(o.id=Ext.id());});this.addEvents({beforeaction:true,actionfailed:true,actioncomplete:true});if(el){this.initEl(el);}Ext.form.BasicForm.superclass.constructor.call(this);};Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,waitMsgTarget:undefined,initEl:function(el){this.el=Ext.get(el);this.id=this.el.id||Ext.id();this.el.on("submit",this.onSubmit,this);this.el.addClass("x-form");},onSubmit:function(e){e.stopEvent();},isValid:function(){var _6=true;this.items.each(function(f){if(!f.validate()){_6=false;}});return _6;},doAction:function(_8,_9){if(typeof _8=="string"){_8=new Ext.form.Action.ACTION_TYPES[_8](this,_9);}if(this.fireEvent("beforeaction",this,_8)!==false){this.beforeAction(_8);_8.run.defer(100,_8);}},submit:function(_a){this.doAction("submit",_a);},load:function(_b){this.doAction("load",_b);},updateRecord:function(_c){_c.beginEdit();var fs=_c.fields;fs.each(function(f){var _f=this.findField(f.name);if(_f){_c.set(f.name,_f.getValue());}},this);_c.endEdit();},beforeAction:function(_10){var o=_10.options;if(o.waitMsg){if(this.waitMsgTarget===true){this.el.mask(o.waitMsg,"x-mask-loading");}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(o.waitMsg,"x-mask-loading");}else{Ext.MessageBox.wait(o.waitMsg,o.waitTitle||this.waitTitle||"Please Wait...");}}}},afterAction:function(_12,_13){this.activeAction=null;var o=_12.options;if(o.waitMsg){if(this.waitMsgTarget===true){this.el.unmask();}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask();}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide();}}}if(_13){if(o.reset){this.reset();}Ext.callback(o.success,o.scope,[this,_12]);this.fireEvent("actioncomplete",this,_12);}else{Ext.callback(o.failure,o.scope,[this,_12]);this.fireEvent("actionfailed",this,_12);}},findField:function(id){var _16=this.items.get(id);if(!_16){this.items.each(function(f){if(f.isFormField&&(f.dataIndex==id||f.id==id||f.getName()==id)){_16=f;return false;}});}return _16||null;},markInvalid:function(_18){if(_18 instanceof Array){for(var i=0,len=_18.length;i<len;i++){var _1b=_18[i];var f=this.findField(_1b.id);if(f){f.markInvalid(_1b.msg);}}}else{var _1d,id;for(id in _18){if(typeof _18[id]!="function"&&(_1d=this.findField(id))){_1d.markInvalid(_18[id]);}}}},setValues:function(_1f){if(_1f instanceof Array){for(var i=0,len=_1f.length;i<len;i++){var v=_1f[i];var f=this.findField(v.id);if(f){f.setValue(v.value);}}}else{var _24,id;for(id in _1f){if(typeof _1f[id]!="function"&&(_24=this.findField(id))){_24.setValue(_1f[id]);}}}},getValues:function(_26){var fs=Ext.lib.Ajax.serializeForm(this.el.dom);if(_26===true){return fs;}return Ext.urlDecode(fs);},clearInvalid:function(){this.items.each(function(f){f.clearInvalid();});},reset:function(){this.items.each(function(f){f.reset();});},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));},remove:function(_2a){this.items.remove(_2a);},render:function(){this.items.each(function(f){if(f.isFormField&&!f.rendered&&document.getElementById(f.id)){f.applyTo(f.id);}});},applyToFields:function(o){this.items.each(function(f){Ext.apply(f,o);});},applyIfToFields:function(o){this.items.each(function(f){Ext.applyIf(f,o);});}});Ext.BasicForm=Ext.form.BasicForm;
