<html><head><title>event.js</title><link rel="stylesheet" type="text/css" href="../style.css" media="screen"/></head><body><div class="hl-main"><pre><span class="hl-comment">/*                                                                                                                                                      
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
</span><span class="hl-url">http://developer.yahoo.net/yui/license.txt</span><span class="hl-comment">
version: 0.12.0
*/
// holder
/**
 * The CustomEvent class lets you define events for your application
 * that can be subscribed to by one or more independent component.
 *
 * @param {String}  type The type of event, which is passed to the callback
 *                  when the event fires
 * @param {Object}  oScope The context the event will fire from.  &quot;this&quot; will
 *                  refer to this object in the callback.  Default value: 
 *                  the window object.  The listener can override this.
 * @param {boolean} silent pass true to prevent the event from writing to
 *                  the log system
 * @namespace YAHOO.util
 * @class CustomEvent
 * @constructor
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-code">, </span><span class="hl-identifier">oScope</span><span class="hl-code">, </span><span class="hl-identifier">silent</span><span class="hl-code">, </span><span class="hl-identifier">signature</span><span class="hl-brackets">) {

    </span><span class="hl-comment">/**
     * The type of event, returned to subscribers when the event fires
     * @property type
     * @type string
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code"> = </span><span class="hl-identifier">type</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * The scope the the event will fire from by default.  Defaults to the window 
     * obj
     * @property scope
     * @type object
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">oScope</span><span class="hl-code"> || </span><span class="hl-builtin">window</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * By default all custom events are logged in the debug build, set silent
     * to true to disable logging for this event.
     * @property silent
     * @type boolean
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-code"> = </span><span class="hl-identifier">silent</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * Custom events support two styles of arguments provided to the event
     * subscribers.  
     * &lt;ul&gt;
     * &lt;li&gt;YAHOO.util.CustomEvent.LIST: 
     *   &lt;ul&gt;
     *   &lt;li&gt;param1: event name&lt;/li&gt;
     *   &lt;li&gt;param2: array of arguments sent to fire&lt;/li&gt;
     *   &lt;li&gt;param3: &lt;optional&gt; a custom object supplied by the subscriber&lt;/li&gt;
     *   &lt;/ul&gt;
     * &lt;/li&gt;
     * &lt;li&gt;YAHOO.util.CustomEvent.FLAT
     *   &lt;ul&gt;
     *   &lt;li&gt;param1: the first argument passed to fire.  If you need to
     *           pass multiple parameters, use and array or object literal&lt;/li&gt;
     *   &lt;li&gt;param2: &lt;optional&gt; a custom object supplied by the subscriber&lt;/li&gt;
     *   &lt;/ul&gt;
     * &lt;/li&gt;
     * &lt;/ul&gt;
     *   @property signature
     *   @type int
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">signature</span><span class="hl-code"> = </span><span class="hl-identifier">signature</span><span class="hl-code"> || </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-code">.</span><span class="hl-identifier">LIST</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * The subscribers to this event
     * @property subscribers
     * @type Subscriber[]
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-brackets">) {
    }

    </span><span class="hl-reserved">var </span><span class="hl-identifier">onsubscribeType</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">_YUICEOnSubscribe</span><span class="hl-quotes">&quot;</span><span class="hl-code">;

    </span><span class="hl-comment">// Only add subscribe events for events that are not generated by 
    // CustomEvent
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-code"> !== </span><span class="hl-identifier">onsubscribeType</span><span class="hl-brackets">) {

        </span><span class="hl-comment">/**
         * Custom events provide a custom event that fires whenever there is
         * a new subscriber to the event.  This provides an opportunity to
         * handle the case where there is a non-repeating event that has
         * already fired has a new subscriber.  
         *
         * @event subscribeEvent
         * @type YAHOO.util.CustomEvent
         * @param {Function} fn The function to execute
         * @param {Object}   obj An object to be passed along when the event 
         *                       fires
         * @param {boolean|Object}  override If true, the obj passed in becomes 
         *                                   the execution scope of the listener.
         *                                   if an object, that object becomes the
         *                                   the execution scope.
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribeEvent</span><span class="hl-code"> = 
                </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">onsubscribeType</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;

    </span><span class="hl-brackets">} 
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Subscriber listener sigature constant.  The LIST type returns three
 * parameters: the event type, the array of args passed to fire, and
 * the optional custom object
 * @property YAHOO.util.CustomEvent.LIST
 * @static
 * @type int
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-default">.</span><span class="hl-identifier">LIST</span><span class="hl-default"> = </span><span class="hl-number">0</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Subscriber listener sigature constant.  The FLAT type returns two
 * parameters: the first argument passed to fire and the optional 
 * custom object
 * @property YAHOO.util.CustomEvent.FLAT
 * @static
 * @type int
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-default">.</span><span class="hl-identifier">FLAT</span><span class="hl-default"> = </span><span class="hl-number">1</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * Subscribes the caller to this event
     * @method subscribe
     * @param {Function} fn        The function to execute
     * @param {Object}   obj       An object to be passed along when the event 
     *                             fires
     * @param {boolean|Object}  override If true, the obj passed in becomes 
     *                                   the execution scope of the listener.
     *                                   if an object, that object becomes the
     *                                   the execution scope.
     */
    </span><span class="hl-identifier">subscribe</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribeEvent</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribeEvent</span><span class="hl-code">.</span><span class="hl-identifier">fire</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Subscriber</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">) )</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unsubscribes the caller from this event
     * @method unsubscribe
     * @param {Function} fn  The function to execute
     * @param {Object}   obj  The custom object passed to subscribe (optional)
     * @return {boolean} True if the subscriber was found and detached.
     */
    </span><span class="hl-identifier">unsubscribe</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">found</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">s</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">contains</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-brackets">)) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_delete</span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-identifier">found</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">return </span><span class="hl-identifier">found</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Notifies the subscribers.  The callback functions will be executed
     * from the scope specified when the event was created, and with the 
     * following parameters:
     *   &lt;ul&gt;
     *   &lt;li&gt;The type of event&lt;/li&gt;
     *   &lt;li&gt;All of the arguments fire() was executed with as an array&lt;/li&gt;
     *   &lt;li&gt;The custom object (if any) that was passed into the subscribe() 
     *       method&lt;/li&gt;
     *   &lt;/ul&gt;
     * @method fire 
     * @param {Object*} arguments an arbitrary set of parameters to pass to 
     *                            the handler.
     */
    </span><span class="hl-identifier">fire</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">len</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return true</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">args</span><span class="hl-code">=</span><span class="hl-brackets">[]</span><span class="hl-code">, </span><span class="hl-identifier">ret</span><span class="hl-code">=</span><span class="hl-reserved">true</span><span class="hl-code">, </span><span class="hl-identifier">i</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">arguments</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">args</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">arguments</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">])</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">argslength</span><span class="hl-code"> = </span><span class="hl-identifier">args</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-brackets">) {
        }

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">s</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-brackets">) {
                }

                </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">getScope</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">scope</span><span class="hl-brackets">)</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">signature</span><span class="hl-code"> == </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-code">.</span><span class="hl-identifier">FLAT</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">param</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">args</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">param</span><span class="hl-code"> = </span><span class="hl-identifier">args</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">param</span><span class="hl-code">, </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code">, </span><span class="hl-identifier">args</span><span class="hl-code">, </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">false</span><span class="hl-code"> === </span><span class="hl-identifier">ret</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-brackets">) {
                    }

                    </span><span class="hl-comment">//break;
                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
        }

        </span><span class="hl-reserved">return true</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Removes all listeners
     * @method unsubscribeAll
     */
    </span><span class="hl-identifier">unsubscribeAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_delete</span><span class="hl-brackets">(</span><span class="hl-identifier">len</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-code"> - </span><span class="hl-identifier">i</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * @method _delete
     * @private
     */
    </span><span class="hl-identifier">_delete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">index</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">s</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">delete </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code">;
            </span><span class="hl-reserved">delete </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// delete this.subscribers[index];
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribers</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">index</span><span class="hl-code">, </span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * @method toString
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
         </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">CustomEvent: </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">'</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code">  + </span><span class="hl-quotes">&quot;</span><span class="hl-string">', </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + 
             </span><span class="hl-quotes">&quot;</span><span class="hl-string">scope: </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">scope</span><span class="hl-code">;

    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/////////////////////////////////////////////////////////////////////

/**
 * Stores the subscriber information to be used when the event fires.
 * @param {Function} fn       The function to execute
 * @param {Object}   obj      An object to be passed along when the event fires
 * @param {boolean}  override If true, the obj passed in becomes the execution
 *                            scope of the listener
 * @class Subscriber
 * @constructor
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">Subscriber</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">) {

    </span><span class="hl-comment">/**
     * The callback that will be execute when the event fires
     * @property fn
     * @type function
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code"> = </span><span class="hl-identifier">fn</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * An optional custom object that will passed to the callback when
     * the event fires
     * @property obj
     * @type object
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code"> = </span><span class="hl-identifier">obj</span><span class="hl-code"> || </span><span class="hl-reserved">null</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * The default execution scope for the event listener is defined when the
     * event is created (usually the object which contains the event).
     * By setting override to true, the execution scope becomes the custom
     * object passed in by the subscriber.  If override is an object, that 
     * object becomes the scope.
     * @property override
     * @type boolean|object
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code"> = </span><span class="hl-identifier">override</span><span class="hl-code">;

</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Returns the execution scope for this listener.  If override was set to true
 * the custom obj will be the scope.  If override is an object, that is the
 * scope, otherwise the default scope will be used.
 * @method getScope
 * @param {Object} defaultScope the scope to use if this listener does not
 *                              override it.
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">Subscriber</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default">.</span><span class="hl-identifier">getScope</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">defaultScope</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code"> === </span><span class="hl-reserved">true</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }
    </span><span class="hl-reserved">return </span><span class="hl-identifier">defaultScope</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Returns true if the fn and obj match this objects properties.
 * Used by the unsubscribe method to match the right subscriber.
 *
 * @method contains
 * @param {Function} fn the function to execute
 * @param {Object} obj an object to be passed along when the event fires
 * @return {boolean} true if the supplied arguments match this 
 *                   subscriber's signature.
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">Subscriber</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default">.</span><span class="hl-identifier">contains</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">obj</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code"> == </span><span class="hl-identifier">fn</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code"> == </span><span class="hl-identifier">obj</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code"> == </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * @method toString
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">Subscriber</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default">.</span><span class="hl-identifier">toString</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
    </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">Subscriber { obj: </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code"> || </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">  + 
           </span><span class="hl-quotes">&quot;</span><span class="hl-string">, override: </span><span class="hl-quotes">&quot;</span><span class="hl-code"> +  </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code"> || </span><span class="hl-quotes">&quot;</span><span class="hl-string">no</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string"> }</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * The Event Utility provides utilities for managing DOM Events and tools
 * for building event systems
 *
 * @module event
 * @title Event Utility
 * @namespace YAHOO.util
 * @requires yahoo
 */

// The first instance of Event will win if it is loaded more than once.
</span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-brackets">) {

</span><span class="hl-comment">/**
 * The event utility provides functions to add and remove event listeners,
 * event cleansing.  It also tries to automatically remove listeners it
 * registers during the unload event.
 *
 * @class Event
 * @static
 */
    </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

        </span><span class="hl-comment">/**
         * True after the onload event has fired
         * @property loadComplete
         * @type boolean
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">loadComplete</span><span class="hl-code"> =  </span><span class="hl-reserved">false</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Cache of wrapped listeners
         * @property listeners
         * @type array
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">listeners</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * User-defined unload function that will be fired before all events
         * are detached
         * @property unloadListeners
         * @type array
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">unloadListeners</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Cache of DOM0 event handlers to work around issues with DOM2 events
         * in Safari
         * @property legacyEvents
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">legacyEvents</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Listener stack for DOM0 events
         * @property legacyHandlers
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">legacyHandlers</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * The number of times to poll after window.onload.  This number is
         * increased if additional late-bound handlers are requested after
         * the page load.
         * @property retryCount
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">retryCount</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * onAvailable listeners
         * @property onAvailStack
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">onAvailStack</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Lookup table for legacy events
         * @property legacyMap
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">legacyMap</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Counter for auto id generation
         * @property counter
         * @static
         * @private
         */
        </span><span class="hl-reserved">var </span><span class="hl-identifier">counter</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-brackets">{ </span><span class="hl-comment">// PREPROCESS

            /**
             * The number of times we should look for elements that are not
             * in the DOM at the time the event is requested after the document
             * has been loaded.  The default is </span><span class="hl-url">200@amp</span><span class="hl-comment">;50 ms, so it will poll
             * for 10 seconds or until all outstanding handlers are bound
             * (whichever comes first).
             * @property POLL_RETRYS
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">POLL_RETRYS</span><span class="hl-code">: </span><span class="hl-number">200</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * The poll interval in milliseconds
             * @property POLL_INTERVAL
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">POLL_INTERVAL</span><span class="hl-code">: </span><span class="hl-number">20</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Element to bind, int constant
             * @property EL
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">EL</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Type of event, int constant
             * @property TYPE
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">TYPE</span><span class="hl-code">: </span><span class="hl-number">1</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Function to execute, int constant
             * @property FN
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">FN</span><span class="hl-code">: </span><span class="hl-number">2</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Function wrapped for scope correction and cleanup, int constant
             * @property WFN
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">WFN</span><span class="hl-code">: </span><span class="hl-number">3</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Object passed in by the user that will be returned as a 
             * parameter to the callback, int constant
             * @property OBJ
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">OBJ</span><span class="hl-code">: </span><span class="hl-number">3</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Adjusted scope, either the element we are registering the event
             * on or the custom object passed in by the listener, int constant
             * @property ADJ_SCOPE
             * @type int
             * @static
             * @final
             */
            </span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-code">: </span><span class="hl-number">4</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Safari detection is necessary to work around the preventDefault
             * bug that makes it so you can't cancel a href click from the 
             * handler.  There is not a capabilities check we can use here.
             * @property isSafari
             * @private
             * @static
             */
            </span><span class="hl-identifier">isSafari</span><span class="hl-code">: </span><span class="hl-brackets">(</span><span class="hl-quotes">/</span><span class="hl-string">Safari|Konqueror|KHTML</span><span class="hl-quotes">/gi</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">test</span><span class="hl-brackets">(</span><span class="hl-builtin">navigator</span><span class="hl-code">.</span><span class="hl-identifier">userAgent</span><span class="hl-brackets">)</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * IE detection needed to properly calculate pageX and pageY.  
             * capabilities checking didn't seem to work because another 
             * browser that does not provide the properties have the values 
             * calculated in a different manner than IE.
             * @property isIE
             * @private
             * @static
             */
            </span><span class="hl-identifier">isIE</span><span class="hl-code">: </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isSafari</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-builtin">navigator</span><span class="hl-code">.</span><span class="hl-identifier">userAgent</span><span class="hl-code">.</span><span class="hl-identifier">match</span><span class="hl-brackets">(</span><span class="hl-quotes">/</span><span class="hl-string">opera</span><span class="hl-quotes">/gi</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp; 
                    </span><span class="hl-builtin">navigator</span><span class="hl-code">.</span><span class="hl-identifier">userAgent</span><span class="hl-code">.</span><span class="hl-identifier">match</span><span class="hl-brackets">(</span><span class="hl-quotes">/</span><span class="hl-string">msie</span><span class="hl-quotes">/gi</span><span class="hl-brackets">))</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * poll handle
             * @property _interval
             * @private
             */
            </span><span class="hl-identifier">_interval</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * @method startInterval
             * @static
             * @private
             */
            </span><span class="hl-identifier">startInterval</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_interval</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">self</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">callback</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">self</span><span class="hl-code">.</span><span class="hl-identifier">_tryPreloadAttach</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">;
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_interval</span><span class="hl-code"> = </span><span class="hl-identifier">setInterval</span><span class="hl-brackets">(</span><span class="hl-identifier">callback</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">POLL_INTERVAL</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-comment">// this.timeout = setTimeout(callback, i);
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Executes the supplied callback when the item with the supplied
             * id is found.  This is meant to be used to execute behavior as
             * soon as possible as the page loads.  If you use this after the
             * initial page load it will poll for a fixed time for the element.
             * The number of times it will poll and the frequency are
             * configurable.  By default it will poll for 10 seconds.
             *
             * @method onAvailable
             *
             * @param {string}   p_id the id of the element to look for.
             * @param {function} p_fn what to execute when the element is found.
             * @param {object}   p_obj an optional object to be passed back as
             *                   a parameter to p_fn.
             * @param {boolean}  p_override If set to true, p_fn will execute
             *                   in the scope of p_obj
             *
             * @static
             */
            </span><span class="hl-identifier">onAvailable</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_id</span><span class="hl-code">, </span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-code">, </span><span class="hl-identifier">p_override</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">onAvailStack</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( { </span><span class="hl-identifier">id</span><span class="hl-code">:         </span><span class="hl-identifier">p_id</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">fn</span><span class="hl-code">:         </span><span class="hl-identifier">p_fn</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">obj</span><span class="hl-code">:        </span><span class="hl-identifier">p_obj</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">override</span><span class="hl-code">:   </span><span class="hl-identifier">p_override</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">checkReady</span><span class="hl-code">: </span><span class="hl-reserved">false    </span><span class="hl-brackets">} )</span><span class="hl-code">;

                </span><span class="hl-identifier">retryCount</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">POLL_RETRYS</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startInterval</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Works the same way as onAvailable, but additionally checks the
             * state of sibling elements to determine if the content of the
             * available element is safe to modify.
             *
             * @method onContentReady
             *
             * @param {string}   p_id the id of the element to look for.
             * @param {function} p_fn what to execute when the element is ready.
             * @param {object}   p_obj an optional object to be passed back as
             *                   a parameter to p_fn.
             * @param {boolean}  p_override If set to true, p_fn will execute
             *                   in the scope of p_obj
             *
             * @static
             */
            </span><span class="hl-identifier">onContentReady</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_id</span><span class="hl-code">, </span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-code">, </span><span class="hl-identifier">p_override</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">onAvailStack</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( { </span><span class="hl-identifier">id</span><span class="hl-code">:         </span><span class="hl-identifier">p_id</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">fn</span><span class="hl-code">:         </span><span class="hl-identifier">p_fn</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">obj</span><span class="hl-code">:        </span><span class="hl-identifier">p_obj</span><span class="hl-code">, 
                                     </span><span class="hl-identifier">override</span><span class="hl-code">:   </span><span class="hl-identifier">p_override</span><span class="hl-code">,
                                     </span><span class="hl-identifier">checkReady</span><span class="hl-code">: </span><span class="hl-reserved">true      </span><span class="hl-brackets">} )</span><span class="hl-code">;

                </span><span class="hl-identifier">retryCount</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">POLL_RETRYS</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startInterval</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Appends an event handler
             *
             * @method addListener
             *
             * @param {Object}   el        The html element to assign the 
             *                             event to
             * @param {String}   sType     The type of event to append
             * @param {Function} fn        The method the event invokes
             * @param {Object}   obj    An arbitrary object that will be 
             *                             passed as a parameter to the handler
             * @param {boolean}  override  If true, the obj passed in becomes
             *                             the execution scope of the listener
             * @return {boolean} True if the action was successful or defered,
             *                        false if one or more of the elements 
             *                        could not have the event bound to it.
             * @static
             */
            </span><span class="hl-identifier">addListener</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">) {

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">fn</span><span class="hl-code"> || !</span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// The el argument can be an array of elements or element ids.
                </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_isValidCollection</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">, 
                                       </span><span class="hl-identifier">sType</span><span class="hl-code">, 
                                       </span><span class="hl-identifier">fn</span><span class="hl-code">, 
                                       </span><span class="hl-identifier">obj</span><span class="hl-code">, 
                                       </span><span class="hl-identifier">override</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">ok</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">ok</span><span class="hl-code">;

                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">el</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">oEl</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-comment">// If the el argument is a string, we assume it is 
                    // actually the id of the element.  If the page is loaded
                    // we convert el to the actual element, otherwise we 
                    // defer attaching the event until onload event fires

                    // check to see if we need to delay hooking up the event 
                    // until after the page loads.
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oEl</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">oEl</span><span class="hl-code">;
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                        </span><span class="hl-comment">// defer adding the event until the element is available
                        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">onAvailable</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                           </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">)</span><span class="hl-code">;
                        </span><span class="hl-brackets">})</span><span class="hl-code">;

                        </span><span class="hl-reserved">return true</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-comment">// Element should be an html element or an array if we get 
                // here.
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// we need to make sure we fire registered unload events 
                // prior to automatically unhooking them.  So we hang on to 
                // these instead of attaching them to the window and fire the
                // handles explicitly during our one unload event.
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">unload</span><span class="hl-quotes">&quot;</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">obj</span><span class="hl-code"> !== </span><span class="hl-reserved">this</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">unloadListeners</span><span class="hl-brackets">[</span><span class="hl-identifier">unloadListeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> =
                            </span><span class="hl-brackets">[</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">return true</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// if the user chooses to override the scope, we use the custom
                // object passed in, otherwise the executing scope will be the
                // HTML element that the event is registered on
                </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">override</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">override</span><span class="hl-code"> === </span><span class="hl-reserved">true</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">obj</span><span class="hl-code">;
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                        </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">override</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-comment">// wrap the function so we can return the obj object when
                // the event fires;
                </span><span class="hl-reserved">var </span><span class="hl-identifier">wrappedFn</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">return </span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">, 
                                </span><span class="hl-identifier">obj</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">;

                </span><span class="hl-reserved">var </span><span class="hl-identifier">li</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">wrappedFn</span><span class="hl-code">, </span><span class="hl-identifier">scope</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-reserved">var </span><span class="hl-identifier">index</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;
                </span><span class="hl-comment">// cache the listener so we can try to automatically unload
                </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">li</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">useLegacyEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">legacyIndex</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getLegacyIndex</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)</span><span class="hl-code">;

                    </span><span class="hl-comment">// Add a new dom0 wrapper if one is not detected for this
                    // element
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">legacyIndex</span><span class="hl-code"> == -</span><span class="hl-number">1</span><span class="hl-code"> || 
                                </span><span class="hl-identifier">el</span><span class="hl-code"> != </span><span class="hl-identifier">legacyEvents</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">][</span><span class="hl-number">0</span><span class="hl-brackets">] ) {

                        </span><span class="hl-identifier">legacyIndex</span><span class="hl-code"> = </span><span class="hl-identifier">legacyEvents</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;
                        </span><span class="hl-identifier">legacyMap</span><span class="hl-brackets">[</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">legacyIndex</span><span class="hl-code">;

                        </span><span class="hl-comment">// cache the signature for the DOM0 event, and 
                        // include the existing handler for the event, if any
                        </span><span class="hl-identifier">legacyEvents</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">]</span><span class="hl-code"> = 
                            </span><span class="hl-brackets">[</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-brackets">[</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-brackets">]]</span><span class="hl-code">;
                        </span><span class="hl-identifier">legacyHandlers</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

                        </span><span class="hl-identifier">el</span><span class="hl-brackets">[</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-brackets">]</span><span class="hl-code"> = 
                            </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
                                </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">fireLegacyEvent</span><span class="hl-brackets">(
                                    </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">)</span><span class="hl-code">;
                            </span><span class="hl-brackets">}</span><span class="hl-code">;
                    </span><span class="hl-brackets">}

                    </span><span class="hl-comment">// add a reference to the wrapped listener to our custom
                    // stack of events
                    //legacyHandlers[legacyIndex].push(index);
                    </span><span class="hl-identifier">legacyHandlers</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">li</span><span class="hl-brackets">)</span><span class="hl-code">;

                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_simpleAdd</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">wrappedFn</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">return true</span><span class="hl-code">;
                
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * When using legacy events, the handler is routed to this object
             * so we can fire our custom listener stack.
             * @method fireLegacyEvent
             * @static
             * @private
             */
            </span><span class="hl-identifier">fireLegacyEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

                </span><span class="hl-reserved">var </span><span class="hl-identifier">le</span><span class="hl-code"> = </span><span class="hl-identifier">legacyHandlers</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">le</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">li</span><span class="hl-code"> = </span><span class="hl-identifier">le</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">li</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">WFN</span><span class="hl-brackets">] ) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">WFN</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                        </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-identifier">ok</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">ret</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return </span><span class="hl-identifier">ok</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the legacy event index that matches the supplied 
             * signature
             * @method getLegacyIndex
             * @static
             * @private
             */
            </span><span class="hl-identifier">getLegacyIndex</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">key</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">legacyMap</span><span class="hl-brackets">[</span><span class="hl-identifier">key</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">undefined</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) { 
                    </span><span class="hl-reserved">return</span><span class="hl-code"> -</span><span class="hl-number">1</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">legacyMap</span><span class="hl-brackets">[</span><span class="hl-identifier">key</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Logic that determines when we should automatically use legacy
             * events instead of DOM2 events.
             * @method useLegacyEvent
             * @static
             * @private
             */
            </span><span class="hl-identifier">useLegacyEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">addEventListener</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">attachEvent</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return true</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isSafari</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">click</span><span class="hl-quotes">&quot;</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-code"> || </span><span class="hl-quotes">&quot;</span><span class="hl-string">dblclick</span><span class="hl-quotes">&quot;</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">return true</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
                </span><span class="hl-reserved">return false</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,
                    
            </span><span class="hl-comment">/**
             * Removes an event handler
             *
             * @method removeListener
             *
             * @param {Object} el the html element or the id of the element to 
             * assign the event to.
             * @param {String} sType the type of event to remove.
             * @param {Function} fn the method the event invokes.  If fn is
             * undefined, then all event handlers for the type of event are 
             * removed.
             * @return {boolean} true if the unbind was successful, false 
             * otherwise.
             * @static
             */
            </span><span class="hl-identifier">removeListener</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">;

                </span><span class="hl-comment">// The el argument can be a string
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">el</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-comment">// The el argument can be an array of elements or element ids.
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_isValidCollection</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">ok</span><span class="hl-code"> = </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">removeListener</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">ok </span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">ok</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">fn</span><span class="hl-code"> || !</span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">) {
                    </span><span class="hl-comment">//return false;
                    </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">purgeElement</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">unload</span><span class="hl-quotes">&quot;</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {

                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">unloadListeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">++</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">li</span><span class="hl-code"> = </span><span class="hl-identifier">unloadListeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">li</span><span class="hl-code"> &amp;&amp; 
                            </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; 
                            </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-code"> &amp;&amp; 
                            </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-number">2</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
                                </span><span class="hl-identifier">unloadListeners</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">, </span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">;
                                </span><span class="hl-reserved">return true</span><span class="hl-code">;
                        </span><span class="hl-brackets">}
                    }

                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">var </span><span class="hl-identifier">cacheItem</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;

                </span><span class="hl-comment">// The index is a hidden parameter; needed to remove it from
                // the method signature because it was tempting users to
                // try and take advantage of it, which is not possible.
                </span><span class="hl-reserved">var </span><span class="hl-identifier">index</span><span class="hl-code"> = </span><span class="hl-identifier">arguments</span><span class="hl-brackets">[</span><span class="hl-number">3</span><span class="hl-brackets">]</span><span class="hl-code">;
  
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">undefined</span><span class="hl-quotes">&quot;</span><span class="hl-code"> == </span><span class="hl-reserved">typeof </span><span class="hl-identifier">index</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">index</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_getCacheIndex</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">index</span><span class="hl-code"> &gt;= </span><span class="hl-number">0</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">cacheItem</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">el</span><span class="hl-code"> || !</span><span class="hl-identifier">cacheItem</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">useLegacyEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">legacyIndex</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getLegacyIndex</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">llist</span><span class="hl-code"> = </span><span class="hl-identifier">legacyHandlers</span><span class="hl-brackets">[</span><span class="hl-identifier">legacyIndex</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">llist</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">llist</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                            </span><span class="hl-identifier">li</span><span class="hl-code"> = </span><span class="hl-identifier">llist</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">li</span><span class="hl-code"> &amp;&amp; 
                                </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">EL</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; 
                                </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">TYPE</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">sType</span><span class="hl-code"> &amp;&amp; 
                                </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
                                    </span><span class="hl-identifier">llist</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">, </span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">;
                                    </span><span class="hl-reserved">break</span><span class="hl-code">;
                            </span><span class="hl-brackets">}
                        }
                    }

                } </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_simpleRemove</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">cacheItem</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">WFN</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// removed the wrapped handler
                </span><span class="hl-reserved">delete </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">][</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">WFN</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-reserved">delete </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">][</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">index</span><span class="hl-code">, </span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">;

                </span><span class="hl-reserved">return true</span><span class="hl-code">;

            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the event's target element
             * @method getTarget
             * @param {Event} ev the event
             * @param {boolean} resolveTextNode when set to true the target's
             *                  parent will be returned if the target is a 
             *                  text node.  @deprecated, the text node is
             *                  now resolved automatically
             * @return {HTMLElement} the event's target
             * @static
             */
            </span><span class="hl-identifier">getTarget</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code">, </span><span class="hl-identifier">resolveTextNode</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">target</span><span class="hl-code"> || </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">srcElement</span><span class="hl-code">;
                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">resolveTextNode</span><span class="hl-brackets">(</span><span class="hl-identifier">t</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * In some cases, some browsers will return a text node inside
             * the actual element that was targeted.  This normalizes the
             * return value for getTarget and getRelatedTarget.
             * @method resolveTextNode
             * @param {HTMLElement} node node to resolve
             * @return {HTMLElement} the normized node
             * @static
             */
            </span><span class="hl-identifier">resolveTextNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {
                </span><span class="hl-comment">// if (node &amp;&amp; node.nodeName &amp;&amp; 
                        // &quot;#TEXT&quot; == node.nodeName.toUpperCase()) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code"> &amp;&amp; </span><span class="hl-number">3</span><span class="hl-code"> == </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nodeType</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parentNode</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">node</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the event's pageX
             * @method getPageX
             * @param {Event} ev the event
             * @return {int} the event's pageX
             * @static
             */
            </span><span class="hl-identifier">getPageX</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">pageX</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">x</span><span class="hl-code"> &amp;&amp; </span><span class="hl-number">0</span><span class="hl-code"> !== </span><span class="hl-identifier">x</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">clientX</span><span class="hl-code"> || </span><span class="hl-number">0</span><span class="hl-code">;

                    </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isIE </span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">x</span><span class="hl-code"> += </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_getScrollLeft</span><span class="hl-brackets">()</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return </span><span class="hl-identifier">x</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the event's pageY
             * @method getPageY
             * @param {Event} ev the event
             * @return {int} the event's pageY
             * @static
             */
            </span><span class="hl-identifier">getPageY</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">pageY</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">y</span><span class="hl-code"> &amp;&amp; </span><span class="hl-number">0</span><span class="hl-code"> !== </span><span class="hl-identifier">y</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">clientY</span><span class="hl-code"> || </span><span class="hl-number">0</span><span class="hl-code">;

                    </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isIE </span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">y</span><span class="hl-code"> += </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_getScrollTop</span><span class="hl-brackets">()</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return </span><span class="hl-identifier">y</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the pageX and pageY properties as an indexed array.
             * @method getXY
             * @type int[]
             * @static
             */
            </span><span class="hl-identifier">getXY</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return </span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">)]</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the event's related target 
             * @method getRelatedTarget
             * @param {Event} ev the event
             * @return {HTMLElement} the event's relatedTarget
             * @static
             */
            </span><span class="hl-identifier">getRelatedTarget</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">relatedTarget</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">t</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">mouseout</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">toElement</span><span class="hl-code">;
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">mouseover</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">fromElement</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">resolveTextNode</span><span class="hl-brackets">(</span><span class="hl-identifier">t</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the time of the event.  If the time is not included, the
             * event is modified using the current time.
             * @method getTime
             * @param {Event} ev the event
             * @return {Date} the time of the event
             * @static
             */
            </span><span class="hl-identifier">getTime</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">time</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-builtin">Date</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">getTime</span><span class="hl-brackets">()</span><span class="hl-code">;
                    </span><span class="hl-reserved">try </span><span class="hl-brackets">{
                        </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">time</span><span class="hl-code"> = </span><span class="hl-identifier">t</span><span class="hl-code">;
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">catch</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { 
                        </span><span class="hl-reserved">return </span><span class="hl-identifier">t</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">time</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Convenience method for stopPropagation + preventDefault
             * @method stopEvent
             * @param {Event} ev the event
             * @static
             */
            </span><span class="hl-identifier">stopEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopPropagation</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">preventDefault</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Stops event propagation
             * @method stopPropagation
             * @param {Event} ev the event
             * @static
             */
            </span><span class="hl-identifier">stopPropagation</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">stopPropagation</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">stopPropagation</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">cancelBubble</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Prevents the default behavior of the event
             * @method preventDefault
             * @param {Event} ev the event
             * @static
             */
            </span><span class="hl-identifier">preventDefault</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">preventDefault</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">preventDefault</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">returnValue</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,
             
            </span><span class="hl-comment">/**
             * Finds the event in the window object, the caller's arguments, or
             * in the arguments of another method in the callstack.  This is
             * executed automatically for events registered through the event
             * manager, so the implementer should not normally need to execute
             * this function at all.
             * @method getEvent
             * @param {Event} e the event parameter from the handler
             * @return {Event} the event 
             * @static
             */
            </span><span class="hl-identifier">getEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">ev</span><span class="hl-code"> = </span><span class="hl-identifier">e</span><span class="hl-code"> || </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">event</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEvent</span><span class="hl-code">.</span><span class="hl-identifier">caller</span><span class="hl-code">;
                    </span><span class="hl-reserved">while </span><span class="hl-brackets">(</span><span class="hl-identifier">c</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">ev</span><span class="hl-code"> = </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">arguments</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">Event</span><span class="hl-code"> == </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">constructor</span><span class="hl-brackets">) {
                            </span><span class="hl-reserved">break</span><span class="hl-code">;
                        </span><span class="hl-brackets">}
                        </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">caller</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return </span><span class="hl-identifier">ev</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the charcode for an event
             * @method getCharCode
             * @param {Event} ev the event
             * @return {int} the event's charCode
             * @static
             */
            </span><span class="hl-identifier">getCharCode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">ev</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">charCode</span><span class="hl-code"> || </span><span class="hl-identifier">ev</span><span class="hl-code">.</span><span class="hl-identifier">keyCode</span><span class="hl-code"> || </span><span class="hl-number">0</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Locating the saved event handler data by function ref
             *
             * @method _getCacheIndex
             * @static
             * @private
             */
            </span><span class="hl-identifier">_getCacheIndex</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">li</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">li</span><span class="hl-code">                 &amp;&amp; 
                         </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">fn</span><span class="hl-code">  &amp;&amp; 
                         </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">EL</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">el</span><span class="hl-code">  &amp;&amp; 
                         </span><span class="hl-identifier">li</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">TYPE</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">sType </span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">return </span><span class="hl-identifier">i</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">return</span><span class="hl-code"> -</span><span class="hl-number">1</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Generates an unique ID for the element if it does not already 
             * have one.
             * @method generateId
             * @param el the element to create the id for
             * @return {string} the resulting id of the element
             * @static
             */
            </span><span class="hl-identifier">generateId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">yuievtautoid-</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">counter</span><span class="hl-code">;
                    ++</span><span class="hl-identifier">counter</span><span class="hl-code">;
                    </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">return </span><span class="hl-identifier">id</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * We want to be able to use getElementsByTagName as a collection
             * to attach a group of events to.  Unfortunately, different 
             * browsers return different types of collections.  This function
             * tests to determine if the object is array-like.  It will also 
             * fail if the object is an array, but is empty.
             * @method _isValidCollection
             * @param o the object to test
             * @return {boolean} true if the object is array-like and populated
             * @static
             * @private
             */
            </span><span class="hl-identifier">_isValidCollection</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">o</span><span class="hl-brackets">) {
                </span><span class="hl-comment">// this.logger.debug(o.constructor.toString())
                // this.logger.debug(typeof o)

                </span><span class="hl-reserved">return </span><span class="hl-brackets">( </span><span class="hl-identifier">o</span><span class="hl-code">                    &amp;&amp; </span><span class="hl-comment">// o is something
                         </span><span class="hl-identifier">o</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">             &amp;&amp; </span><span class="hl-comment">// o is indexed
                         </span><span class="hl-reserved">typeof </span><span class="hl-identifier">o</span><span class="hl-code"> != </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-code"> &amp;&amp; </span><span class="hl-comment">// o is not a string</span><span class="hl-code">
                         !</span><span class="hl-identifier">o</span><span class="hl-code">.</span><span class="hl-identifier">tagName</span><span class="hl-code">           &amp;&amp; </span><span class="hl-comment">// o is not an HTML element</span><span class="hl-code">
                         !</span><span class="hl-identifier">o</span><span class="hl-code">.</span><span class="hl-identifier">alert</span><span class="hl-code">             &amp;&amp; </span><span class="hl-comment">// o is not a window
                         </span><span class="hl-reserved">typeof </span><span class="hl-identifier">o</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code"> != </span><span class="hl-quotes">&quot;</span><span class="hl-string">undefined</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * @private
             * @property elCache
             * DOM element cache
             * @static
             */
            </span><span class="hl-identifier">elCache</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * We cache elements bound by id because when the unload event 
             * fires, we can no longer use document.getElementById
             * @method getEl
             * @static
             * @private
             */
            </span><span class="hl-identifier">getEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Clears the element cache
             * @deprecated Elements are not cached any longer
             * @method clearCache
             * @static
             * @private
             */
            </span><span class="hl-identifier">clearCache</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * hook up any deferred listeners
             * @method _load
             * @static
             * @private
             */
            </span><span class="hl-identifier">_load</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">loadComplete</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
                </span><span class="hl-reserved">var </span><span class="hl-identifier">EU</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">;
                </span><span class="hl-comment">// Remove the listener to assist with the IE memory issue, but not
                // for other browsers because FF 1.0x does not like it.
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isIE</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_simpleRemove</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">load</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_load</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Polling function that runs before the onload event fires, 
             * attempting to attach to DOM Nodes as soon as they are 
             * available
             * @method _tryPreloadAttach
             * @static
             * @private
             */
            </span><span class="hl-identifier">_tryPreloadAttach</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return false</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

                </span><span class="hl-comment">// keep trying until after the page is loaded.  We need to 
                // check the page load state prior to trying to bind the 
                // elements so that we can be certain all elements have been 
                // tested appropriately
                </span><span class="hl-reserved">var </span><span class="hl-identifier">tryAgain</span><span class="hl-code"> = !</span><span class="hl-identifier">loadComplete</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tryAgain</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">tryAgain</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-identifier">retryCount</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// onAvailable
                </span><span class="hl-reserved">var </span><span class="hl-identifier">notAvail</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">onAvailStack</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code"> ; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">item</span><span class="hl-code"> = </span><span class="hl-identifier">onAvailStack</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">item</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">(</span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;

                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                            </span><span class="hl-comment">// The element is available, but not necessarily ready

                            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code"> !</span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">checkReady</span><span class="hl-code"> || 
                                    </span><span class="hl-identifier">loadComplete</span><span class="hl-code"> || 
                                    </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> ||
                                    </span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code"> &amp;&amp; </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-brackets">) ) {

                                </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">;
                                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-brackets">) {
                                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code"> === </span><span class="hl-reserved">true</span><span class="hl-brackets">) {
                                        </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code">;
                                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                                        </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-code">;
                                    </span><span class="hl-brackets">}
                                }
                                </span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">item</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-brackets">)</span><span class="hl-code">;
                                </span><span class="hl-reserved">delete </span><span class="hl-identifier">onAvailStack</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                            </span><span class="hl-brackets">}
                        } </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                            </span><span class="hl-identifier">notAvail</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">item</span><span class="hl-brackets">)</span><span class="hl-code">;
                        </span><span class="hl-brackets">}
                    }
                }

                </span><span class="hl-identifier">retryCount</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-identifier">notAvail</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> === </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-number">0</span><span class="hl-code"> : </span><span class="hl-identifier">retryCount</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">tryAgain</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startInterval</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">clearInterval</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_interval</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_interval</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

                </span><span class="hl-reserved">return true</span><span class="hl-code">;

            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Removes all listeners attached to the given element via addListener.
             * Optionally, the node's children can also be purged.
             * Optionally, you can specify a specific type of event to remove.
             * @method purgeElement
             * @param {HTMLElement} el the element to purge
             * @param {boolean} recurse recursively purge this element's children
             * as well.  Use with caution.
             * @param {string} sType optional type of listener to purge. If
             * left out, all listeners will be removed
             * @static
             */
            </span><span class="hl-identifier">purgeElement</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">recurse</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">elListeners</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getListeners</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">elListeners</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">elListeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code"> ; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">elListeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-comment">// can't use the index on the changing collection
                        //this.removeListener(el, l.type, l.fn, l.index);
                        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">removeListener</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-code">.</span><span class="hl-identifier">type</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">recurse</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">childNodes</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">childNodes</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code"> ; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">purgeElement</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">childNodes</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-identifier">recurse</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns all listeners attached to the given element via addListener.
             * Optionally, you can specify a specific type of event to return.
             * @method getListeners
             * @param el {HTMLElement} the element to inspect 
             * @param sType {string} optional type of listener to return. If
             * left out, all listeners will be returned
             * @return {Object} the listener. Contains the following fields:
             * &amp;nbsp;&amp;nbsp;type:   (string)   the type of event
             * &amp;nbsp;&amp;nbsp;fn:     (function) the callback supplied to addListener
             * &amp;nbsp;&amp;nbsp;obj:    (object)   the custom object supplied to addListener
             * &amp;nbsp;&amp;nbsp;adjust: (boolean)  whether or not to adjust the default scope
             * &amp;nbsp;&amp;nbsp;index:  (int)      its position in the Event util listener cache
             * @static
             */           
            </span><span class="hl-identifier">getListeners</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">elListeners</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">listeners</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code"> ; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">l</span><span class="hl-code">  &amp;&amp; </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">EL</span><span class="hl-brackets">]</span><span class="hl-code"> === </span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; 
                                </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">sType</span><span class="hl-code"> || </span><span class="hl-identifier">sType</span><span class="hl-code"> === </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">TYPE</span><span class="hl-brackets">]) ) {
                            </span><span class="hl-identifier">elListeners</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">({
                                </span><span class="hl-identifier">type</span><span class="hl-code">:   </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">TYPE</span><span class="hl-brackets">]</span><span class="hl-code">,
                                </span><span class="hl-identifier">fn</span><span class="hl-code">:     </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code">,
                                </span><span class="hl-identifier">obj</span><span class="hl-code">:    </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">OBJ</span><span class="hl-brackets">]</span><span class="hl-code">,
                                </span><span class="hl-identifier">adjust</span><span class="hl-code">: </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-brackets">]</span><span class="hl-code">,
                                </span><span class="hl-identifier">index</span><span class="hl-code">:  </span><span class="hl-identifier">i
                            </span><span class="hl-brackets">})</span><span class="hl-code">;
                        </span><span class="hl-brackets">}
                    }
                }

                </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">elListeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">elListeners</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Removes all listeners registered by pe.event.  Called 
             * automatically during the unload event.
             * @method _unload
             * @static
             * @private
             */
            </span><span class="hl-identifier">_unload</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {

                </span><span class="hl-reserved">var </span><span class="hl-identifier">EU</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">, </span><span class="hl-identifier">i</span><span class="hl-code">, </span><span class="hl-identifier">j</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">, </span><span class="hl-identifier">index</span><span class="hl-code">;

                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">unloadListeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">unloadListeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">l</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-builtin">window</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-brackets">]) {
                            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-brackets">]</span><span class="hl-code"> === </span><span class="hl-reserved">true</span><span class="hl-brackets">) {
                                </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">OBJ</span><span class="hl-brackets">]</span><span class="hl-code">;
                            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                                </span><span class="hl-identifier">scope</span><span class="hl-code"> = </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">ADJ_SCOPE</span><span class="hl-brackets">]</span><span class="hl-code">;
                            </span><span class="hl-brackets">}
                        }
                        </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">getEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">OBJ</span><span class="hl-brackets">] )</span><span class="hl-code">;
                        </span><span class="hl-reserved">delete </span><span class="hl-identifier">unloadListeners</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-identifier">l</span><span class="hl-code">=</span><span class="hl-reserved">null</span><span class="hl-code">;
                        </span><span class="hl-identifier">scope</span><span class="hl-code">=</span><span class="hl-reserved">null</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">listeners</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">j</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;
                    </span><span class="hl-reserved">while </span><span class="hl-brackets">(</span><span class="hl-identifier">j</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">index</span><span class="hl-code"> = </span><span class="hl-identifier">j</span><span class="hl-code">-</span><span class="hl-number">1</span><span class="hl-code">;
                        </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">listeners</span><span class="hl-brackets">[</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">l</span><span class="hl-brackets">) {
                            </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">removeListener</span><span class="hl-brackets">(</span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">EL</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">TYPE</span><span class="hl-brackets">]</span><span class="hl-code">, 
                                    </span><span class="hl-identifier">l</span><span class="hl-brackets">[</span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">FN</span><span class="hl-brackets">]</span><span class="hl-code">, </span><span class="hl-identifier">index</span><span class="hl-brackets">)</span><span class="hl-code">;
                        </span><span class="hl-brackets">} 
                        </span><span class="hl-identifier">j</span><span class="hl-code"> = </span><span class="hl-identifier">j</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-identifier">l</span><span class="hl-code">=</span><span class="hl-reserved">null</span><span class="hl-code">;

                    </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">clearCache</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">legacyEvents</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-comment">// dereference the element
                    </span><span class="hl-reserved">delete </span><span class="hl-identifier">legacyEvents</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">][</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-comment">// delete the array item
                    </span><span class="hl-reserved">delete </span><span class="hl-identifier">legacyEvents</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_simpleRemove</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">unload</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_unload</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns scrollLeft
             * @method _getScrollLeft
             * @static
             * @private
             */
            </span><span class="hl-identifier">_getScrollLeft</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">_getScroll</span><span class="hl-brackets">()[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns scrollTop
             * @method _getScrollTop
             * @static
             * @private
             */
            </span><span class="hl-identifier">_getScrollTop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">_getScroll</span><span class="hl-brackets">()[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Returns the scrollTop and scrollLeft.  Used to calculate the 
             * pageX and pageY in Internet Explorer
             * @method _getScroll
             * @static
             * @private
             */
            </span><span class="hl-identifier">_getScroll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">dd</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">documentElement</span><span class="hl-code">, </span><span class="hl-identifier">db</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">dd</span><span class="hl-code"> &amp;&amp; </span><span class="hl-brackets">(</span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code"> || </span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">return </span><span class="hl-brackets">[</span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code">, </span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">db</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return </span><span class="hl-brackets">[</span><span class="hl-identifier">db</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code">, </span><span class="hl-identifier">db</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">return </span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Adds a DOM event directly without the caching, cleanup, scope adj, etc
             *
             * @method _simpleAdd
             * @param {HTMLElement} el      the element to bind the handler to
             * @param {string}      sType   the type of event handler
             * @param {function}    fn      the callback to invoke
             * @param {boolen}      capture capture or bubble phase
             * @static
             * @private
             */
            </span><span class="hl-identifier">_simpleAdd</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">() {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">addEventListener</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">capture</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">addEventListener</span><span class="hl-brackets">(</span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-identifier">capture</span><span class="hl-brackets">))</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">attachEvent</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">capture</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">attachEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">return function</span><span class="hl-brackets">(){}</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }()</span><span class="hl-code">,

            </span><span class="hl-comment">/**
             * Basic remove listener
             *
             * @method _simpleRemove
             * @param {HTMLElement} el      the element to bind the handler to
             * @param {string}      sType   the type of event handler
             * @param {function}    fn      the callback to invoke
             * @param {boolen}      capture capture or bubble phase
             * @static
             * @private
             */
            </span><span class="hl-identifier">_simpleRemove</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">removeEventListener</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return function </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">capture</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">removeEventListener</span><span class="hl-brackets">(</span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-identifier">capture</span><span class="hl-brackets">))</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">detachEvent</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return function </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">detachEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-reserved">return function</span><span class="hl-brackets">(){}</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }()
        }</span><span class="hl-code">;

    </span><span class="hl-brackets">}()</span><span class="hl-code">;

    </span><span class="hl-brackets">(</span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">EU</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * YAHOO.util.Event.on is an alias for addListener
         * @method on
         * @see addListener
         * @static
         */
        </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-code"> = </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">addListener</span><span class="hl-code">;

        </span><span class="hl-comment">// YAHOO.mix(EU, YAHOO.util.EventProvider.prototype);
        // EU.createEvent(&quot;DOMContentReady&quot;);
        // EU.subscribe(&quot;DOMContentReady&quot;, EU._load);

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code"> &amp;&amp; </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_load</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-comment">// EU._simpleAdd(document, &quot;DOMContentLoaded&quot;, EU._load);
            </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_simpleAdd</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">load</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_load</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_simpleAdd</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">unload</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_unload</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">EU</span><span class="hl-code">.</span><span class="hl-identifier">_tryPreloadAttach</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">})()</span><span class="hl-code">;
</span><span class="hl-brackets">}

</span><span class="hl-comment">/**
 * EventProvider is designed to be used with YAHOO.augment to wrap 
 * CustomEvents in an interface that allows events to be subscribed to 
 * and fired by name.  This makes it possible for implementing code to
 * subscribe to an event that either has not been created yet, or will
 * not be created at all.
 *
 * @Class EventProvider
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">EventProvider</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() { }</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">EventProvider</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * Private storage of custom events
     * @property __yui_events
     * @type Object[]
     * @private
     */
    </span><span class="hl-identifier">__yui_events</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Private storage of custom event subscribers
     * @property __yui_subscribers
     * @type Object[]
     * @private
     */
    </span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,
    
    </span><span class="hl-comment">/**
     * Subscribe to a CustomEvent by event type
     *
     * @method subscribe
     * @param p_type     {string}   the type, or name of the event
     * @param p_fn       {function} the function to exectute when the event fires
     * @param p_obj
     * @param p_obj      {Object}   An object to be passed along when the event 
     *                              fires
     * @param p_override {boolean}  If true, the obj passed in becomes the 
     *                              execution scope of the listener
     */
    </span><span class="hl-identifier">subscribe</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_type</span><span class="hl-code">, </span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-code">, </span><span class="hl-identifier">p_override</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">ce</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ce</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">ce</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">(</span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-code">, </span><span class="hl-identifier">p_override</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">subs</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">subs</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]) {
                </span><span class="hl-identifier">subs</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-identifier">subs</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(
                { </span><span class="hl-identifier">fn</span><span class="hl-code">: </span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">obj</span><span class="hl-code">: </span><span class="hl-identifier">p_obj</span><span class="hl-code">, </span><span class="hl-identifier">override</span><span class="hl-code">: </span><span class="hl-identifier">p_override </span><span class="hl-brackets">} )</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unsubscribes the from the specified event
     * @method unsubscribe
     * @param p_type {string}   The type, or name of the event
     * @param p_fn   {Function} The function to execute
     * @param p_obj  {Object}   The custom object passed to subscribe (optional)
     * @return {boolean} true if the subscriber was found and detached.
     */
    </span><span class="hl-identifier">unsubscribe</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_type</span><span class="hl-code">, </span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">ce</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ce</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">ce</span><span class="hl-code">.</span><span class="hl-identifier">unsubscribe</span><span class="hl-brackets">(</span><span class="hl-identifier">p_fn</span><span class="hl-code">, </span><span class="hl-identifier">p_obj</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Creates a new custom event of the specified type.  If a custom event
     * by that name already exists, it will not be re-created.  In either
     * case the custom event is returned. 
     *
     * @method createEvent
     *
     * @param p_type {string} the type, or name of the event
     * @param p_config {object} optional config params.  Valid properties are:
     *
     *  &lt;ul&gt;
     *    &lt;li&gt;
     *      scope: defines the default execution scope.  If not defined
     *      the default scope will be this instance.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      silent: if true, the custom event will not generate log messages.
     *      This is false by default.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      onSubscribeCallback: specifies a callback to execute when the
     *      event has a new subscriber.  This will fire immediately for
     *      each queued subscriber if any exist prior to the creation of
     *      the event.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     *
     *  @return {CustomEvent} the custom event
     *
     */
    </span><span class="hl-identifier">createEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_type</span><span class="hl-code">, </span><span class="hl-identifier">p_config</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">opts</span><span class="hl-code"> = </span><span class="hl-identifier">p_config</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">events</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]) {
        } </span><span class="hl-reserved">else </span><span class="hl-brackets">{

            </span><span class="hl-reserved">var </span><span class="hl-identifier">scope</span><span class="hl-code">  = </span><span class="hl-identifier">opts</span><span class="hl-code">.</span><span class="hl-identifier">scope</span><span class="hl-code">  || </span><span class="hl-reserved">this</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">silent</span><span class="hl-code"> = </span><span class="hl-identifier">opts</span><span class="hl-code">.</span><span class="hl-identifier">silent</span><span class="hl-code"> || </span><span class="hl-reserved">null</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">ce</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">p_type</span><span class="hl-code">, </span><span class="hl-identifier">scope</span><span class="hl-code">, </span><span class="hl-identifier">silent</span><span class="hl-code">,
                    </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">CustomEvent</span><span class="hl-code">.</span><span class="hl-identifier">FLAT</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">ce</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">opts</span><span class="hl-code">.</span><span class="hl-identifier">onSubscribeCallback</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">ce</span><span class="hl-code">.</span><span class="hl-identifier">subscribeEvent</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">(</span><span class="hl-identifier">opts</span><span class="hl-code">.</span><span class="hl-identifier">onSubscribeCallback</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">qs</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_subscribers</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">qs</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">qs</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">ce</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">(</span><span class="hl-identifier">qs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-identifier">qs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">obj</span><span class="hl-code">, </span><span class="hl-identifier">qs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">override</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
        }

        </span><span class="hl-reserved">return </span><span class="hl-identifier">events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

   </span><span class="hl-comment">/**
     * Fire a custom event by name.  The callback functions will be executed
     * from the scope specified when the event was created, and with the 
     * following parameters:
     *   &lt;ul&gt;
     *   &lt;li&gt;The first argument fire() was executed with&lt;/li&gt;
     *   &lt;li&gt;The custom object (if any) that was passed into the subscribe() 
     *       method&lt;/li&gt;
     *   &lt;/ul&gt;
     * @method fireEvent
     * @param p_type    {string}  the type, or name of the event
     * @param arguments {Object*} an arbitrary set of parameters to pass to 
     *                            the handler.
     * @return {boolean} the return value from CustomEvent.fire, or null if 
     *                   the custom event does not exist.
     */
    </span><span class="hl-identifier">fireEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_type</span><span class="hl-code">, </span><span class="hl-identifier">arg1</span><span class="hl-code">, </span><span class="hl-identifier">arg2</span><span class="hl-code">, </span><span class="hl-identifier">etc</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">ce</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-brackets">[</span><span class="hl-identifier">p_type</span><span class="hl-brackets">]</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">ce</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">args</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">1</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">arguments</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">args</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">arguments</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">])</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">return </span><span class="hl-identifier">ce</span><span class="hl-code">.</span><span class="hl-identifier">fire</span><span class="hl-code">.</span><span class="hl-identifier">apply</span><span class="hl-brackets">(</span><span class="hl-identifier">ce</span><span class="hl-code">, </span><span class="hl-identifier">args</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">return null</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns true if the custom event of the provided type has been created
     * with createEvent.
     * @method hasEvent
     * @param type {string} the type, or name of the event
     */
    </span><span class="hl-identifier">hasEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">__yui_events</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">return true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
        </span><span class="hl-reserved">return false</span><span class="hl-code">;
    </span><span class="hl-brackets">}

}</span><span class="hl-default">;

</span></pre></div><hr>Copyright &copy; 2006 Jack Slocum. All rights reserved.</body></html>