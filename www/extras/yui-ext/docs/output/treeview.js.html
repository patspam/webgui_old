<html><head><title>treeview.js</title><link rel="stylesheet" type="text/css" href="../style.css" media="screen"/></head><body><div class="hl-main"><pre><span class="hl-comment">/*                                                                                                                                                      
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
</span><span class="hl-url">http://developer.yahoo.net/yui/license.txt</span><span class="hl-comment">
version: 0.12.0
*/
// holder
/**
 * The treeview widget is a generic tree building tool.
 * @module treeview
 * @title TreeView Widget
 * @requires yahoo
 * @optional animation
 * @namespace YAHOO.widget
 */
// holder
/**
 * Contains the tree view state data and the root node.
 *
 * @class TreeView
 * @constructor
 * @param {string|HTMLElement} id The id of the element, or the element
 * itself that the tree will be inserted into.
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * The id of tree container element
     * @property id
     * @type String
     */
    </span><span class="hl-identifier">id</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The host element for this tree
     * @property _el
     * @private
     */
    </span><span class="hl-identifier">_el</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

     </span><span class="hl-comment">/**
     * Flat collection of all nodes in this tree
     * @property _nodes
     * @type Node[]
     * @private
     */
    </span><span class="hl-identifier">_nodes</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * We lock the tree control while waiting for the dynamic loader to return
     * @property locked
     * @type boolean
     */
    </span><span class="hl-identifier">locked</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The animation to use for expanding children, if any
     * @property _expandAnim
     * @type string
     * @private
     */
    </span><span class="hl-identifier">_expandAnim</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The animation to use for collapsing children, if any
     * @property _collapseAnim
     * @type string
     * @private
     */
    </span><span class="hl-identifier">_collapseAnim</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The current number of animations that are executing
     * @property _animCount
     * @type int
     * @private
     */
    </span><span class="hl-identifier">_animCount</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The maximum number of animations to run at one time.
     * @property maxAnim
     * @type int
     */
    </span><span class="hl-identifier">maxAnim</span><span class="hl-code">: </span><span class="hl-number">2</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets up the animation for expanding children
     * @method setExpandAnim
     * @param {string} type the type of animation (acceptable values defined 
     * in YAHOO.widget.TVAnim)
     */
    </span><span class="hl-identifier">setExpandAnim</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TVAnim</span><span class="hl-code">.</span><span class="hl-identifier">isValid</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_expandAnim</span><span class="hl-code"> = </span><span class="hl-identifier">type</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets up the animation for collapsing children
     * @method setCollapseAnim
     * @param {string} the type of animation (acceptable values defined in 
     * YAHOO.widget.TVAnim)
     */
    </span><span class="hl-identifier">setCollapseAnim</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TVAnim</span><span class="hl-code">.</span><span class="hl-identifier">isValid</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_collapseAnim</span><span class="hl-code"> = </span><span class="hl-identifier">type</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Perform the expand animation if configured, or just show the
     * element if not configured or too many animations are in progress
     * @method animateExpand
     * @param el {HTMLElement} the element to animate
     * @param node {YAHOO.util.Node} the node that was expanded
     * @return {boolean} true if animation could be invoked, false otherwise
     */
    </span><span class="hl-identifier">animateExpand</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">node</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_expandAnim</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code"> &lt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxAnim</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// this.locked = true;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">tree</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TVAnim</span><span class="hl-code">.</span><span class="hl-identifier">getAnim</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_expandAnim</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">, 
                            </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">expandComplete</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">})</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-brackets">) {</span><span class="hl-code"> 
                ++</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animStart</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">{
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">node</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-identifier">node</span><span class="hl-code">, 
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">type</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">expand</span><span class="hl-quotes">&quot;
                    </span><span class="hl-brackets">})</span><span class="hl-code">;
                </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">animate</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">return true</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return false</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Perform the collapse animation if configured, or just show the
     * element if not configured or too many animations are in progress
     * @method animateCollapse
     * @param el {HTMLElement} the element to animate
     * @param node {YAHOO.util.Node} the node that was expanded
     * @return {boolean} true if animation could be invoked, false otherwise
     */
    </span><span class="hl-identifier">animateCollapse</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">node</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_collapseAnim</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code"> &lt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxAnim</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// this.locked = true;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">tree</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TVAnim</span><span class="hl-code">.</span><span class="hl-identifier">getAnim</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_collapseAnim</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">, 
                            </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">collapseComplete</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">})</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-brackets">) {</span><span class="hl-code"> 
                ++</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animStart</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">{
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">node</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-identifier">node</span><span class="hl-code">, 
                        </span><span class="hl-quotes">&quot;</span><span class="hl-string">type</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">collapse</span><span class="hl-quotes">&quot;
                    </span><span class="hl-brackets">})</span><span class="hl-code">;
                </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">animate</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">return true</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return false</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Function executed when the expand animation completes
     * @method expandComplete
     */
    </span><span class="hl-identifier">expandComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {</span><span class="hl-code">
        --</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animComplete</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">{
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">node</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-identifier">node</span><span class="hl-code">, 
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">type</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">expand</span><span class="hl-quotes">&quot;
            </span><span class="hl-brackets">})</span><span class="hl-code">;
        </span><span class="hl-comment">// this.locked = false;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Function executed when the collapse animation completes
     * @method collapseComplete
     */
    </span><span class="hl-identifier">collapseComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {</span><span class="hl-code">
        --</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_animCount</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animComplete</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">{
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">node</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-identifier">node</span><span class="hl-code">, 
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">type</span><span class="hl-quotes">&quot;</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">collapse</span><span class="hl-quotes">&quot;
            </span><span class="hl-brackets">})</span><span class="hl-code">;
        </span><span class="hl-comment">// this.locked = false;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Initializes the tree
     * @method init
     * @parm {string|HTMLElement} id the id of the element that will hold the tree
     * @private
     */
    </span><span class="hl-identifier">init</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-code"> !== </span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_el</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">/**
         * When animation is enabled, this event fires when the animation
         * starts
         * @event animStart
         * @type CustomEvent
         * @param {YAHOO.widget.Node} node the node that is expanding/collapsing
         * @parm {String} type the type of animation (&quot;expand&quot; or &quot;collapse&quot;)
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animStart</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * When animation is enabled, this event fires when the animation
         * completes
         * @event animComplete
         * @type CustomEvent
         * @param {YAHOO.widget.Node} node the node that is expanding/collapsing
         * @parm {String} type the type of animation (&quot;expand&quot; or &quot;collapse&quot;)
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">animComplete</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Fires when a node is going to be expanded.  Return false to stop
         * the expand.
         * @event collapse
         * @type CustomEvent
         * @param {YAHOO.widget.Node} node the node that is expanding/collapsing
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">collapse</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * Fires when a node is going to be collapsed.  Return false to stop
         * the collapse.
         * @event expand
         * @type CustomEvent
         * @param {YAHOO.widget.Node} node the node that is expanding/collapsing
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">expand</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-comment">// store a global reference
        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">trees</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;

        </span><span class="hl-comment">// Set up the root node
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">RootNode</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;


    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Renders the tree boilerplate and visible nodes
     * @method draw
     */
    </span><span class="hl-identifier">draw</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">html</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">getHtml</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-identifier">html</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">firstDraw</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the tree's host element
     * @method getEl
     * @return {HTMLElement} the host element
     */
    </span><span class="hl-identifier">getEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_el</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_el</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">_el</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Nodes register themselves with the tree instance when they are created.
     * @method regNode
     * @param node {Node} the node to register
     * @private
     */
    </span><span class="hl-identifier">regNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">[</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the root node of this tree
     * @method getRoot
     * @return {Node} the root node
     */
    </span><span class="hl-identifier">getRoot</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Configures this tree to dynamically load all child data
     * @method setDynamicLoad
     * @param {function} fnDataLoader the function that will be called to get the data
     * @param iconMode {int} configures the icon that is displayed when a dynamic
     * load node is expanded the first time without children.  By default, the 
     * &quot;collapse&quot; icon will be used.  If set to 1, the leaf node icon will be
     * displayed.
     */
    </span><span class="hl-identifier">setDynamicLoad</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fnDataLoader</span><span class="hl-code">, </span><span class="hl-identifier">iconMode</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">setDynamicLoad</span><span class="hl-brackets">(</span><span class="hl-identifier">fnDataLoader</span><span class="hl-code">, </span><span class="hl-identifier">iconMode</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Expands all child nodes.  </span><span class="hl-inlinedoc">Note:</span><span class="hl-comment"> this conflicts with the &quot;multiExpand&quot;
     * node property.  If expand all is called in a tree with nodes that
     * do not allow multiple siblings to be displayed, only the last sibling
     * will be expanded.
     * @method expandAll
     */
    </span><span class="hl-identifier">expandAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">expandAll</span><span class="hl-brackets">()</span><span class="hl-code">; 
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Collapses all expanded child nodes in the entire tree.
     * @method collapseAll
     */
    </span><span class="hl-identifier">collapseAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">collapseAll</span><span class="hl-brackets">()</span><span class="hl-code">; 
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a node in the tree that has the specified index (this index
     * is created internally, so this function probably will only be used
     * in html generated for a given node.)
     * @method getNodeByIndex
     * @param {int} nodeIndex the index of the node wanted
     * @return {Node} the node with index=nodeIndex, null if no match
     */
    </span><span class="hl-identifier">getNodeByIndex</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">nodeIndex</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">n</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">[</span><span class="hl-identifier">nodeIndex</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">n</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">n</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a node that has a matching property and value in the data
     * object that was passed into its constructor.
     * @method getNodeByProperty
     * @param {object} property the property to search (usually a string)
     * @param {object} value the value we want to find (usuall an int or string)
     * @return {Node} the matching node, null if no match
     */
    </span><span class="hl-identifier">getNodeByProperty</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">property</span><span class="hl-code">, </span><span class="hl-identifier">value</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">n</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">n</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">value</span><span class="hl-code"> == </span><span class="hl-identifier">n</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-brackets">[</span><span class="hl-identifier">property</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">return </span><span class="hl-identifier">n</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">return null</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a collection of nodes that have a matching property 
     * and value in the data object that was passed into its constructor.  
     * @method getNodesByProperty
     * @param {object} property the property to search (usually a string)
     * @param {object} value the value we want to find (usuall an int or string)
     * @return {Array} the matching collection of nodes, null if no match
     */
    </span><span class="hl-identifier">getNodesByProperty</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">property</span><span class="hl-code">, </span><span class="hl-identifier">value</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">values</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">n</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">n</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">value</span><span class="hl-code"> == </span><span class="hl-identifier">n</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-brackets">[</span><span class="hl-identifier">property</span><span class="hl-brackets">]) {
                </span><span class="hl-identifier">values</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">n</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">values</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">values</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Removes the node and its children, and optionally refreshes the 
     * branch of the tree that was affected.
     * @method removeNode
     * @param {Node} The node to remove
     * @param {boolean} autoRefresh automatically refreshes branch if true
     * @return {boolean} False is there was a problem, true otherwise.
     */
    </span><span class="hl-identifier">removeNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">, </span><span class="hl-identifier">autoRefresh</span><span class="hl-brackets">) { 

        </span><span class="hl-comment">// Don't delete the root node
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">isRoot</span><span class="hl-brackets">()) {
            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// Get the branch that we may need to refresh
        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// Delete the node and its children
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_deleteNode</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// Refresh the parent of the parent
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">autoRefresh</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">p</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">refresh</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return true</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Deletes this nodes child collection, recursively.  Also collapses
     * the node, and resets the dynamic load flag.  The primary use for
     * this method is to purge a node and allow it to fetch its data
     * dynamically again.
     * @method removeChildren
     * @param {Node} node the node to purge
     */
    </span><span class="hl-identifier">removeChildren</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">while </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
             </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_deleteNode</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">])</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">dynamicLoadComplete</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">collapse</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">updateIcon</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Deletes the node and recurses children
     * @method _deleteNode
     * @private
     */
    </span><span class="hl-identifier">_deleteNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) { 
        </span><span class="hl-comment">// Remove all the child nodes first
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">removeChildren</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// Remove the node from the tree
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">popNode</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Removes the node from the tree, preserving the child collection 
     * to make it possible to insert the branch into another part of the 
     * tree, or another tree.
     * @method popNode
     * @param {Node} the node to remove
     */
    </span><span class="hl-identifier">popNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;

        </span><span class="hl-comment">// Update the parent's collection of children
        </span><span class="hl-reserved">var </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> != </span><span class="hl-identifier">node</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">a</span><span class="hl-brackets">[</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code"> = </span><span class="hl-identifier">a</span><span class="hl-code">;

        </span><span class="hl-comment">// reset the childrenRendered flag for the parent
        </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

         </span><span class="hl-comment">// Update the sibling relationship
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;

        </span><span class="hl-comment">// Update the tree's node collection 
        </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">_nodes</span><span class="hl-brackets">[</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * TreeView instance toString
     * @method toString
     * @return {string} string representation of the tree
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">TreeView </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Generates an unique id for an element if it doesn't yet have one
     * @method generateId
     * @private
     */
    </span><span class="hl-identifier">generateId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">yui-tv-auto-id-</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">counter</span><span class="hl-code">;
            ++</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">counter</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return </span><span class="hl-identifier">id</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method that is executed when a node is expanded
     * @method onExpand
     * @param node {Node} the node that was expanded
     * @deprecated use treeobj.subscribe(&quot;expand&quot;) instead
     */
    </span><span class="hl-identifier">onExpand</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method that is executed when a node is collapsed.
     * @method onCollapse
     * @param node {Node} the node that was collapsed.
     * @deprecated use treeobj.subscribe(&quot;collapse&quot;) instead
     */
    </span><span class="hl-identifier">onCollapse</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) { }

}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">augment</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">EventProvider</span><span class="hl-brackets">)</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Count of all nodes in all trees
 * @property YAHOO.widget.TreeView.nodeCount
 * @type int
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">nodeCount</span><span class="hl-default"> = </span><span class="hl-number">0</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Global cache of tree instances
 * @property YAHOO.widget.TreeView.trees
 * @type Array
 * @static
 * @private
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">trees</span><span class="hl-default"> = </span><span class="hl-brackets">[]</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Counter for generating a new unique element id
 * @property YAHOO.widget.TreeView.counter
 * @static
 * @private
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">counter</span><span class="hl-default"> = </span><span class="hl-number">0</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Global method for getting a tree by its id.  Used in the generated
 * tree html.
 * @method YAHOO.widget.TreeView.getTree
 * @param treeId {String} the id of the tree instance
 * @return {TreeView} the tree instance requested, null if not found.
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">getTree</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">treeId</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">trees</span><span class="hl-brackets">[</span><span class="hl-identifier">treeId</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">t</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">t</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Global method for getting a node by its id.  Used in the generated
 * tree html.
 * @method YAHOO.widget.TreeView.getNode
 * @param treeId {String} the id of the tree instance
 * @param nodeIndex {String} the index of the node to return
 * @return {Node} the node instance requested, null if not found
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">getNode</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">treeId</span><span class="hl-code">, </span><span class="hl-identifier">nodeIndex</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">getTree</span><span class="hl-brackets">(</span><span class="hl-identifier">treeId</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">t</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">t</span><span class="hl-code">.</span><span class="hl-identifier">getNodeByIndex</span><span class="hl-brackets">(</span><span class="hl-identifier">nodeIndex</span><span class="hl-brackets">)</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Add a DOM event
 * @method YAHOO.widget.TreeView.addHandler
 * @param el the elment to bind the handler to
 * @param {string} sType the type of event handler
 * @param {function} fn the callback to invoke
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">addHandler</span><span class="hl-default"> = </span><span class="hl-reserved">function </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">addEventListener</span><span class="hl-brackets">) {
        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">addEventListener</span><span class="hl-brackets">(</span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">attachEvent</span><span class="hl-brackets">) {
        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">attachEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Remove a DOM event
 * @method YAHOO.widget.TreeView.removeHandler
 * @param el the elment to bind the handler to
 * @param {string} sType the type of event handler
 * @param {function} fn the callback to invoke
 * @static
 */

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">removeHandler</span><span class="hl-default"> = </span><span class="hl-reserved">function </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">removeEventListener</span><span class="hl-brackets">) {
        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">removeEventListener</span><span class="hl-brackets">(</span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">detachEvent</span><span class="hl-brackets">) {
        </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">detachEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">on</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">sType</span><span class="hl-code">, </span><span class="hl-identifier">fn</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * Attempts to preload the images defined in the styles used to draw the tree by
 * rendering off-screen elements that use the styles.
 * @method YAHOO.widget.TreeView.preload
 * @param {string} prefix the prefix to use to generate the names of the
 * images to preload, default is ygtv
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">preload</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">prefix</span><span class="hl-brackets">) {
    </span><span class="hl-identifier">prefix</span><span class="hl-code"> = </span><span class="hl-identifier">prefix</span><span class="hl-code"> || </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtv</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-reserved">var </span><span class="hl-identifier">styles</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-quotes">&quot;</span><span class="hl-string">tn</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">tm</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">tmh</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">tp</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">tph</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">ln</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">lm</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">lmh</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">lp</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">lph</span><span class="hl-quotes">&quot;</span><span class="hl-code">,</span><span class="hl-quotes">&quot;</span><span class="hl-string">loading</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">]</span><span class="hl-code">;

    </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
    
    </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt; </span><span class="hl-identifier">styles</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) { 
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;span class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">prefix</span><span class="hl-code"> + </span><span class="hl-identifier">styles</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;&gt;&amp;#160;&lt;/span&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
    </span><span class="hl-brackets">}

    </span><span class="hl-reserved">var </span><span class="hl-identifier">f</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">createElement</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">div</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-identifier">f</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;
    </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">position</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">absolute</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">top</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">-1000px</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">left</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">-1000px</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-identifier">f</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;

    </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-code">.</span><span class="hl-identifier">appendChild</span><span class="hl-brackets">(</span><span class="hl-identifier">f</span><span class="hl-brackets">)</span><span class="hl-code">;

    </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">removeHandler</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, 
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">load</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">preload</span><span class="hl-brackets">)</span><span class="hl-code">;

</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TreeView</span><span class="hl-default">.</span><span class="hl-identifier">addHandler</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">, 
                </span><span class="hl-quotes">&quot;</span><span class="hl-string">load</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">preload</span><span class="hl-brackets">)</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * The base class for all tree nodes.  The node's presentation and behavior in
 * response to mouse events is handled in Node subclasses.
 * @namespace YAHOO.widget
 * @class Node
 * @param oData {object} a string or object containing the data that will
 * be used to render this node
 * @param oParent {Node} this node's parent node
 * @param expanded {boolean} the initial expanded/collapsed state
 * @constructor
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">Node</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">Node</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * The index for this instance obtained from global counter in YAHOO.widget.TreeView.
     * @property index
     * @type int
     */
    </span><span class="hl-identifier">index</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * This node's child node collection.
     * @property children
     * @type Node[] 
     */
    </span><span class="hl-identifier">children</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Tree instance this node is part of
     * @property tree
     * @type TreeView
     */
    </span><span class="hl-identifier">tree</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The data linked to this node.  This can be any object or primitive
     * value, and the data can be used in getNodeHtml().
     * @property data
     * @type object
     */
    </span><span class="hl-identifier">data</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Parent node
     * @property parent
     * @type Node
     */
    </span><span class="hl-identifier">parent</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The depth of this node.  We start at -1 for the root node.
     * @property depth
     * @type int
     */
    </span><span class="hl-identifier">depth</span><span class="hl-code">: -</span><span class="hl-number">1</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The href for the node's label.  If one is not specified, the href will
     * be set so that it toggles the node.
     * @property href
     * @type string
     */
    </span><span class="hl-identifier">href</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The label href target, defaults to current window
     * @property target
     * @type string
     */
    </span><span class="hl-identifier">target</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">_self</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The node's expanded/collapsed state
     * @property expanded
     * @type boolean
     */
    </span><span class="hl-identifier">expanded</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Can multiple children be expanded at once?
     * @property multiExpand
     * @type boolean
     */
    </span><span class="hl-identifier">multiExpand</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Should we render children for a collapsed node?  It is possible that the
     * implementer will want to render the hidden data...  @todo verify that we 
     * need this, and implement it if we do.
     * @property renderHidden
     * @type boolean
     */
    </span><span class="hl-identifier">renderHidden</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * This flag is set to true when the html is generated for this node's
     * children, and set to false when new children are added.
     * @property childrenRendered
     * @type boolean
     */
    </span><span class="hl-identifier">childrenRendered</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Dynamically loaded nodes only fetch the data the first time they are
     * expanded.  This flag is set to true once the data has been fetched.
     * @property dynamicLoadComplete
     * @type boolean
     */
    </span><span class="hl-identifier">dynamicLoadComplete</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * This node's previous sibling
     * @property previousSibling
     * @type Node
     */
    </span><span class="hl-identifier">previousSibling</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * This node's next sibling
     * @property nextSibling
     * @type Node
     */
    </span><span class="hl-identifier">nextSibling</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * We can set the node up to call an external method to get the child
     * data dynamically.
     * @property _dynLoad
     * @type boolean
     * @private
     */
    </span><span class="hl-identifier">_dynLoad</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Function to execute when we need to get this node's child data.
     * @property dataLoader
     * @type function
     */
    </span><span class="hl-identifier">dataLoader</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * This is true for dynamically loading nodes while waiting for the
     * callback to return.
     * @property isLoading
     * @type boolean
     */
    </span><span class="hl-identifier">isLoading</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The toggle/branch icon will not show if this is set to false.  This
     * could be useful if the implementer wants to have the child contain
     * extra info about the parent, rather than an actual node.
     * @property hasIcon
     * @type boolean
     */
    </span><span class="hl-identifier">hasIcon</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Used to configure what happens when a dynamic load node is expanded
     * and we discover that it does not have children.  By default, it is
     * treated as if it still could have children (plus/minus icon).  Set
     * iconMode to have it display like a leaf node instead.
     * @property iconMode
     * @type int
     */
    </span><span class="hl-identifier">iconMode</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The node type
     * @property _type
     * @private
     */
    </span><span class="hl-identifier">_type</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">Node</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

    </span><span class="hl-comment">/*
    spacerPath: &quot;</span><span class="hl-url">http://us.i1.yimg.com/us.yimg.com/i/space.gif</span><span class="hl-comment">&quot;,
    expandedText: &quot;Expanded&quot;,
    collapsedText: &quot;Collapsed&quot;,
    loadingText: &quot;Loading&quot;,
    */
// holder
/**
     * Initializes this node, gets some of the properties from the parent
     * @method init
     * @param oData {object} a string or object containing the data that will
     * be used to render this node
     * @param oParent {Node} this node's parent node
     * @param expanded {boolean} the initial expanded/collapsed state
     */
    </span><span class="hl-identifier">init</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">data</span><span class="hl-code">       = </span><span class="hl-identifier">oData</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">   = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">      = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">nodeCount</span><span class="hl-code">;
        ++</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TreeView</span><span class="hl-code">.</span><span class="hl-identifier">nodeCount</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code">   = </span><span class="hl-identifier">expanded</span><span class="hl-code">;

        </span><span class="hl-comment">/**
         * The parentChange event is fired when a parent element is applied
         * to the node.  This is useful if you need to apply tree-level
         * properties to a tree that need to happen if a node is moved from
         * one tre to another.
         *
         * @event parentChange
         * @type CustomEvent
         */
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">parentChange</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// oParent should never be null except when we create the root node.
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oParent</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">oParent</span><span class="hl-code">.</span><span class="hl-identifier">appendChild</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Certain properties for the node cannot be set until the parent
     * is known. This is called after the node is inserted into a tree.
     * the parent is also applied to this node's children in order to
     * make it possible to move a branch from one tree to another.
     * @method applyParent
     * @param {Node} parentNode this node's parent node
     * @return {boolean} true if the application was successful
     */
    </span><span class="hl-identifier">applyParent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">parentNode</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">parentNode</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">   = </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code"> = </span><span class="hl-identifier">parentNode</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code">  = </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code"> + </span><span class="hl-number">1</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">javascript:</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleLink</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-code"> = </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">regNode</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

        </span><span class="hl-comment">// cascade update existing children
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">applyParent</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">parentChange</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">return true</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Appends a node to the child collection.
     * @method appendChild
     * @param childNode {Node} the new node
     * @return {Node} the child node
     * @private
     */
    </span><span class="hl-identifier">appendChild</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">childNode</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">()) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">sib</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">sib</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-identifier">childNode</span><span class="hl-code">;
            </span><span class="hl-identifier">childNode</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-identifier">sib</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">childNode</span><span class="hl-code">;
        </span><span class="hl-identifier">childNode</span><span class="hl-code">.</span><span class="hl-identifier">applyParent</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-identifier">childNode</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Appends this node to the supplied node's child collection
     * @method appendTo
     * @param parentNode {Node} the node to append to.
     * @return {Node} The appended node
     */
    </span><span class="hl-identifier">appendTo</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">parentNode</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">return </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">appendChild</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
    * Inserts this node before this supplied node
    * @method insertBefore
    * @param node {Node} the node to insert this node before
    * @return {Node} the inserted node
    */
    </span><span class="hl-identifier">insertBefore</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">) {

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">popNode</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">var </span><span class="hl-identifier">refIndex</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">isChildOf</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">refIndex</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">;
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">applyParent</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return this</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,
 
    </span><span class="hl-comment">/**
    * Inserts this node after the supplied node
    * @method insertAfter
    * @param node {Node} the node to insert after
    * @return {Node} the inserted node
    */
    </span><span class="hl-identifier">insertAfter</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">) {

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">popNode</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">var </span><span class="hl-identifier">refIndex</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">isChildOf</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">appendTo</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">splice</span><span class="hl-brackets">(</span><span class="hl-identifier">refIndex</span><span class="hl-code"> + </span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">previousSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code">;
            </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">applyParent</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return this</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
    * Returns true if the Node is a child of supplied Node
    * @method isChildOf
    * @param parentNode {Node} the Node to check
    * @return {boolean} The node index if this Node is a child of 
    *                   supplied Node, else -1.
    * @private
    */
    </span><span class="hl-identifier">isChildOf</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">parentNode</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">parentNode</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code"> ; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> === </span><span class="hl-reserved">this</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return </span><span class="hl-identifier">i</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
        }

        </span><span class="hl-reserved">return</span><span class="hl-code"> -</span><span class="hl-number">1</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a node array of this node's siblings, null if none.
     * @method getSiblings
     * @return Node[]
     */
    </span><span class="hl-identifier">getSiblings</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Shows this node's children
     * @method showChildren
     */
    </span><span class="hl-identifier">showChildren</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">animateExpand</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">()) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">.</span><span class="hl-identifier">display</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Hides this node's children
     * @method hideChildren
     */
    </span><span class="hl-identifier">hideChildren</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">animateCollapse</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">.</span><span class="hl-identifier">display</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">none</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the id for this node's container div
     * @method getElId
     * @return {string} the element id
     */
    </span><span class="hl-identifier">getElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtv</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the id for this node's children div
     * @method getChildrenElId
     * @return {string} the element id for this node's children div
     */
    </span><span class="hl-identifier">getChildrenElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvc</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the id for this node's toggle element
     * @method getToggleElId
     * @return {string} the toggel element id
     */
    </span><span class="hl-identifier">getToggleElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvt</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/*
     * Returns the id for this node's spacer image.  The spacer is positioned
     * over the toggle and provides feedback for screen readers.
     * @method getSpacerId
     * @return {string} the id for the spacer image
     */
    /*
    getSpacerId: function() {
        return &quot;ygtvspacer&quot; + this.index;
    }, 
    */
// holder
/**
     * Returns this node's container html element
     * @method getEl
     * @return {HTMLElement} the container html element
     */
    </span><span class="hl-identifier">getEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getElId</span><span class="hl-brackets">())</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the div that was generated for this node's children
     * @method getChildrenEl
     * @return {HTMLElement} this node's children div
     */
    </span><span class="hl-identifier">getChildrenEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenElId</span><span class="hl-brackets">())</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the element that is being used for this node's toggle.
     * @method getToggleEl
     * @return {HTMLElement} this node's toggle html element
     */
    </span><span class="hl-identifier">getToggleEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleElId</span><span class="hl-brackets">())</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/*
     * Returns the element that is being used for this node's spacer.
     * @method getSpacer
     * @return {HTMLElement} this node's spacer html element
     */
    /*
    getSpacer: function() {
        return document.getElementById( this.getSpacerId() ) || {};
    },
    */

    /*
    getStateText: function() {
        if (this.isLoading) {
            return this.loadingText;
        } else if (this.hasChildren(true)) {
            if (this.expanded) {
                return this.expandedText;
            } else {
                return this.collapsedText;
            }
        } else {
            return &quot;&quot;;
        }
    },
    */
// holder
/**
     * Generates the link that will invoke this node's toggle method
     * @method getToggleLink
     * @return {string} the javascript url for toggling this node
     */
    </span><span class="hl-identifier">getToggleLink</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">YAHOO.widget.TreeView.getNode(</span><span class="hl-special">\'</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-special">\'</span><span class="hl-string">,</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + 
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">).toggle()</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Hides this nodes children (creating them if necessary), changes the
     * @method collapse
     * toggle style.
     */
    </span><span class="hl-identifier">collapse</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-comment">// Only collapse if currently expanded
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) { </span><span class="hl-reserved">return</span><span class="hl-code">; </span><span class="hl-brackets">}

        </span><span class="hl-comment">// fire the collapse event handler
        </span><span class="hl-reserved">var </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">onCollapse</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">false</span><span class="hl-code"> === </span><span class="hl-identifier">ret</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">collapse</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">false</span><span class="hl-code"> === </span><span class="hl-identifier">ret</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// hide the child div
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hideChildren</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">updateIcon</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-comment">// this.getSpacer().title = this.getStateText();

    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Shows this nodes children (creating them if necessary), changes the
     * toggle style, and collapses its siblings if multiExpand is not set.
     * @method expand
     */
    </span><span class="hl-identifier">expand</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-comment">// Only expand if currently collapsed.
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) { </span><span class="hl-reserved">return</span><span class="hl-code">; </span><span class="hl-brackets">}

        </span><span class="hl-comment">// fire the expand event handler
        </span><span class="hl-reserved">var </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">onExpand</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">false</span><span class="hl-code"> === </span><span class="hl-identifier">ret</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        
        </span><span class="hl-identifier">ret</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">expand</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">false</span><span class="hl-code"> === </span><span class="hl-identifier">ret</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">renderChildren</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
        }

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">updateIcon</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-comment">// this.getSpacer().title = this.getStateText();

        // We do an extra check for children here because the lazy
        // load feature can expose nodes that have no children.

        // if (!this.hasChildren()) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLoading</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">sibs</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getSiblings</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">sibs</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">sibs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> != </span><span class="hl-reserved">this</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">sibs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) { 
                    </span><span class="hl-identifier">sibs</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">collapse</span><span class="hl-brackets">()</span><span class="hl-code">; 
                </span><span class="hl-brackets">}
            }
        }

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">showChildren</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">updateIcon</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleEl</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">className</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the css style name for the toggle
     * @method getStyle
     * @return {string} the css class for this node's toggle
     */
    </span><span class="hl-identifier">getStyle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLoading</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvloading</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-comment">// location top or bottom, middle nodes also get the top style
            </span><span class="hl-reserved">var </span><span class="hl-identifier">loc</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-quotes">&quot;</span><span class="hl-string">t</span><span class="hl-quotes">&quot;</span><span class="hl-code"> : </span><span class="hl-quotes">&quot;</span><span class="hl-string">l</span><span class="hl-quotes">&quot;</span><span class="hl-code">;

            </span><span class="hl-comment">// type p=plus(expand), m=minus(collapase), n=none(no children)
            </span><span class="hl-reserved">var </span><span class="hl-identifier">type</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">n</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code"> || </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getIconMode</span><span class="hl-brackets">())) {
            </span><span class="hl-comment">// if (this.hasChildren(true)) {
                </span><span class="hl-identifier">type</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-quotes">&quot;</span><span class="hl-string">m</span><span class="hl-quotes">&quot;</span><span class="hl-code"> : </span><span class="hl-quotes">&quot;</span><span class="hl-string">p</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtv</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-identifier">loc</span><span class="hl-code"> + </span><span class="hl-identifier">type</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the hover style for the icon
     * @return {string} the css class hover state
     * @method getHoverStyle
     */
    </span><span class="hl-identifier">getHoverStyle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLoading</span><span class="hl-brackets">) { 
            </span><span class="hl-identifier">s</span><span class="hl-code"> += </span><span class="hl-quotes">&quot;</span><span class="hl-string">h</span><span class="hl-quotes">&quot;</span><span class="hl-code">; 
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">return </span><span class="hl-identifier">s</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Recursively expands all of this node's children.
     * @method expandAll
     */
    </span><span class="hl-identifier">expandAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()) {
                </span><span class="hl-identifier">alert</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">Not supported (lazy load + expand all)</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">break</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">alert</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">Not supported (no multi-expand + expand all)</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">break</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">expand</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">expandAll</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Recursively collapses all of this node's children.
     * @method collapseAll
     */
    </span><span class="hl-identifier">collapseAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">collapse</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">collapseAll</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Configures this node for dynamically obtaining the child data
     * when the node is first expanded.  Calling it without the callback
     * will turn off dynamic load for the node.
     * @method setDynamicLoad
     * @param fmDataLoader {function} the function that will be used to get the data.
     * @param iconMode {int} configures the icon that is displayed when a dynamic
     * load node is expanded the first time without children.  By default, the 
     * &quot;collapse&quot; icon will be used.  If set to 1, the leaf node icon will be
     * displayed.
     */
    </span><span class="hl-identifier">setDynamicLoad</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">fnDataLoader</span><span class="hl-code">, </span><span class="hl-identifier">iconMode</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">fnDataLoader</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-code"> = </span><span class="hl-identifier">fnDataLoader</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_dynLoad</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_dynLoad</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">iconMode</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">iconMode</span><span class="hl-code"> = </span><span class="hl-identifier">iconMode</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Evaluates if this node is the root node of the tree
     * @method isRoot
     * @return {boolean} true if this is the root node
     */
    </span><span class="hl-identifier">isRoot</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code"> == </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Evaluates if this node's children should be loaded dynamically.  Looks for
     * the property both in this instance and the root node.  If the tree is
     * defined to load all children dynamically, the data callback function is
     * defined in the root node
     * @method isDynamic
     * @return {boolean} true if this node's children are to be loaded dynamically
     */
    </span><span class="hl-identifier">isDynamic</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">lazy</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isRoot</span><span class="hl-brackets">()</span><span class="hl-code"> &amp;&amp; </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_dynLoad</span><span class="hl-code"> || </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">_dynLoad</span><span class="hl-brackets">))</span><span class="hl-code">;
        </span><span class="hl-reserved">return </span><span class="hl-identifier">lazy</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the current icon mode.  This refers to the way childless dynamic
     * load nodes appear.
     * @method getIconMode
     * @return {int} 0 for collapse style, 1 for leaf node style
     */
    </span><span class="hl-identifier">getIconMode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">iconMode</span><span class="hl-code"> || </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">iconMode</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Checks if this node has children.  If this node is lazy-loading and the
     * children have not been rendered, we do not know whether or not there
     * are actual children.  In most cases, we need to assume that there are
     * children (for instance, the toggle needs to show the expandable 
     * presentation state).  In other times we want to know if there are rendered
     * children.  For the latter, &quot;checkForLazyLoad&quot; should be false.
     * @method hasChildren
     * @param checkForLazyLoad {boolean} should we check for unloaded children?
     * @return {boolean} true if this has children or if it might and we are
     * checking for this condition.
     */
    </span><span class="hl-identifier">hasChildren</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">checkForLazyLoad</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">return </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-code"> || 
                </span><span class="hl-brackets">(</span><span class="hl-identifier">checkForLazyLoad</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dynamicLoadComplete</span><span class="hl-brackets">) )</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Expands if node is collapsed, collapses otherwise.
     * @method toggle
     */
    </span><span class="hl-identifier">toggle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> &amp;&amp; </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code"> || </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()) ) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">collapse</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{ </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expand</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the markup for this node and its children.
     * @method getHtml
     * @return {string} the markup for this node and its expanded children.
     */
    </span><span class="hl-identifier">getHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;div class=&quot;ygtvitem&quot; id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getNodeHtml</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenHtml</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/div&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-reserved">return </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Called when first rendering the tree.  We always build the div that will
     * contain this nodes children, but we don't render the children themselves
     * unless this node is expanded.
     * @method getChildrenHtml
     * @return {string} the children container div html and any expanded children
     * @private
     */
    </span><span class="hl-identifier">getChildrenHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

        </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;div class=&quot;ygtvchildren&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> style=&quot;display:none;&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-comment">// Don't render the actual child node HTML unless this node is expanded.
        </span><span class="hl-reserved">if </span><span class="hl-brackets">( (</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code"> ||
                </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">renderHidden</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()) ) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">renderChildren</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/div&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Generates the markup for the child nodes.  This is not done until the node
     * is expanded.
     * @method renderChildren
     * @return {string} the html for this node's children
     * @private
     */
    </span><span class="hl-identifier">renderChildren</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {


        </span><span class="hl-reserved">var </span><span class="hl-identifier">node</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isDynamic</span><span class="hl-brackets">()</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dynamicLoadComplete</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLoading</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-brackets">) {

                </span><span class="hl-identifier">setTimeout</span><span class="hl-brackets">( 
                    </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">, 
                            </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
                                </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">loadComplete</span><span class="hl-brackets">()</span><span class="hl-code">; 
                            </span><span class="hl-brackets">})</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;
                
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-brackets">) {

                </span><span class="hl-identifier">setTimeout</span><span class="hl-brackets">( 
                    </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                        </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">root</span><span class="hl-code">.</span><span class="hl-identifier">dataLoader</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">, 
                            </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
                                </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">loadComplete</span><span class="hl-brackets">()</span><span class="hl-code">; 
                            </span><span class="hl-brackets">})</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">Error: data loader not found or not specified.</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-code">;

        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">completeRender</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Called when we know we have all the child data.
     * @method completeRender
     * @return {string} children html
     */
    </span><span class="hl-identifier">completeRender</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// this.children[i].childrenRendered = false;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">children</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">getHtml</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">childrenRendered</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Load complete is the callback function we pass to the data provider
     * in dynamic load situations.
     * @method loadComplete
     */
    </span><span class="hl-identifier">loadComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">completeRender</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dynamicLoadComplete</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLoading</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">expand</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns this node's ancestor at the specified depth.
     * @method getAncestor
     * @param {int} depth the depth of the ancestor.
     * @return {Node} the ancestor
     */
    </span><span class="hl-identifier">getAncestor</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">depth</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">depth</span><span class="hl-code"> &gt;= </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code"> || </span><span class="hl-identifier">depth</span><span class="hl-code"> &lt; </span><span class="hl-number">0</span><span class="hl-brackets">)  {
            </span><span class="hl-reserved">return null</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        
        </span><span class="hl-reserved">while </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code"> &gt; </span><span class="hl-identifier">depth</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">parent</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return </span><span class="hl-identifier">p</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the css class for the spacer at the specified depth for
     * this node.  If this node's ancestor at the specified depth
     * has a next sibling the presentation is different than if it
     * does not have a next sibling
     * @method getDepthStyle
     * @param {int} depth the depth of the ancestor.
     * @return {string} the css class for the spacer
     */
    </span><span class="hl-identifier">getDepthStyle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">depth</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getAncestor</span><span class="hl-brackets">(</span><span class="hl-identifier">depth</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-brackets">)</span><span class="hl-code"> ? 
            </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvdepthcell</span><span class="hl-quotes">&quot;</span><span class="hl-code"> : </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvblankdepthcell</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Get the markup for the node.  This is designed to be overrided so that we can
     * support different types of nodes.
     * @method getNodeHtml
     * @return {string} The HTML that will render this node.
     */
    </span><span class="hl-identifier">getNodeHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-code">; 
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Regenerates the html for this node and its children.  To be used when the
     * node is expanded and new children have been added.
     * @method refresh
     */
    </span><span class="hl-identifier">refresh</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-comment">// this.loadComplete();
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getChildrenEl</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">innerHTML</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">completeRender</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleEl</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">className</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Node toString
     * @method toString
     * @return {string} string representation of the node
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">Node (</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">)</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}

}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">augment</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">Node</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">EventProvider</span><span class="hl-brackets">)</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * A custom YAHOO.widget.Node that handles the unique nature of 
 * the virtual, presentationless root node.
 * @namespace YAHOO.widget
 * @class RootNode
 * @extends YAHOO.widget.Node
 * @param oTree {YAHOO.widget.TreeView} The tree instance this node belongs to
 * @constructor
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">RootNode</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oTree</span><span class="hl-brackets">) {
	</span><span class="hl-comment">// Initialize the node with null params.  The root node is a
	// special case where the node has no presentation.  So we have
	// to alter the standard properties a bit.
	</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-reserved">null</span><span class="hl-code">, </span><span class="hl-reserved">null</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
	
	</span><span class="hl-comment">/*
	 * For the root node, we get the tree reference from as a param
	 * to the constructor instead of from the parent element.
	 */
	</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code"> = </span><span class="hl-identifier">oTree</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">RootNode</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">Node</span><span class="hl-code">, </span><span class="hl-brackets">{
    
    </span><span class="hl-comment">// overrides YAHOO.widget.Node
    </span><span class="hl-identifier">getNodeHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-code">; 
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">RootNode</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">loadComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">draw</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}

})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * The default node presentation.  The first parameter should be
 * either a string that will be used as the node's label, or an object
 * that has a string propery called label.  By default, the clicking the
 * label will toggle the expanded/collapsed state of the node.  By
 * changing the href property of the instance, this behavior can be
 * changed so that the label will go to the specified href.
 * @namespace YAHOO.widget
 * @class TextNode
 * @extends YAHOO.widget.Node
 * @constructor
 * @param oData {object} a string or object containing the data that will
 * be used to render this node
 * @param oParent {YAHOO.widget.Node} this node's parent node
 * @param expanded {boolean} the initial expanded/collapsed state
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TextNode</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {

    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setUpLabel</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}

}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TextNode</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">Node</span><span class="hl-code">, </span><span class="hl-brackets">{
    
    </span><span class="hl-comment">/**
     * The CSS class for the label href.  Defaults to ygtvlabel, but can be
     * overridden to provide a custom presentation for a specific node.
     * @property labelStyle
     * @type string
     */
    </span><span class="hl-identifier">labelStyle</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvlabel</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The derived element id of the label for this node
     * @property labelElId
     * @type string
     */
    </span><span class="hl-identifier">labelElId</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The text for the label.  It is assumed that the oData parameter will
     * either be a string that will be used as the label, or an object that
     * has a property called &quot;label&quot; that we will use.
     * @property label
     * @type string
     */
    </span><span class="hl-reserved">label</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-identifier">textNodeParentChange</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
 
        </span><span class="hl-comment">/**
         * Custom event that is fired when the text node label is clicked.  The
         * custom event is defined on the tree instance, so there is a single
         * event that handles all nodes in the tree.  The node clicked is 
         * provided as an argument
         *
         * @event labelClick
         * @for YAHOO.widget.TreeView
         * @param {YAHOO.widget.Node} node the node clicked
         */
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">hasEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">labelClick</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">createEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">labelClick</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
       
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets up the node label
     * @method setUpLabel
     * @param oData string containing the label, or an object with a label property
     */
    </span><span class="hl-identifier">setUpLabel</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">) { 
        
        </span><span class="hl-comment">// set up the custom event on the tree
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">textNodeParentChange</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">parentChange</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">textNodeParentChange</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">oData</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">oData</span><span class="hl-code"> = </span><span class="hl-brackets">{ </span><span class="hl-reserved">label</span><span class="hl-code">: </span><span class="hl-identifier">oData </span><span class="hl-brackets">}</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-reserved">label</span><span class="hl-code"> = </span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-reserved">label</span><span class="hl-code">;
        
        </span><span class="hl-comment">// update the link
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-code"> = </span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// set the target
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">target</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">target</span><span class="hl-code"> = </span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">target</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">labelStyle</span><span class="hl-code"> = </span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">labelElId</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvlabelel</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the label element
     * @for YAHOO.widget.TextNode
     * @method getLabelEl
     * @return {object} the element
     */
    </span><span class="hl-identifier">getLabelEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">labelElId</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.widget.Node
    </span><span class="hl-identifier">getNodeHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;tr&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// sb[sb.length] = '&lt;td class=&quot;ygtvdepthcell&quot;&gt;&amp;#160;&lt;/td&gt;';
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDepthStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-brackets">)</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;&gt;&amp;#160;&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">getNode</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">YAHOO.widget.TreeView.getNode(</span><span class="hl-special">\'</span><span class="hl-quotes">'</span><span class="hl-code"> +
                        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-special">\'</span><span class="hl-string">,</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">)</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-comment">// sb[sb.length] = ' onselectstart=&quot;return false&quot;';
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseover=&quot;this.className=</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">getNode</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">.getHoverStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseout=&quot;this.className=</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">getNode</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">.getStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onclick=&quot;javascript:</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleLink</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-comment">/*
        sb[sb.length] = '&lt;img id=&quot;' + this.getSpacerId() + '&quot;';
        sb[sb.length] = ' alt=&quot;&quot;';
        sb[sb.length] = ' tabindex=0';
        sb[sb.length] = ' src=&quot;' + this.spacerPath + '&quot;';
        sb[sb.length] = ' title=&quot;' + this.getStateText() + '&quot;';
        sb[sb.length] = ' class=&quot;ygtvspacer&quot;';
        // sb[sb.length] = ' onkeypress=&quot;return ' + getNode + '&quot;.onKeyPress()&quot;';
        sb[sb.length] = ' /&gt;';
        */

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&amp;#160;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;a</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">labelElId</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">labelStyle</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> href=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">href</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> target=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">target</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onclick=&quot;return </span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">getNode</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">.onLabelClick(</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">getNode</span><span class="hl-code"> +</span><span class="hl-quotes">'</span><span class="hl-string">)&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseover=&quot;document.getElementById(</span><span class="hl-special">\'</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-special">\'</span><span class="hl-string">).className=</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">getNode</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">.getHoverStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseout=&quot;document.getElementById(</span><span class="hl-special">\'</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-special">\'</span><span class="hl-string">).className=</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">getNode</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">.getStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> &gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-reserved">label</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/a&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/tr&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/table&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Executed when the label is clicked.  Fires the labelClick custom event.
     * @method onLabelClick
     * @param me {Node} this node
     * @scope the anchor tag clicked
     * @return false to cancel the anchor click
     */
    </span><span class="hl-identifier">onLabelClick</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">me</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">return </span><span class="hl-identifier">me</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">fireEvent</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">labelClick</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">me</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">//return true;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">TextNode (</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">) </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-reserved">label</span><span class="hl-code">;
    </span><span class="hl-brackets">}

})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * A menu-specific implementation that differs from TextNode in that only 
 * one sibling can be expanded at a time.
 * @namespace YAHOO.widget
 * @class MenuNode
 * @extends YAHOO.widget.TextNode
 * @param oData {object} a string or object containing the data that will
 * be used to render this node
 * @param oParent {YAHOO.widget.Node} this node's parent node
 * @param expanded {boolean} the initial expanded/collapsed state
 * @constructor
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">MenuNode</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">) {
	</span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">) { 
		</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code">;
		</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setUpLabel</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">)</span><span class="hl-code">;
	</span><span class="hl-brackets">}

    </span><span class="hl-comment">/*
     * Menus usually allow only one branch to be open at a time.
     */
	</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">multiExpand</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;


</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">MenuNode</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">TextNode</span><span class="hl-code">, </span><span class="hl-brackets">{

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">MenuNode (</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">) </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-reserved">label</span><span class="hl-code">;
    </span><span class="hl-brackets">}

})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * This implementation takes either a string or object for the
 * oData argument.  If is it a string, we will use it for the display
 * of this node (and it can contain any html code).  If the parameter
 * is an object, we look for a parameter called &quot;html&quot; that will be
 * used for this node's display.
 * @namespace YAHOO.widget
 * @class HTMLNode
 * @extends YAHOO.widget.Node
 * @constructor
 * @param oData {object} a string or object containing the data that will
 * be used to render this node
 * @param oParent {YAHOO.widget.Node} this node's parent node
 * @param expanded {boolean} the initial expanded/collapsed state
 * @param hasIcon {boolean} specifies whether or not leaf nodes should
 * have an icon
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">HTMLNode</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-code">, </span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">oParent</span><span class="hl-code">, </span><span class="hl-identifier">expanded</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initContent</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">HTMLNode</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-code">.</span><span class="hl-identifier">Node</span><span class="hl-code">, </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * The CSS class for the html content container.  Defaults to ygtvhtml, but 
     * can be overridden to provide a custom presentation for a specific node.
     * @property contentStyle
     * @type string
     */
    </span><span class="hl-identifier">contentStyle</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvhtml</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The generated id that will contain the data passed in by the implementer.
     * @property contentElId
     * @type string
     */
    </span><span class="hl-identifier">contentElId</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The HTML content to use for this node's display
     * @property content
     * @type string
     */
    </span><span class="hl-identifier">content</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets up the node label
     * @property initContent
     * @param {object} An html string or object containing an html property
     * @param {boolean} hasIcon determines if the node will be rendered with an
     * icon or not
     */
    </span><span class="hl-identifier">initContent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oData</span><span class="hl-code">, </span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">) { 
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">oData</span><span class="hl-code"> == </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">oData</span><span class="hl-code"> = </span><span class="hl-brackets">{ </span><span class="hl-identifier">html</span><span class="hl-code">: </span><span class="hl-identifier">oData </span><span class="hl-brackets">}</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">html</span><span class="hl-code"> = </span><span class="hl-identifier">oData</span><span class="hl-code">.</span><span class="hl-identifier">html</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">contentElId</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygtvcontentel</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasIcon</span><span class="hl-code"> = </span><span class="hl-identifier">hasIcon</span><span class="hl-code">;

    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns the outer html element for this node's content
     * @method getContentEl
     * @return {HTMLElement} the element
     */
    </span><span class="hl-identifier">getContentEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">getElementById</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">contentElId</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.widget.Node
    </span><span class="hl-identifier">getNodeHtml</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">sb</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;tr&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDepthStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-brackets">)</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;&gt;&amp;#160;&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasIcon</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleElId</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onclick=&quot;javascript:</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getToggleLink</span><span class="hl-brackets">()</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasChildren</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)) {
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseover=&quot;this.className=</span><span class="hl-quotes">'</span><span class="hl-code">;
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">YAHOO.widget.TreeView.getNode(</span><span class="hl-special">\'</span><span class="hl-quotes">'</span><span class="hl-code">;
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-special">\'</span><span class="hl-string">,</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> +  </span><span class="hl-quotes">'</span><span class="hl-string">).getHoverStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> onmouseout=&quot;this.className=</span><span class="hl-quotes">'</span><span class="hl-code">;
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">YAHOO.widget.TreeView.getNode(</span><span class="hl-special">\'</span><span class="hl-quotes">'</span><span class="hl-code">;
                </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">tree</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-special">\'</span><span class="hl-string">,</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> +  </span><span class="hl-quotes">'</span><span class="hl-string">).getStyle()&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&gt;&amp;#160;&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;td</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> id=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">contentElId</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> class=&quot;</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">contentStyle</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string">&quot;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string"> &gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">html</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/td&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/tr&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;
        </span><span class="hl-identifier">sb</span><span class="hl-brackets">[</span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">&lt;/table&gt;</span><span class="hl-quotes">'</span><span class="hl-code">;

        </span><span class="hl-reserved">return </span><span class="hl-identifier">sb</span><span class="hl-code">.</span><span class="hl-identifier">join</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { 
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">HTMLNode (</span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">index</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">)</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}

})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * A static factory class for tree view expand/collapse animations
 * @class TVAnim
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TVAnim</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
    </span><span class="hl-reserved">return </span><span class="hl-brackets">{
        </span><span class="hl-comment">/**
         * Constant for the fade in animation
         * @property FADE_IN
         * @type string
         * @static
         */
        </span><span class="hl-identifier">FADE_IN</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">TVFadeIn</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Constant for the fade out animation
         * @property FADE_OUT
         * @type string
         * @static
         */
        </span><span class="hl-identifier">FADE_OUT</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">TVFadeOut</span><span class="hl-quotes">&quot;</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns a ygAnim instance of the given type
         * @method getAnim
         * @param type {string} the type of animation
         * @param el {HTMLElement} the element to element (probably the children div)
         * @param callback {function} function to invoke when the animation is done.
         * @return {YAHOO.util.Animation} the animation instance
         * @static
         */
        </span><span class="hl-identifier">getAnim</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">callback</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">return new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">](</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">callback</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-reserved">return null</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns true if the specified animation class is available
         * @method isValid
         * @param type {string} the type of animation
         * @return {boolean} true if valid, false if not
         * @static
         */
        </span><span class="hl-identifier">isValid</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">type</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">widget</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">])</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">;
</span><span class="hl-brackets">} ()</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * A 1/2 second fade-in animation.
 * @class TVFadeIn
 * @constructor
 * @param el {HTMLElement} the element to animate
 * @param callback {function} function to invoke when the animation is finished
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TVFadeIn</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">callback</span><span class="hl-brackets">) {
    </span><span class="hl-comment">/**
     * The element to animate
     * @property el
     * @type HTMLElement
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * the callback to invoke when the animation is complete
     * @property callback
     * @type function
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">callback</span><span class="hl-code"> = </span><span class="hl-identifier">callback</span><span class="hl-code">;

</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TVFadeIn</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{
    </span><span class="hl-comment">/**
     * Performs the animation
     * @method animate
     */
    </span><span class="hl-identifier">animate</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">tvanim</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;
        </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">opacity</span><span class="hl-code"> = </span><span class="hl-number">0.1</span><span class="hl-code">;
        </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">filter</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">alpha(opacity=10)</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
        </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">display</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">dur</span><span class="hl-code"> = </span><span class="hl-number">0.4</span><span class="hl-code">; 
        </span><span class="hl-reserved">var </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Anim</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-brackets">{</span><span class="hl-identifier">opacity</span><span class="hl-code">: </span><span class="hl-brackets">{</span><span class="hl-identifier">from</span><span class="hl-code">: </span><span class="hl-number">0.1</span><span class="hl-code">, </span><span class="hl-identifier">to</span><span class="hl-code">: </span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-identifier">unit</span><span class="hl-code">:</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">}}</span><span class="hl-code">, </span><span class="hl-identifier">dur</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">onComplete</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">( </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">tvanim</span><span class="hl-code">.</span><span class="hl-identifier">onComplete</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">} )</span><span class="hl-code">;
        </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">animate</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Clean up and invoke callback
     * @method onComplete
     */
    </span><span class="hl-identifier">onComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">callback</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * toString
     * @method toString
     * @return {string} the string representation of the instance
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">TVFadeIn</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * A 1/2 second fade out animation.
 * @class TVFadeOut
 * @constructor
 * @param el {HTMLElement} the element to animate
 * @param callback {Function} function to invoke when the animation is finished
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TVFadeOut</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">callback</span><span class="hl-brackets">) {
    </span><span class="hl-comment">/**
     * The element to animate
     * @property el
     * @type HTMLElement
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">;

    </span><span class="hl-comment">/**
     * the callback to invoke when the animation is complete
     * @property callback
     * @type function
     */
    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">callback</span><span class="hl-code"> = </span><span class="hl-identifier">callback</span><span class="hl-code">;

</span><span class="hl-brackets">}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">widget</span><span class="hl-default">.</span><span class="hl-identifier">TVFadeOut</span><span class="hl-default">.</span><span class="hl-identifier">prototype</span><span class="hl-default"> = </span><span class="hl-brackets">{
    </span><span class="hl-comment">/**
     * Performs the animation
     * @method animate
     */
    </span><span class="hl-identifier">animate</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">tvanim</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">dur</span><span class="hl-code"> = </span><span class="hl-number">0.4</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Anim</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-brackets">{</span><span class="hl-identifier">opacity</span><span class="hl-code">: </span><span class="hl-brackets">{</span><span class="hl-identifier">from</span><span class="hl-code">: </span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-identifier">to</span><span class="hl-code">: </span><span class="hl-number">0.1</span><span class="hl-code">, </span><span class="hl-identifier">unit</span><span class="hl-code">:</span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">}}</span><span class="hl-code">, </span><span class="hl-identifier">dur</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">onComplete</span><span class="hl-code">.</span><span class="hl-identifier">subscribe</span><span class="hl-brackets">( </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">tvanim</span><span class="hl-code">.</span><span class="hl-identifier">onComplete</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">} )</span><span class="hl-code">;
        </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">animate</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Clean up and invoke callback
     * @method onComplete
     */
    </span><span class="hl-identifier">onComplete</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;
        </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">display</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">none</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
        </span><span class="hl-comment">// s.opacity = 1;
        </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">filter</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">alpha(opacity=100)</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">callback</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * toString
     * @method toString
     * @return {string} the string representation of the instance
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-quotes">&quot;</span><span class="hl-string">TVFadeOut</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span></pre></div><hr>Copyright &copy; 2006 Jack Slocum. All rights reserved.</body></html>