<html><head><title>dragdrop.js</title><link rel="stylesheet" type="text/css" href="../style.css" media="screen"/></head><body><div class="hl-main"><pre><span class="hl-comment">/*
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
</span><span class="hl-url">http://developer.yahoo.net/yui/license.txt</span><span class="hl-comment">
version: 0.12.0
*/

</span><span class="hl-brackets">(</span><span class="hl-reserved">function</span><span class="hl-brackets">() {

</span><span class="hl-reserved">var </span><span class="hl-identifier">Event</span><span class="hl-code">=</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">;
</span><span class="hl-reserved">var </span><span class="hl-identifier">Dom</span><span class="hl-code">=</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">;

</span><span class="hl-comment">/**
 * Defines the interface and base operation of items that that can be
 * dragged or can be drop targets.  It was designed to be extended, overriding
 * the event handlers for startDrag, onDrag, onDragOver, onDragOut.
 * Up to three html elements can be associated with a DragDrop instance:
 * &lt;ul&gt;
 * &lt;li&gt;linked element: the element that is passed into the constructor.
 * This is the element which defines the boundaries for interaction with
 * other DragDrop objects.&lt;/li&gt;
 * &lt;li&gt;handle element(s): The drag operation only occurs if the element that
 * was clicked matches a handle element.  By default this is the linked
 * element, but there are times that you will want only a portion of the
 * linked element to initiate the drag operation, and the setHandleElId()
 * method provides a way to define this.&lt;/li&gt;
 * &lt;li&gt;drag element: this represents an the element that would be moved along
 * with the cursor during a drag operation.  By default, this is the linked
 * element itself as in {@link YAHOO.util.DD}.  setDragElId() lets you define
 * a separate element that would be moved, as in {@link YAHOO.util.DDProxy}
 * &lt;/li&gt;
 * &lt;/ul&gt;
 * This class should not be instantiated until the onload event to ensure that
 * the associated elements are available.
 * The following would define a DragDrop obj that would interact with any
 * other DragDrop obj in the &quot;group1&quot; group:
 * &lt;pre&gt;
 *  dd = new YAHOO.util.DragDrop(&quot;div1&quot;, &quot;group1&quot;);
 * &lt;/pre&gt;
 * Since none of the event handlers have been implemented, nothing would
 * actually happen if you were to run the code above.  Normally you would
 * override this class or one of the default implementations, but you can
 * also override the methods you want on an instance of the class...
 * &lt;pre&gt;
 *  dd.onDragDrop = function(e, id) {
 *  &amp;nbsp;&amp;nbsp;alert(&quot;dd was dropped on &quot; + id);
 *  }
 * &lt;/pre&gt;
 * @namespace YAHOO.util
 * @class DragDrop
 * @constructor
 * @param {String} id of the element that is linked to this instance
 * @param {String} sGroup the group of related DragDrop objects
 * @param {object} config an object containing configurable attributes
 *                Valid properties for DragDrop:
 *                    padding, isTarget, maintainOffset, primaryButtonOnly
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDrop</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-code">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDrop</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * The id of the element associated with this object.  This is what we
     * refer to as the &quot;linked element&quot; because the size and position of
     * this element is used to determine when the drag and drop objects have
     * interacted.
     * @property id
     * @type String
     */
    </span><span class="hl-identifier">id</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Configuration attributes passed into the constructor
     * @property config
     * @type object
     */
    </span><span class="hl-identifier">config</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The id of the element that will be dragged.  By default this is same
     * as the linked element , but could be changed to another element. Ex:
     * YAHOO.util.DDProxy
     * @property dragElId
     * @type String
     * @private
     */
    </span><span class="hl-identifier">dragElId</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * the id of the element that initiates the drag operation.  By default
     * this is the linked element, but could be changed to be a child of this
     * element.  This lets us do things like only starting the drag when the
     * header element within the linked html element is clicked.
     * @property handleElId
     * @type String
     * @private
     */
    </span><span class="hl-identifier">handleElId</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * An associative array of HTML tags that will be ignored if clicked.
     * @property invalidHandleTypes
     * @type {string: string}
     */
    </span><span class="hl-identifier">invalidHandleTypes</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * An associative array of ids for elements that will be ignored if clicked
     * @property invalidHandleIds
     * @type {string: string}
     */
    </span><span class="hl-identifier">invalidHandleIds</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * An indexted array of css class names for elements that will be ignored
     * if clicked.
     * @property invalidHandleClasses
     * @type string[]
     */
    </span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The linked element's absolute X position at the time the drag was
     * started
     * @property startPageX
     * @type int
     * @private
     */
    </span><span class="hl-identifier">startPageX</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The linked element's absolute X position at the time the drag was
     * started
     * @property startPageY
     * @type int
     * @private
     */
    </span><span class="hl-identifier">startPageY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The group defines a logical collection of DragDrop objects that are
     * related.  Instances only get events when interacting with other
     * DragDrop object in the same group.  This lets us define multiple
     * groups using a single DragDrop subclass if we want.
     * @property groups
     * @type {string: string}
     */
    </span><span class="hl-identifier">groups</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Individual drag/drop instances can be locked.  This will prevent
     * onmousedown start drag.
     * @property locked
     * @type boolean
     * @private
     */
    </span><span class="hl-identifier">locked</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Lock this instance
     * @method lock
     */
    </span><span class="hl-identifier">lock</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unlock this instace
     * @method unlock
     */
    </span><span class="hl-identifier">unlock</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default, all insances can be a drop target.  This can be disabled by
     * setting isTarget to false.
     * @method isTarget
     * @type boolean
     */
    </span><span class="hl-identifier">isTarget</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The padding configured for this drag and drop object for calculating
     * the drop zone intersection with this object.
     * @method padding
     * @type int[]
     */
    </span><span class="hl-identifier">padding</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Cached reference to the linked element
     * @property _domRef
     * @private
     */
    </span><span class="hl-identifier">_domRef</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Internal typeof flag
     * @property __ygDragDrop
     * @private
     */
    </span><span class="hl-identifier">__ygDragDrop</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Set to true when horizontal contraints are applied
     * @property constrainX
     * @type boolean
     * @private
     */
    </span><span class="hl-identifier">constrainX</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Set to true when vertical contraints are applied
     * @property constrainY
     * @type boolean
     * @private
     */
    </span><span class="hl-identifier">constrainY</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The left constraint
     * @property minX
     * @type int
     * @private
     */
    </span><span class="hl-identifier">minX</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The right constraint
     * @property maxX
     * @type int
     * @private
     */
    </span><span class="hl-identifier">maxX</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The up constraint
     * @property minY
     * @type int
     * @type int
     * @private
     */
    </span><span class="hl-identifier">minY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The down constraint
     * @property maxY
     * @type int
     * @private
     */
    </span><span class="hl-identifier">maxY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Maintain offsets when we resetconstraints.  Set to true when you want
     * the position of the element relative to its parent to stay the same
     * when the page changes
     *
     * @property maintainOffset
     * @type boolean
     */
    </span><span class="hl-identifier">maintainOffset</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Array of pixel locations the element will snap to if we specified a
     * horizontal graduation/interval.  This array is generated automatically
     * when you define a tick interval.
     * @property xTicks
     * @type int[]
     */
    </span><span class="hl-identifier">xTicks</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Array of pixel locations the element will snap to if we specified a
     * vertical graduation/interval.  This array is generated automatically
     * when you define a tick interval.
     * @property yTicks
     * @type int[]
     */
    </span><span class="hl-identifier">yTicks</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default the drag and drop instance will only respond to the primary
     * button click (left button for a right-handed mouse).  Set to true to
     * allow drag and drop to start with any mouse click that is propogated
     * by the browser
     * @property primaryButtonOnly
     * @type boolean
     */
    </span><span class="hl-identifier">primaryButtonOnly</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The availabe property is false until the linked dom element is accessible.
     * @property available
     * @type boolean
     */
    </span><span class="hl-identifier">available</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default, drags can only be initiated if the mousedown occurs in the
     * region the linked element is.  This is done in part to work around a
     * bug in some browsers that mis-report the mousedown if the previous
     * mouseup happened outside of the window.  This property is set to true
     * if outer handles are defined.
     *
     * @property hasOuterHandles
     * @type boolean
     * @default false
     */
    </span><span class="hl-identifier">hasOuterHandles</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the startDrag event
     * @method b4StartDrag
     * @private
     */
    </span><span class="hl-identifier">b4StartDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called after a drag/drop object is clicked
     * and the drag or mousedown time thresholds have beeen met.
     * @method startDrag
     * @param {int} X click location
     * @param {int} Y click location
     */
    </span><span class="hl-identifier">startDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the onDrag event
     * @method b4Drag
     * @private
     */
    </span><span class="hl-identifier">b4Drag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called during the onMouseMove event while dragging an
     * object.
     * @method onDrag
     * @param {Event} e the mousemove event
     */
    </span><span class="hl-identifier">onDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called when this element fist begins hovering over
     * another DragDrop obj
     * @method onDragEnter
     * @param {Event} e the mousemove event
     * @param {String|DragDrop[]} id In POINT mode, the element
     * id this is hovering over.  In INTERSECT mode, an array of one or more
     * dragdrop items being hovered over.
     */
    </span><span class="hl-identifier">onDragEnter</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the onDragOver event
     * @method b4DragOver
     * @private
     */
    </span><span class="hl-identifier">b4DragOver</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called when this element is hovering over another
     * DragDrop obj
     * @method onDragOver
     * @param {Event} e the mousemove event
     * @param {String|DragDrop[]} id In POINT mode, the element
     * id this is hovering over.  In INTERSECT mode, an array of dd items
     * being hovered over.
     */
    </span><span class="hl-identifier">onDragOver</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the onDragOut event
     * @method b4DragOut
     * @private
     */
    </span><span class="hl-identifier">b4DragOut</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called when we are no longer hovering over an element
     * @method onDragOut
     * @param {Event} e the mousemove event
     * @param {String|DragDrop[]} id In POINT mode, the element
     * id this was hovering over.  In INTERSECT mode, an array of dd items
     * that the mouse is no longer over.
     */
    </span><span class="hl-identifier">onDragOut</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the onDragDrop event
     * @method b4DragDrop
     * @private
     */
    </span><span class="hl-identifier">b4DragDrop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called when this item is dropped on another DragDrop
     * obj
     * @method onDragDrop
     * @param {Event} e the mouseup event
     * @param {String|DragDrop[]} id In POINT mode, the element
     * id this was dropped on.  In INTERSECT mode, an array of dd items this
     * was dropped on.
     */
    </span><span class="hl-builtin">onDragDrop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Abstract method called when this item is dropped on an area with no
     * drop target
     * @method onInvalidDrop
     * @param {Event} e the mouseup event
     */
    </span><span class="hl-identifier">onInvalidDrop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code that executes immediately before the endDrag event
     * @method b4EndDrag
     * @private
     */
    </span><span class="hl-identifier">b4EndDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Fired when we are done dragging the object
     * @method endDrag
     * @param {Event} e the mouseup event
     */
    </span><span class="hl-identifier">endDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Code executed immediately before the onMouseDown event
     * @method b4MouseDown
     * @param {Event} e the mousedown event
     * @private
     */
    </span><span class="hl-identifier">b4MouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {  }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Event handler that fires when a drag/drop obj gets a mousedown
     * @method onMouseDown
     * @param {Event} e the mousedown event
     */
    </span><span class="hl-builtin">onMouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Event handler that fires when a drag/drop obj gets a mouseup
     * @method onMouseUp
     * @param {Event} e the mouseup event
     */
    </span><span class="hl-builtin">onMouseUp</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { </span><span class="hl-comment">/* override this */ </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Override the onAvailable method to do what is needed after the initial
     * position was determined.
     * @method onAvailable
     */
    </span><span class="hl-identifier">onAvailable</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">() {
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a reference to the linked element
     * @method getEl
     * @return {HTMLElement} the html element
     */
    </span><span class="hl-identifier">getEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_domRef</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_domRef</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">get</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">_domRef</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns a reference to the actual element to drag.  By default this is
     * the same as the html element, but it can be assigned to another
     * element. An example of this can be found in YAHOO.util.DDProxy
     * @method getDragEl
     * @return {HTMLElement} the html element
     */
    </span><span class="hl-identifier">getDragEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">get</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragElId</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets up the DragDrop object.  Must be called in the constructor of any
     * YAHOO.util.DragDrop subclass
     * @method init
     * @param id the id of the linked element
     * @param {String} sGroup the group of related items
     * @param {object} config configuration attributes
     */
    </span><span class="hl-identifier">init</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">mousedown</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseDown</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">// Event.on(this.id, &quot;selectstart&quot;, Event.preventDefault);
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Initializes Targeting functionality only... the object does not
     * get a mousedown handler.
     * @method initTarget
     * @param id the id of the linked element
     * @param {String} sGroup the group of related items
     * @param {object} config configuration attributes
     */
    </span><span class="hl-identifier">initTarget</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {

        </span><span class="hl-comment">// configuration attributes
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code"> = </span><span class="hl-identifier">config</span><span class="hl-code"> || </span><span class="hl-brackets">{}</span><span class="hl-code">;

        </span><span class="hl-comment">// create a local reference to the drag and drop manager
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">;
        </span><span class="hl-comment">// initialize the groups array
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;

        </span><span class="hl-comment">// assume that we have an element reference instead of an id if the
        // parameter is not a string
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-code"> !== </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">id is not a string, assuming it is an HTMLElement</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-comment">// set the id
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;

        </span><span class="hl-comment">// add to an interaction group
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">addToGroup</span><span class="hl-brackets">((</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">sGroup</span><span class="hl-code"> : </span><span class="hl-quotes">&quot;</span><span class="hl-string">default</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// We don't want to register this as the handle with the manager
        // so we just set the id rather than calling the setter.
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleElId</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;

        </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">onAvailable</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleOnAvailable</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;


        </span><span class="hl-comment">// the linked element is the element that gets dragged by default
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDragElId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// by default, clicked anchors will not start drag operations.
        // @TODO what else should be here?  Probably form fields.
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleTypes</span><span class="hl-code"> = </span><span class="hl-brackets">{ </span><span class="hl-identifier">A</span><span class="hl-code">: </span><span class="hl-quotes">&quot;</span><span class="hl-string">A</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">}</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleIds</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">applyConfig</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Applies the configuration parameters that were passed into the constructor.
     * This is supposed to happen at each level through the inheritance chain.  So
     * a DDProxy implentation will execute apply config on DDProxy, DD, and
     * DragDrop in order to get all of the parameters that are available in
     * each object.
     * @method applyConfig
     */
    </span><span class="hl-identifier">applyConfig</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

        </span><span class="hl-comment">// configurable properties:
        //    padding, isTarget, maintainOffset, primaryButtonOnly
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-code">           = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-code"> || </span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTarget</span><span class="hl-code">          = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">isTarget</span><span class="hl-code"> !== </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maintainOffset</span><span class="hl-code">    = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">maintainOffset</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">primaryButtonOnly</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">primaryButtonOnly</span><span class="hl-code"> !== </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;

    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Executed when the linked element is available
     * @method handleOnAvailable
     * @private
     */
    </span><span class="hl-identifier">handleOnAvailable</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">available</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">resetConstraints</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">onAvailable</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

     </span><span class="hl-comment">/**
     * Configures the padding for the target zone in px.  Effectively expands
     * (or reduces) the virtual object size for targeting calculations.
     * Supports css-style shorthand; if only one parameter is passed, all sides
     * will have that padding, and if only two are passed, the top and bottom
     * will have the first param, the left and right the second.
     * @method setPadding
     * @param {int} iTop    Top pad
     * @param {int} iRight  Right pad
     * @param {int} iBot    Bot pad
     * @param {int} iLeft   Left pad
     */
    </span><span class="hl-identifier">setPadding</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iRight</span><span class="hl-code">, </span><span class="hl-identifier">iBot</span><span class="hl-code">, </span><span class="hl-identifier">iLeft</span><span class="hl-brackets">) {
        </span><span class="hl-comment">// this.padding = [iLeft, iRight, iTop, iBot];
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">iRight</span><span class="hl-code"> &amp;&amp; </span><span class="hl-number">0</span><span class="hl-code"> !== </span><span class="hl-identifier">iRight</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iTop</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">iBot</span><span class="hl-code"> &amp;&amp; </span><span class="hl-number">0</span><span class="hl-code"> !== </span><span class="hl-identifier">iBot</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iRight</span><span class="hl-code">, </span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iRight</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-identifier">iTop</span><span class="hl-code">, </span><span class="hl-identifier">iRight</span><span class="hl-code">, </span><span class="hl-identifier">iBot</span><span class="hl-code">, </span><span class="hl-identifier">iLeft</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Stores the initial placement of the linked element.
     * @method setInitialPosition
     * @param {int} diffX   the X offset, default 0
     * @param {int} diffY   the Y offset, default 0
     */
    </span><span class="hl-identifier">setInitPosition</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">diffX</span><span class="hl-code">, </span><span class="hl-identifier">diffY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">verifyEl</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">dx</span><span class="hl-code"> = </span><span class="hl-identifier">diffX</span><span class="hl-code"> || </span><span class="hl-number">0</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">dy</span><span class="hl-code"> = </span><span class="hl-identifier">diffY</span><span class="hl-code"> || </span><span class="hl-number">0</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getXY</span><span class="hl-brackets">( </span><span class="hl-identifier">el </span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code"> - </span><span class="hl-identifier">dx</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code"> - </span><span class="hl-identifier">dy</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageX</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageY</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;


        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setStartPosition</span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets the start position of the element.  This is set when the obj
     * is initialized, the reset when a drag is started.
     * @method setStartPosition
     * @param pos current position (from previous lookup)
     * @private
     */
    </span><span class="hl-identifier">setStartPosition</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">pos</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">pos</span><span class="hl-code"> || </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getXY</span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">() )</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaSetXY</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startPageX</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startPageY</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Add this instance to a group of related drag/drop objects.  All
     * instances belong to at least one group, and can belong to as many
     * groups as needed.
     * @method addToGroup
     * @param sGroup {string} the name of the group
     */
    </span><span class="hl-identifier">addToGroup</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">regDragDrop</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Remove's this instance from the supplied interaction group
     * @method removeFromGroup
     * @param {string}  sGroup  The group to drop
     */
    </span><span class="hl-identifier">removeFromGroup</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]) {
            </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">removeDDFromGroup</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Allows you to specify that an element other than the linked element
     * will be moved with the cursor during a drag
     * @method setDragElId
     * @param id {string} the id of the element that will be used to initiate the drag
     */
    </span><span class="hl-identifier">setDragElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragElId</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Allows you to specify a child of the linked element that should be
     * used to initiate the drag operation.  An example of this would be if
     * you have a content div with text and links.  Clicking anywhere in the
     * content area would normally start the drag operation.  Use this method
     * to specify that an element inside of the content div is the element
     * that starts the drag operation.
     * @method setHandleElId
     * @param id {string} the id of the element that will be used to
     * initiate the drag.
     */
    </span><span class="hl-identifier">setHandleElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-code"> !== </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">id is not a string, assuming it is an HTMLElement</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleElId</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">regHandle</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Allows you to set an element outside of the linked element as a drag
     * handle
     * @method setOuterHandleElId
     * @param id the id of the element that will be used to initiate the drag
     */
    </span><span class="hl-identifier">setOuterHandleElId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-code"> !== </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">id is not a string, assuming it is an HTMLElement</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">mousedown</span><span class="hl-quotes">&quot;</span><span class="hl-code">,
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseDown</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setHandleElId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasOuterHandles</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Remove all drag and drop hooks for this element
     * @method unreg
     */
    </span><span class="hl-identifier">unreg</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">removeListener</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">mousedown</span><span class="hl-quotes">&quot;</span><span class="hl-code">,
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseDown</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_domRef</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_remove</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Returns true if this instance is locked, or the drag drop mgr is locked
     * (meaning that all drag/drop is disabled on the page.)
     * @method isLocked
     * @return {boolean} true if this obj or all drag/drop is locked, else
     * false
     */
    </span><span class="hl-identifier">isLocked</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">isLocked</span><span class="hl-brackets">()</span><span class="hl-code"> || </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Fired when this object is clicked
     * @method handleMouseDown
     * @param {Event} e
     * @param {YAHOO.util.DragDrop} oDD the clicked dd object (this dd obj)
     * @private
     */
    </span><span class="hl-identifier">handleMouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">oDD</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">var </span><span class="hl-identifier">button</span><span class="hl-code"> = </span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">which</span><span class="hl-code"> || </span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">button</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">primaryButtonOnly</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">button</span><span class="hl-code"> &gt; </span><span class="hl-number">1</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isLocked</span><span class="hl-brackets">()) {
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">refreshCache</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">// var self = this;
        // setTimeout( function() { self.DDM.refreshCache(self.groups); }, 0);

        // Only process the event if we really clicked within the linked
        // element.  The reason we make this check is that in the case that
        // another element was moved between the clicked element and the
        // cursor in the time between the mousedown and mouseup events. When
        // this happens, the element gets the next mousedown event
        // regardless of where on the screen it happened.
        </span><span class="hl-reserved">var </span><span class="hl-identifier">pt</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Point</span><span class="hl-brackets">(</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">))</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">hasOuterHandles</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">isOverTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">pt</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">) )  {
        } </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickValidator</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)) {


                </span><span class="hl-comment">// set the initial element position
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setStartPosition</span><span class="hl-brackets">()</span><span class="hl-code">;


                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b4MouseDown</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-builtin">onMouseDown</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseDown</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">stopEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{


            }
        }
    }</span><span class="hl-code">,

    </span><span class="hl-identifier">clickValidator</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">target</span><span class="hl-code"> = </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">return </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isValidHandleChild</span><span class="hl-brackets">(</span><span class="hl-identifier">target</span><span class="hl-brackets">)</span><span class="hl-code"> &amp;&amp;
                    </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> == </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleElId</span><span class="hl-code"> ||
                        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">handleWasClicked</span><span class="hl-brackets">(</span><span class="hl-identifier">target</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)) )</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Allows you to specify a tag name that should not start a drag operation
     * when clicked.  This is designed to facilitate embedding links within a
     * drag handle that do something other than start the drag.
     * @method addInvalidHandleType
     * @param {string} tagName the type of element to exclude
     */
    </span><span class="hl-identifier">addInvalidHandleType</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">tagName</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">type</span><span class="hl-code"> = </span><span class="hl-identifier">tagName</span><span class="hl-code">.</span><span class="hl-identifier">toUpperCase</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleTypes</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">type</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Lets you to specify an element id for a child of a drag handle
     * that should not initiate a drag
     * @method addInvalidHandleId
     * @param {string} id the element id of the element you wish to ignore
     */
    </span><span class="hl-identifier">addInvalidHandleId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-code"> !== </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">id is not a string, assuming it is an HTMLElement</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">id</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Lets you specify a css class of elements that will not initiate a drag
     * @method addInvalidHandleClass
     * @param {string} cssClass the class of the elements you wish to ignore
     */
    </span><span class="hl-identifier">addInvalidHandleClass</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">cssClass</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">cssClass</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unsets an excluded tag name set by addInvalidHandleType
     * @method removeInvalidHandleType
     * @param {string} tagName the type of element to unexclude
     */
    </span><span class="hl-identifier">removeInvalidHandleType</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">tagName</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">type</span><span class="hl-code"> = </span><span class="hl-identifier">tagName</span><span class="hl-code">.</span><span class="hl-identifier">toUpperCase</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-comment">// this.invalidHandleTypes[type] = null;
        </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleTypes</span><span class="hl-brackets">[</span><span class="hl-identifier">type</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unsets an invalid handle id
     * @method removeInvalidHandleId
     * @param {string} id the id of the element to re-enable
     */
    </span><span class="hl-identifier">removeInvalidHandleId</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">typeof </span><span class="hl-identifier">id</span><span class="hl-code"> !== </span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">id is not a string, assuming it is an HTMLElement</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">generateId</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Unsets an invalid css class
     * @method removeInvalidHandleClass
     * @param {string} cssClass the class of the element(s) you wish to
     * re-enable
     */
    </span><span class="hl-identifier">removeInvalidHandleClass</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">cssClass</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> == </span><span class="hl-identifier">cssClass</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Checks the tag exclusion list to see if this click should be ignored
     * @method isValidHandleChild
     * @param {HTMLElement} node the HTMLElement to evaluate
     * @return {boolean} true if this is a valid tag type, false if not
     */
    </span><span class="hl-identifier">isValidHandleChild</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">var </span><span class="hl-identifier">valid</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-comment">// var n = (node.nodeName == &quot;#text&quot;) ? node.parentNode : node;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">nodeName</span><span class="hl-code">;
        </span><span class="hl-reserved">try </span><span class="hl-brackets">{
            </span><span class="hl-identifier">nodeName</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nodeName</span><span class="hl-code">.</span><span class="hl-identifier">toUpperCase</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">catch</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">nodeName</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">nodeName</span><span class="hl-code">;
        </span><span class="hl-brackets">}
        </span><span class="hl-identifier">valid</span><span class="hl-code"> = </span><span class="hl-identifier">valid</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleTypes</span><span class="hl-brackets">[</span><span class="hl-identifier">nodeName</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-identifier">valid</span><span class="hl-code"> = </span><span class="hl-identifier">valid</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">valid</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">valid</span><span class="hl-code"> = !</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">hasClass</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">invalidHandleClasses</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">])</span><span class="hl-code">;
        </span><span class="hl-brackets">}


        </span><span class="hl-reserved">return </span><span class="hl-identifier">valid</span><span class="hl-code">;

    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Create the array of horizontal tick marks if an interval was specified
     * in setXConstraint().
     * @method setXTicks
     * @private
     */
    </span><span class="hl-identifier">setXTicks</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iStartX</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTickSize</span><span class="hl-code"> = </span><span class="hl-identifier">iTickSize</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">tickMap</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &gt;= </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minX</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> - </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code">;
                </span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt;= </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxX</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> + </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code">;
                </span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-code">.</span><span class="hl-identifier">sort</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">numericSort</span><span class="hl-brackets">)</span><span class="hl-code"> ;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Create the array of vertical tick marks if an interval was specified in
     * setYConstraint().
     * @method setYTicks
     * @private
     */
    </span><span class="hl-identifier">setYTicks</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iStartY</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTickSize</span><span class="hl-code"> = </span><span class="hl-identifier">iTickSize</span><span class="hl-code">;

        </span><span class="hl-reserved">var </span><span class="hl-identifier">tickMap</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &gt;= </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minY</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> - </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code">;
                </span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> &lt;= </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxY</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> + </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-brackets">[</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code">;
                </span><span class="hl-identifier">tickMap</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-code">.</span><span class="hl-identifier">sort</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">numericSort</span><span class="hl-brackets">)</span><span class="hl-code"> ;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default, the element can be dragged any place on the screen.  Use
     * this method to limit the horizontal travel of the element.  Pass in
     * 0,0 for the parameters if you want to lock the drag to the y axis.
     * @method setXConstraint
     * @param {int} iLeft the number of pixels the element can move to the left
     * @param {int} iRight the number of pixels the element can move to the
     * right
     * @param {int} iTickSize optional parameter for specifying that the
     * element
     * should move iTickSize pixels at a time.
     */
    </span><span class="hl-identifier">setXConstraint</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iLeft</span><span class="hl-code">, </span><span class="hl-identifier">iRight</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">leftConstraint</span><span class="hl-code"> = </span><span class="hl-identifier">iLeft</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">rightConstraint</span><span class="hl-code"> = </span><span class="hl-identifier">iRight</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minX</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> - </span><span class="hl-identifier">iLeft</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxX</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> + </span><span class="hl-identifier">iRight</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setXTicks</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainX</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Clears any constraints applied to this instance.  Also clears ticks
     * since they can't exist independent of a constraint at this time.
     * @method clearConstraints
     */
    </span><span class="hl-identifier">clearConstraints</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainX</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainY</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clearTicks</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Clears any tick interval defined for this instance
     * @method clearTicks
     */
    </span><span class="hl-identifier">clearTicks</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTickSize</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTickSize</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default, the element can be dragged any place on the screen.  Set
     * this to limit the vertical travel of the element.  Pass in 0,0 for the
     * parameters if you want to lock the drag to the x axis.
     * @method setYConstraint
     * @param {int} iUp the number of pixels the element can move up
     * @param {int} iDown the number of pixels the element can move down
     * @param {int} iTickSize optional parameter for specifying that the
     * element should move iTickSize pixels at a time.
     */
    </span><span class="hl-identifier">setYConstraint</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iUp</span><span class="hl-code">, </span><span class="hl-identifier">iDown</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">topConstraint</span><span class="hl-code"> = </span><span class="hl-identifier">iUp</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">bottomConstraint</span><span class="hl-code"> = </span><span class="hl-identifier">iDown</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minY</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code"> - </span><span class="hl-identifier">iUp</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxY</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code"> + </span><span class="hl-identifier">iDown</span><span class="hl-code">;
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setYTicks</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code">, </span><span class="hl-identifier">iTickSize</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainY</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;

    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * resetConstraints must be called if you manually reposition a dd element.
     * @method resetConstraints
     * @param {boolean} maintainOffset
     */
    </span><span class="hl-identifier">resetConstraints</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {


        </span><span class="hl-comment">// Maintain offsets if necessary
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> || </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> === </span><span class="hl-number">0</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// figure out how much this thing has moved
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dx</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maintainOffset</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageX</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageX</span><span class="hl-code"> : </span><span class="hl-number">0</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dy</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maintainOffset</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageY</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initPageY</span><span class="hl-code"> : </span><span class="hl-number">0</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setInitPosition</span><span class="hl-brackets">(</span><span class="hl-identifier">dx</span><span class="hl-code">, </span><span class="hl-identifier">dy</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// This is the first time we have detected the element's position
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setInitPosition</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainX</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setXConstraint</span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">leftConstraint</span><span class="hl-code">,
                                 </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">rightConstraint</span><span class="hl-code">,
                                 </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTickSize        </span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainY</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setYConstraint</span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">topConstraint</span><span class="hl-code">,
                                 </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">bottomConstraint</span><span class="hl-code">,
                                 </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTickSize         </span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Normally the drag element is moved pixel by pixel, but we can specify
     * that it move a number of pixels at a time.  This method resolves the
     * location when we have it set up like this.
     * @method getTick
     * @param {int} val where we want to place the object
     * @param {int[]} tickArray sorted array of valid points
     * @return {int} the closest tick
     * @private
     */
    </span><span class="hl-identifier">getTick</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">val</span><span class="hl-code">, </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">tickArray</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// If tick interval is not defined, it is effectively 1 pixel,
            // so we return the value passed to us.
            </span><span class="hl-reserved">return </span><span class="hl-identifier">val</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code"> &gt;= </span><span class="hl-identifier">val</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// The value is lower than the first tick, so we return the first
            // tick.
            </span><span class="hl-reserved">return </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">tickArray</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">next</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> + </span><span class="hl-number">1</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">next</span><span class="hl-brackets">]</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">next</span><span class="hl-brackets">]</span><span class="hl-code"> &gt;= </span><span class="hl-identifier">val</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">diff1</span><span class="hl-code"> = </span><span class="hl-identifier">val</span><span class="hl-code"> - </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">diff2</span><span class="hl-code"> = </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">next</span><span class="hl-brackets">]</span><span class="hl-code"> - </span><span class="hl-identifier">val</span><span class="hl-code">;
                    </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">diff2</span><span class="hl-code"> &gt; </span><span class="hl-identifier">diff1</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> : </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">next</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }

            </span><span class="hl-comment">// The value is larger than the last tick, so we return the last
            // tick.
            </span><span class="hl-reserved">return </span><span class="hl-identifier">tickArray</span><span class="hl-brackets">[</span><span class="hl-identifier">tickArray</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * toString method
     * @method toString
     * @return {string} string representation of the dd obj
     */
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">DragDrop </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}

}</span><span class="hl-code">;

</span><span class="hl-brackets">})()</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * The drag and drop utility provides a framework for building drag and drop
 * applications.  In addition to enabling drag and drop for specific elements,
 * the drag and drop elements are tracked by the manager class, and the
 * interactions between the various elements are tracked during the drag and
 * the implementing code is notified about these important moments.
 * @module dragdrop
 * @title Drag and Drop
 * @requires yahoo,dom,event
 * @namespace YAHOO.util
 */

// Only load the library once.  Rewriting the manager class would orphan
// existing drag and drop instances.
</span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDropMgr</span><span class="hl-brackets">) {

</span><span class="hl-comment">/**
 * DragDropMgr is a singleton that tracks the element interaction for
 * all DragDrop items in the window.  Generally, you will not call
 * this class directly, but it does have helper methods that could
 * be useful in your DragDrop implementations.
 * @class DragDropMgr
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDropMgr</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

    </span><span class="hl-reserved">var </span><span class="hl-identifier">Event</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">;

    </span><span class="hl-reserved">return </span><span class="hl-brackets">{

        </span><span class="hl-comment">/**
         * Two dimensional Array of registered DragDrop objects.  The first
         * dimension is the DragDrop item group, the second the DragDrop
         * object.
         * @property ids
         * @type {string: string}
         * @private
         * @static
         */
        </span><span class="hl-identifier">ids</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Array of element ids defined as drag handles.  Used to determine
         * if the element that generated the mousedown event is actually the
         * handle and not the html element itself.
         * @property handleIds
         * @type {string: string}
         * @private
         * @static
         */
        </span><span class="hl-identifier">handleIds</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * the DragDrop object that is currently being dragged
         * @property dragCurrent
         * @type DragDrop
         * @private
         * @static
         **/
        </span><span class="hl-identifier">dragCurrent</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * the DragDrop object(s) that are being hovered over
         * @property dragOvers
         * @type Array
         * @private
         * @static
         */
        </span><span class="hl-identifier">dragOvers</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * the X distance between the cursor and the object being dragged
         * @property deltaX
         * @type int
         * @private
         * @static
         */
        </span><span class="hl-identifier">deltaX</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * the Y distance between the cursor and the object being dragged
         * @property deltaY
         * @type int
         * @private
         * @static
         */
        </span><span class="hl-identifier">deltaY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Flag to determine if we should prevent the default behavior of the
         * events we define. By default this is true, but this can be set to
         * false if you need the default behavior (not recommended)
         * @property preventDefault
         * @type boolean
         * @static
         */
        </span><span class="hl-identifier">preventDefault</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Flag to determine if we should stop the propagation of the events
         * we generate. This is true by default but you may want to set it to
         * false if the html element contains other features that require the
         * mouse click.
         * @property stopPropagation
         * @type boolean
         * @static
         */
        </span><span class="hl-identifier">stopPropagation</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Internal flag that is set to true when drag and drop has been
         * intialized
         * @property initialized
         * @private
         * @static
         */
        </span><span class="hl-identifier">initalized</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * All drag and drop can be disabled.
         * @property locked
         * @private
         * @static
         */
        </span><span class="hl-identifier">locked</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Called the first time an element is registered.
         * @method init
         * @private
         * @static
         */
        </span><span class="hl-identifier">init</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initialized</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * In point mode, drag and drop interaction is defined by the
         * location of the cursor during the drag/drop
         * @property POINT
         * @type int
         * @static
         */
        </span><span class="hl-identifier">POINT</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * In intersect mode, drag and drop interactio nis defined by the
         * overlap of two or more drag and drop objects.
         * @property INTERSECT
         * @type int
         * @static
         */
        </span><span class="hl-identifier">INTERSECT</span><span class="hl-code">: </span><span class="hl-number">1</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * The current drag and drop mode.  Default: POINT
         * @property mode
         * @type int
         * @static
         */
        </span><span class="hl-identifier">mode</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Runs method on all drag and drop objects
         * @method _execOnAll
         * @private
         * @static
         */
        </span><span class="hl-identifier">_execOnAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">sMethod</span><span class="hl-code">, </span><span class="hl-identifier">args</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">j </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">oDD</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">][</span><span class="hl-identifier">j</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">)) {
                        </span><span class="hl-reserved">continue</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-identifier">oDD</span><span class="hl-brackets">[</span><span class="hl-identifier">sMethod</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">apply</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-identifier">args</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Drag and drop initialization.  Sets up the global event handlers
         * @method _onLoad
         * @private
         * @static
         */
        </span><span class="hl-identifier">_onLoad</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">()</span><span class="hl-code">;


            </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">mouseup</span><span class="hl-quotes">&quot;</span><span class="hl-code">,   </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseUp</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">mousemove</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseMove</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">,   </span><span class="hl-quotes">&quot;</span><span class="hl-string">unload</span><span class="hl-quotes">&quot;</span><span class="hl-code">,    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_onUnload</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-builtin">window</span><span class="hl-code">,   </span><span class="hl-quotes">&quot;</span><span class="hl-string">resize</span><span class="hl-quotes">&quot;</span><span class="hl-code">,    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_onResize</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-comment">// Event.on(window,   &quot;mouseout&quot;,    this._test);

        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Reset constraints on all drag and drop objs
         * @method _onResize
         * @private
         * @static
         */
        </span><span class="hl-identifier">_onResize</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_execOnAll</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">resetConstraints</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">[])</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Lock all drag and drop functionality
         * @method lock
         * @static
         */
        </span><span class="hl-identifier">lock</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Unlock all drag and drop functionality
         * @method unlock
         * @static
         */
        </span><span class="hl-identifier">unlock</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Is drag and drop locked?
         * @method isLocked
         * @return {boolean} True if drag and drop is locked, false otherwise.
         * @static
         */
        </span><span class="hl-identifier">isLocked</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">locked</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Location cache that is set for all drag drop objects when a drag is
         * initiated, cleared when the drag is finished.
         * @property locationCache
         * @private
         * @static
         */
        </span><span class="hl-identifier">locationCache</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Set useCache to false if you want to force object the lookup of each
         * drag and drop linked element constantly during a drag.
         * @property useCache
         * @type boolean
         * @static
         */
        </span><span class="hl-identifier">useCache</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * The number of pixels that the mouse needs to move after the
         * mousedown before the drag is initiated.  Default=3;
         * @property clickPixelThresh
         * @type int
         * @static
         */
        </span><span class="hl-identifier">clickPixelThresh</span><span class="hl-code">: </span><span class="hl-number">3</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * The number of milliseconds after the mousedown event to initiate the
         * drag if we don't get a mouseup event. Default=1000
         * @property clickTimeThresh
         * @type int
         * @static
         */
        </span><span class="hl-identifier">clickTimeThresh</span><span class="hl-code">: </span><span class="hl-number">1000</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Flag that indicates that either the drag pixel threshold or the
         * mousdown time threshold has been met
         * @property dragThreshMet
         * @type boolean
         * @private
         * @static
         */
        </span><span class="hl-identifier">dragThreshMet</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Timeout used for the click time threshold
         * @property clickTimeout
         * @type Object
         * @private
         * @static
         */
        </span><span class="hl-identifier">clickTimeout</span><span class="hl-code">: </span><span class="hl-reserved">null</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * The X position of the mousedown event stored for later use when a
         * drag threshold is met.
         * @property startX
         * @type int
         * @private
         * @static
         */
        </span><span class="hl-identifier">startX</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * The Y position of the mousedown event stored for later use when a
         * drag threshold is met.
         * @property startY
         * @type int
         * @private
         * @static
         */
        </span><span class="hl-identifier">startY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Each DragDrop instance must be registered with the DragDropMgr.
         * This is executed in DragDrop.init()
         * @method regDragDrop
         * @param {DragDrop} oDD the DragDrop object to register
         * @param {String} sGroup the name of the group this element belongs to
         * @static
         */
        </span><span class="hl-identifier">regDragDrop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initialized</span><span class="hl-brackets">) { </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">}

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">][</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">oDD</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Removes the supplied dd instance from the supplied group. Executed
         * by DragDrop.removeFromGroup, so don't call this function directly.
         * @method removeDDFromGroup
         * @private
         * @static
         */
        </span><span class="hl-identifier">removeDDFromGroup</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">var </span><span class="hl-identifier">obj</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">obj</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">obj</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">delete </span><span class="hl-identifier">obj</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Unregisters a drag and drop item.  This is executed in
         * DragDrop.unreg, use that method instead of calling this directly.
         * @method _remove
         * @private
         * @static
         */
        </span><span class="hl-identifier">_remove</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">g </span><span class="hl-reserved">in </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">g</span><span class="hl-code"> &amp;&amp; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">g</span><span class="hl-brackets">][</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">g</span><span class="hl-brackets">][</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
            </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Each DragDrop handle element must be registered.  This is done
         * automatically when executing DragDrop.setHandleElId()
         * @method regHandle
         * @param {String} sDDId the DragDrop id this element is a handle for
         * @param {String} sHandleId the id of the element that is the drag
         * handle
         * @static
         */
        </span><span class="hl-identifier">regHandle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">sDDId</span><span class="hl-code">, </span><span class="hl-identifier">sHandleId</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">sDDId</span><span class="hl-brackets">]) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">sDDId</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">sDDId</span><span class="hl-brackets">][</span><span class="hl-identifier">sHandleId</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">sHandleId</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Utility function to determine if a given element has been
         * registered as a drag drop item.
         * @method isDragDrop
         * @param {String} id the element id to check
         * @return {boolean} true if this element is a DragDrop item,
         * false otherwise
         * @static
         */
        </span><span class="hl-identifier">isDragDrop</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDDById</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) )</span><span class="hl-code"> ? </span><span class="hl-reserved">true</span><span class="hl-code"> : </span><span class="hl-reserved">false</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the drag and drop instances that are in all groups the
         * passed in instance belongs to.
         * @method getRelated
         * @param {DragDrop} p_oDD the obj to get related data for
         * @param {boolean} bTargetsOnly if true, only return targetable objs
         * @return {DragDrop[]} the related instances
         * @static
         */
        </span><span class="hl-identifier">getRelated</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">p_oDD</span><span class="hl-code">, </span><span class="hl-identifier">bTargetsOnly</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">oDDs</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in </span><span class="hl-identifier">p_oDD</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">j </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">dd</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">][</span><span class="hl-identifier">j</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">dd</span><span class="hl-brackets">)) {
                        </span><span class="hl-reserved">continue</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">bTargetsOnly</span><span class="hl-code"> || </span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">isTarget</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">oDDs</span><span class="hl-brackets">[</span><span class="hl-identifier">oDDs</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">dd</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
            }

            </span><span class="hl-reserved">return </span><span class="hl-identifier">oDDs</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns true if the specified dd target is a legal target for
         * the specifice drag obj
         * @method isLegalTarget
         * @param {DragDrop} the drag obj
         * @param {DragDrop} the target
         * @return {boolean} true if the target is a legal target for the
         * dd obj
         * @static
         */
        </span><span class="hl-identifier">isLegalTarget</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-identifier">oTargetDD</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">targets</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getRelated</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">targets</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;</span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">;++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">targets</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> == </span><span class="hl-identifier">oTargetDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">return true</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }

            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * My goal is to be able to transparently determine if an object is
         * typeof DragDrop, and the exact subclass of DragDrop.  typeof
         * returns &quot;object&quot;, oDD.constructor.toString() always returns
         * &quot;DragDrop&quot; and not the name of the subclass.  So for now it just
         * evaluates a well-known variable in DragDrop.
         * @method isTypeOfDD
         * @param {Object} the object to evaluate
         * @return {boolean} true if typeof oDD = DragDrop
         * @static
         */
        </span><span class="hl-identifier">isTypeOfDD</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">__ygDragDrop</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Utility function to determine if a given element has been
         * registered as a drag drop handle for the given Drag Drop object.
         * @method isHandle
         * @param {String} id the element id to check
         * @return {boolean} true if this element is a DragDrop handle, false
         * otherwise
         * @static
         */
        </span><span class="hl-identifier">isHandle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">sDDId</span><span class="hl-code">, </span><span class="hl-identifier">sHandleId</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-brackets">( </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">sDDId</span><span class="hl-brackets">]</span><span class="hl-code"> &amp;&amp;
                            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">handleIds</span><span class="hl-brackets">[</span><span class="hl-identifier">sDDId</span><span class="hl-brackets">][</span><span class="hl-identifier">sHandleId</span><span class="hl-brackets">] )</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the DragDrop instance for a given id
         * @method getDDById
         * @param {String} id the id of the DragDrop object
         * @return {DragDrop} the drag drop object, null if it is not found
         * @static
         */
        </span><span class="hl-identifier">getDDById</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">][</span><span class="hl-identifier">id</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">][</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
            </span><span class="hl-reserved">return null</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Fired after a registered DragDrop object gets the mousedown event.
         * Sets up the events required to track the object being dragged
         * @method handleMouseDown
         * @param {Event} e the event
         * @param oDD the DragDrop object being dragged
         * @private
         * @static
         */
        </span><span class="hl-identifier">handleMouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">oDD</span><span class="hl-brackets">) {

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">currentTarget</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code"> = </span><span class="hl-identifier">oDD</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-comment">// track start position
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startX</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startY</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaX</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startX</span><span class="hl-code"> - </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetLeft</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaY</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startY</span><span class="hl-code"> - </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetTop</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-code"> = </span><span class="hl-reserved">false</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickTimeout</span><span class="hl-code"> = </span><span class="hl-identifier">setTimeout</span><span class="hl-brackets">(
                    </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">DDM</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">;
                        </span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">startDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">startX</span><span class="hl-code">, </span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">startY</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-brackets">}</span><span class="hl-code">,
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickTimeThresh </span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Fired when either the drag pixel threshol or the mousedown hold
         * time threshold has been met.
         * @method startDrag
         * @param x {int} the X position of the original mousedown
         * @param y {int} the Y position of the original mousedown
         * @static
         */
        </span><span class="hl-identifier">startDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">clearTimeout</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickTimeout</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">b4StartDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">startDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Internal function to handle the mouseup event.  Will be invoked
         * from the context of the document.
         * @method handleMouseUp
         * @param {Event} e the event
         * @private
         * @static
         */
        </span><span class="hl-identifier">handleMouseUp</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-identifier">clearTimeout</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickTimeout</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvents</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-reserved">true</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            }

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Utility to stop event propagation and event default, if these
         * features are turned on.
         * @method stopEvent
         * @param {Event} e the event as returned by this.getEvent()
         * @static
         */
        </span><span class="hl-identifier">stopEvent</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopPropagation</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">stopPropagation</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">preventDefault</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">preventDefault</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Internal function to clean up event handlers after the drag
         * operation is complete
         * @method stopDrag
         * @param {Event} e the event
         * @private
         * @static
         */
        </span><span class="hl-identifier">stopDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {

            </span><span class="hl-comment">// Fire the drag end event for the item that was dragged
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">b4EndDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">endDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-builtin">onMouseUp</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragOvers</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Internal function to handle the mousemove event.  Will be invoked
         * from the context of the html element.
         *
         * @TODO figure out what we can do about mouse events lost when the
         * user drags objects beyond the window boundary.  Currently we can
         * detect this in internet explorer by verifying that the mouse is
         * down during the mousemove event.  Firefox doesn't give us the
         * button state on the mousemove event.
         * @method handleMouseMove
         * @param {Event} e the event
         * @private
         * @static
         */
        </span><span class="hl-identifier">handleMouseMove</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return true</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-comment">// var button = e.which || e.button;

            // check for IE mouseup outside of page boundary
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">isIE</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">button</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">handleMouseUp</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">var </span><span class="hl-identifier">diffX</span><span class="hl-code"> = </span><span class="hl-builtin">Math</span><span class="hl-code">.</span><span class="hl-identifier">abs</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startX</span><span class="hl-code"> - </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">))</span><span class="hl-code">;
                </span><span class="hl-reserved">var </span><span class="hl-identifier">diffY</span><span class="hl-code"> = </span><span class="hl-builtin">Math</span><span class="hl-code">.</span><span class="hl-identifier">abs</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startY</span><span class="hl-code"> - </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">))</span><span class="hl-code">;
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">diffX</span><span class="hl-code"> &gt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickPixelThresh</span><span class="hl-code"> ||
                            </span><span class="hl-identifier">diffY</span><span class="hl-code"> &gt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">clickPixelThresh</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startDrag</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startX</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startY</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragThreshMet</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">b4Drag</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">.</span><span class="hl-identifier">onDrag</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fireEvents</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopEvent</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">return true</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Iterates over all of the DragDrop elements to find ones we are
         * hovering over or dropping on
         * @method fireEvents
         * @param {Event} e the event
         * @param {boolean} isDrop is this a drop op or a mouseover op?
         * @private
         * @static
         */
        </span><span class="hl-identifier">fireEvents</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">isDrop</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dc</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">;

            </span><span class="hl-comment">// If the user did the mouse up outside of the window, we could
            // get here even though we have ended the drag.
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">dc</span><span class="hl-code"> || </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">isLocked</span><span class="hl-brackets">()) {
                </span><span class="hl-reserved">return</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">var </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">pt</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Point</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">,</span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-comment">// cache the previous dragOver array
            </span><span class="hl-reserved">var </span><span class="hl-identifier">oldOvers</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">outEvts</span><span class="hl-code">   = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">overEvts</span><span class="hl-code">  = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dropEvts</span><span class="hl-code">  = </span><span class="hl-brackets">[]</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">enterEvts</span><span class="hl-code"> = </span><span class="hl-brackets">[]</span><span class="hl-code">;

            </span><span class="hl-comment">// Check to see if the object(s) we were hovering over is no longer
            // being hovered over so we can fire the onDragOut event
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">dragOvers</span><span class="hl-brackets">) {

                </span><span class="hl-reserved">var </span><span class="hl-identifier">ddo</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragOvers</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">ddo</span><span class="hl-brackets">)) {
                    </span><span class="hl-reserved">continue</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isOverTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">pt</span><span class="hl-code">, </span><span class="hl-identifier">ddo</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">mode</span><span class="hl-brackets">)) {
                    </span><span class="hl-identifier">outEvts</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( </span><span class="hl-identifier">ddo </span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-identifier">oldOvers</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
                </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">dragOvers</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">sGroup </span><span class="hl-reserved">in </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">groups</span><span class="hl-brackets">) {

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-code"> != </span><span class="hl-reserved">typeof </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">continue</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">oDD</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">][</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">)) {
                        </span><span class="hl-reserved">continue</span><span class="hl-code">;
                    </span><span class="hl-brackets">}

                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">isTarget</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">isLocked</span><span class="hl-brackets">()</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">oDD</span><span class="hl-code"> != </span><span class="hl-identifier">dc</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isOverTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">pt</span><span class="hl-code">, </span><span class="hl-identifier">oDD</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">mode</span><span class="hl-brackets">)) {
                            </span><span class="hl-comment">// look for drop interactions
                            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isDrop</span><span class="hl-brackets">) {
                                </span><span class="hl-identifier">dropEvts</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( </span><span class="hl-identifier">oDD </span><span class="hl-brackets">)</span><span class="hl-code">;
                            </span><span class="hl-comment">// look for drag enter and drag over interactions
                            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{

                                </span><span class="hl-comment">// initial drag over: dragEnter fires
                                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">oldOvers</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]) {
                                    </span><span class="hl-identifier">enterEvts</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( </span><span class="hl-identifier">oDD </span><span class="hl-brackets">)</span><span class="hl-code">;
                                </span><span class="hl-comment">// subsequent drag overs: dragOver fires
                                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                                    </span><span class="hl-identifier">overEvts</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">( </span><span class="hl-identifier">oDD </span><span class="hl-brackets">)</span><span class="hl-code">;
                                </span><span class="hl-brackets">}

                                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragOvers</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">oDD</span><span class="hl-code">;
                            </span><span class="hl-brackets">}
                        }
                    }
                }
            }

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">mode</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">outEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragOut</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">outEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragOut</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">outEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">enterEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragEnter</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">enterEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">overEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragOver</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">overEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragOver</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">overEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">dropEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragDrop</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">dropEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-builtin">onDragDrop</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">dropEvts</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

            } </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-comment">// fire dragout events
                </span><span class="hl-reserved">var </span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">outEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragOut</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">outEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragOut</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">outEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// fire enter events
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">enterEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-comment">// dc.b4DragEnter(e, oDD.id);
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragEnter</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">enterEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// fire over events
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">overEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragOver</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">overEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onDragOver</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">overEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

                </span><span class="hl-comment">// fire drop events
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code">=</span><span class="hl-identifier">dropEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">b4DragDrop</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">dropEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-builtin">onDragDrop</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">dropEvts</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}

            }

            </span><span class="hl-comment">// notify about a drop that did not find a target
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isDrop</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">dropEvts</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">onInvalidDrop</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Helper function for getting the best match from the list of drag
         * and drop objects returned by the drag and drop events when we are
         * in INTERSECT mode.  It returns either the first object that the
         * cursor is over, or the object that has the greatest overlap with
         * the dragged element.
         * @method getBestMatch
         * @param  {DragDrop[]} dds The array of drag and drop objects
         * targeted
         * @return {DragDrop}       The best single match
         * @static
         */
        </span><span class="hl-identifier">getBestMatch</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">dds</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">winner</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
            </span><span class="hl-comment">// Return null if the input is not what we expect
            //if (!dds || !dds.length || dds.length == 0) {
               // winner = null;
            // If there is only one item, it wins
            //} else if (dds.length == 1) {

            </span><span class="hl-reserved">var </span><span class="hl-identifier">len</span><span class="hl-code"> = </span><span class="hl-identifier">dds</span><span class="hl-code">.</span><span class="hl-identifier">length</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">len</span><span class="hl-code"> == </span><span class="hl-number">1</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">winner</span><span class="hl-code"> = </span><span class="hl-identifier">dds</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-comment">// Loop through the targeted items
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i</span><span class="hl-code">=</span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-identifier">i</span><span class="hl-code">&lt;</span><span class="hl-identifier">len</span><span class="hl-code">; ++</span><span class="hl-identifier">i</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">dd</span><span class="hl-code"> = </span><span class="hl-identifier">dds</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
                    </span><span class="hl-comment">// If the cursor is over the object, it wins.  If the
                    // cursor is over multiple matches, the first one we come
                    // to wins.
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">cursorIsOver</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">winner</span><span class="hl-code"> = </span><span class="hl-identifier">dd</span><span class="hl-code">;
                        </span><span class="hl-reserved">break</span><span class="hl-code">;
                    </span><span class="hl-comment">// Otherwise the object with the most overlap wins
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">winner</span><span class="hl-code"> ||
                            </span><span class="hl-identifier">winner</span><span class="hl-code">.</span><span class="hl-identifier">overlap</span><span class="hl-code">.</span><span class="hl-identifier">getArea</span><span class="hl-brackets">()</span><span class="hl-code"> &lt; </span><span class="hl-identifier">dd</span><span class="hl-code">.</span><span class="hl-identifier">overlap</span><span class="hl-code">.</span><span class="hl-identifier">getArea</span><span class="hl-brackets">()) {
                            </span><span class="hl-identifier">winner</span><span class="hl-code"> = </span><span class="hl-identifier">dd</span><span class="hl-code">;
                        </span><span class="hl-brackets">}
                    }
                }
            }

            </span><span class="hl-reserved">return </span><span class="hl-identifier">winner</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Refreshes the cache of the top-left and bottom-right points of the
         * drag and drop objects in the specified group(s).  This is in the
         * format that is stored in the drag and drop instance, so typical
         * usage is:
         * &lt;code&gt;
         * YAHOO.util.DragDropMgr.refreshCache(ddinstance.groups);
         * &lt;/code&gt;
         * Alternatively:
         * &lt;code&gt;
         * YAHOO.util.DragDropMgr.refreshCache({group1:true, group2:true});
         * &lt;/code&gt;
         * @TODO this really should be an indexed array.  Alternatively this
         * method could accept both.
         * @method refreshCache
         * @param {Object} groups an associative array of groups to refresh
         * @static
         */
        </span><span class="hl-identifier">refreshCache</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">groups</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">sGroup </span><span class="hl-reserved">in </span><span class="hl-identifier">groups</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">string</span><span class="hl-quotes">&quot;</span><span class="hl-code"> != </span><span class="hl-reserved">typeof </span><span class="hl-identifier">sGroup</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">continue</span><span class="hl-code">;
                </span><span class="hl-brackets">}
                </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-reserved">var </span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">]) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">oDD</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-brackets">[</span><span class="hl-identifier">sGroup</span><span class="hl-brackets">][</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;

                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">)) {
                    </span><span class="hl-comment">// if (this.isTypeOfDD(oDD) &amp;&amp; oDD.isTarget) {
                        </span><span class="hl-reserved">var </span><span class="hl-identifier">loc</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getLocation</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">)</span><span class="hl-code">;
                        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">loc</span><span class="hl-brackets">) {
                            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locationCache</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">loc</span><span class="hl-code">;
                        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                            </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">locationCache</span><span class="hl-brackets">[</span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
                            </span><span class="hl-comment">// this will unregister the drag and drop object if
                            // the element is not in a usable state
                            // oDD.unreg();
                        </span><span class="hl-brackets">}
                    }
                }
            }
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * This checks to make sure an element exists and is in the DOM.  The
         * main purpose is to handle cases where innerHTML is used to remove
         * drag and drop objects from the DOM.  IE provides an 'unspecified
         * error' when trying to access the offsetParent of such an element
         * @method verifyEl
         * @param {HTMLElement} el the element to check
         * @return {boolean} true if the element looks usable
         * @static
         */
        </span><span class="hl-identifier">verifyEl</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">try </span><span class="hl-brackets">{
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">var </span><span class="hl-identifier">parent</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetParent</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">parent</span><span class="hl-brackets">) {
                        </span><span class="hl-reserved">return true</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
            } </span><span class="hl-reserved">catch</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
            }

            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns a Region object containing the drag and drop element's position
         * and size, including the padding configured for it
         * @method getLocation
         * @param {DragDrop} oDD the drag and drop object to get the
         *                       location for
         * @return {YAHOO.util.Region} a Region object representing the total area
         *                             the element occupies, including any padding
         *                             the instance is configured for.
         * @static
         */
        </span><span class="hl-identifier">getLocation</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">! </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isTypeOfDD</span><span class="hl-brackets">(</span><span class="hl-identifier">oDD</span><span class="hl-brackets">)) {
                </span><span class="hl-reserved">return null</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">, </span><span class="hl-identifier">pos</span><span class="hl-code">, </span><span class="hl-identifier">x1</span><span class="hl-code">, </span><span class="hl-identifier">x2</span><span class="hl-code">, </span><span class="hl-identifier">y1</span><span class="hl-code">, </span><span class="hl-identifier">y2</span><span class="hl-code">, </span><span class="hl-identifier">t</span><span class="hl-code">, </span><span class="hl-identifier">r</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-code">;

            </span><span class="hl-reserved">try </span><span class="hl-brackets">{
                </span><span class="hl-identifier">pos</span><span class="hl-code">= </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getXY</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">catch </span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) { }

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">pos</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return null</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-identifier">x1</span><span class="hl-code"> = </span><span class="hl-identifier">pos</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">x2</span><span class="hl-code"> = </span><span class="hl-identifier">x1</span><span class="hl-code"> + </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetWidth</span><span class="hl-code">;
            </span><span class="hl-identifier">y1</span><span class="hl-code"> = </span><span class="hl-identifier">pos</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">y2</span><span class="hl-code"> = </span><span class="hl-identifier">y1</span><span class="hl-code"> + </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetHeight</span><span class="hl-code">;

            </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">y1</span><span class="hl-code"> - </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">r</span><span class="hl-code"> = </span><span class="hl-identifier">x2</span><span class="hl-code"> + </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-identifier">y2</span><span class="hl-code"> + </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-brackets">[</span><span class="hl-number">2</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">x1</span><span class="hl-code"> - </span><span class="hl-identifier">oDD</span><span class="hl-code">.</span><span class="hl-identifier">padding</span><span class="hl-brackets">[</span><span class="hl-number">3</span><span class="hl-brackets">]</span><span class="hl-code">;

            </span><span class="hl-reserved">return new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Region</span><span class="hl-brackets">( </span><span class="hl-identifier">t</span><span class="hl-code">, </span><span class="hl-identifier">r</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">l </span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Checks the cursor location to see if it over the target
         * @method isOverTarget
         * @param {YAHOO.util.Point} pt The point to evaluate
         * @param {DragDrop} oTarget the DragDrop object we are inspecting
         * @return {boolean} true if the mouse is over the target
         * @private
         * @static
         */
        </span><span class="hl-identifier">isOverTarget</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">pt</span><span class="hl-code">, </span><span class="hl-identifier">oTarget</span><span class="hl-code">, </span><span class="hl-identifier">intersect</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// use cache if available
            </span><span class="hl-reserved">var </span><span class="hl-identifier">loc</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locationCache</span><span class="hl-brackets">[</span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">loc</span><span class="hl-code"> || !</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">useCache</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">loc</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getLocation</span><span class="hl-brackets">(</span><span class="hl-identifier">oTarget</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">locationCache</span><span class="hl-brackets">[</span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-identifier">loc</span><span class="hl-code">;

            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">loc</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">return false</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">cursorIsOver</span><span class="hl-code"> = </span><span class="hl-identifier">loc</span><span class="hl-code">.</span><span class="hl-identifier">contains</span><span class="hl-brackets">( </span><span class="hl-identifier">pt </span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-comment">// DragDrop is using this as a sanity check for the initial mousedown
            // in this case we are done.  In POINT mode, if the drag obj has no
            // contraints, we are also done. Otherwise we need to evaluate the
            // location of the target as related to the actual location of the
            // dragged element.
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dc</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">dc</span><span class="hl-code"> || !</span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">getTargetCoord</span><span class="hl-code"> ||
                    </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">intersect</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">constrainX</span><span class="hl-code"> &amp;&amp; !</span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">constrainY</span><span class="hl-brackets">)) {
                </span><span class="hl-reserved">return </span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">cursorIsOver</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">overlap</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;

            </span><span class="hl-comment">// Get the current location of the drag element, this is the
            // location of the mouse event less the delta that represents
            // where the original mousedown happened on the element.  We
            // need to consider constraints and ticks as well.
            </span><span class="hl-reserved">var </span><span class="hl-identifier">pos</span><span class="hl-code"> = </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">getTargetCoord</span><span class="hl-brackets">(</span><span class="hl-identifier">pt</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">pt</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">dc</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">curRegion</span><span class="hl-code"> = </span><span class="hl-reserved">new </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Region</span><span class="hl-brackets">( </span><span class="hl-identifier">pos</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-code">,
                                                   </span><span class="hl-identifier">pos</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code"> + </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetWidth</span><span class="hl-code">,
                                                   </span><span class="hl-identifier">pos</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-code"> + </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetHeight</span><span class="hl-code">,
                                                   </span><span class="hl-identifier">pos</span><span class="hl-code">.</span><span class="hl-identifier">x </span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">overlap</span><span class="hl-code"> = </span><span class="hl-identifier">curRegion</span><span class="hl-code">.</span><span class="hl-identifier">intersect</span><span class="hl-brackets">(</span><span class="hl-identifier">loc</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">overlap</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">overlap</span><span class="hl-code"> = </span><span class="hl-identifier">overlap</span><span class="hl-code">;
                </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">intersect</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-reserved">true</span><span class="hl-code"> : </span><span class="hl-identifier">oTarget</span><span class="hl-code">.</span><span class="hl-identifier">cursorIsOver</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-reserved">return false</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * unload event handler
         * @method _onUnload
         * @private
         * @static
         */
        </span><span class="hl-identifier">_onUnload</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">me</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">unregAll</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Cleans up the drag and drop events and objects.
         * @method unregAll
         * @private
         * @static
         */
        </span><span class="hl-identifier">unregAll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">stopDrag</span><span class="hl-brackets">()</span><span class="hl-code">;
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragCurrent</span><span class="hl-code"> = </span><span class="hl-reserved">null</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_execOnAll</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">unreg</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">[])</span><span class="hl-code">;

            </span><span class="hl-reserved">for </span><span class="hl-brackets">(</span><span class="hl-identifier">i </span><span class="hl-reserved">in this</span><span class="hl-code">.</span><span class="hl-identifier">elementCache</span><span class="hl-brackets">) {
                </span><span class="hl-reserved">delete this</span><span class="hl-code">.</span><span class="hl-identifier">elementCache</span><span class="hl-brackets">[</span><span class="hl-identifier">i</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">elementCache</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">ids</span><span class="hl-code"> = </span><span class="hl-brackets">{}</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * A cache of DOM elements
         * @property elementCache
         * @private
         * @static
         */
        </span><span class="hl-identifier">elementCache</span><span class="hl-code">: </span><span class="hl-brackets">{}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Get the wrapper for the DOM element specified
         * @method getElWrapper
         * @param {String} id the id of the element to get
         * @return {YAHOO.util.DDM.ElementWrapper} the wrapped element
         * @private
         * @deprecated This wrapper isn't that useful
         * @static
         */
        </span><span class="hl-identifier">getElWrapper</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">oWrapper</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">elementCache</span><span class="hl-brackets">[</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">oWrapper</span><span class="hl-code"> || !</span><span class="hl-identifier">oWrapper</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">oWrapper</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">elementCache</span><span class="hl-brackets">[</span><span class="hl-identifier">id</span><span class="hl-brackets">]</span><span class="hl-code"> =
                    </span><span class="hl-reserved">new this</span><span class="hl-code">.</span><span class="hl-identifier">ElementWrapper</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">get</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">))</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">return </span><span class="hl-identifier">oWrapper</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the actual DOM element
         * @method getElement
         * @param {String} id the id of the elment to get
         * @return {Object} The element
         * @deprecated use YAHOO.util.Dom.get instead
         * @static
         */
        </span><span class="hl-identifier">getElement</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">get</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the style property for the DOM element (i.e.,
         * document.getElById(id).style)
         * @method getCss
         * @param {String} id the id of the elment to get
         * @return {Object} The style property of the element
         * @deprecated use YAHOO.util.Dom instead
         * @static
         */
        </span><span class="hl-identifier">getCss</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">get</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code"> : </span><span class="hl-reserved">null</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Inner class for cached elements
         * @class DragDropMgr.ElementWrapper
         * @for DragDropMgr
         * @private
         * @deprecated
         */
        </span><span class="hl-identifier">ElementWrapper</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
                </span><span class="hl-comment">/**
                 * The element
                 * @property el
                 */
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-identifier">el</span><span class="hl-code"> || </span><span class="hl-reserved">null</span><span class="hl-code">;
                </span><span class="hl-comment">/**
                 * The element id
                 * @property id
                 */
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code">;
                </span><span class="hl-comment">/**
                 * A reference to the style property
                 * @property css
                 */
                </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">css</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">el</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;
            </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the X position of an html element
         * @method getPosX
         * @param el the element for which to get the position
         * @return {int} the X coordinate
         * @for DragDropMgr
         * @deprecated use YAHOO.util.Dom.getX instead
         * @static
         */
        </span><span class="hl-identifier">getPosX</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getX</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the Y position of an html element
         * @method getPosY
         * @param el the element for which to get the position
         * @return {int} the Y coordinate
         * @deprecated use YAHOO.util.Dom.getY instead
         * @static
         */
        </span><span class="hl-identifier">getPosY</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getY</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Swap two nodes.  In IE, we use the native method, for others we
         * emulate the IE behavior
         * @method swapNode
         * @param n1 the first node to swap
         * @param n2 the other node to swap
         * @static
         */
        </span><span class="hl-identifier">swapNode</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">n1</span><span class="hl-code">, </span><span class="hl-identifier">n2</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">n1</span><span class="hl-code">.</span><span class="hl-identifier">swapNode</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">n1</span><span class="hl-code">.</span><span class="hl-identifier">swapNode</span><span class="hl-brackets">(</span><span class="hl-identifier">n2</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">n2</span><span class="hl-code">.</span><span class="hl-identifier">parentNode</span><span class="hl-code">;
                </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-identifier">n2</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-code">;

                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">s</span><span class="hl-code"> == </span><span class="hl-identifier">n1</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">insertBefore</span><span class="hl-brackets">(</span><span class="hl-identifier">n1</span><span class="hl-code">, </span><span class="hl-identifier">n2</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">n2</span><span class="hl-code"> == </span><span class="hl-identifier">n1</span><span class="hl-code">.</span><span class="hl-identifier">nextSibling</span><span class="hl-brackets">) {
                    </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">insertBefore</span><span class="hl-brackets">(</span><span class="hl-identifier">n2</span><span class="hl-code">, </span><span class="hl-identifier">n1</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">n1</span><span class="hl-code">.</span><span class="hl-identifier">parentNode</span><span class="hl-code">.</span><span class="hl-identifier">replaceChild</span><span class="hl-brackets">(</span><span class="hl-identifier">n2</span><span class="hl-code">, </span><span class="hl-identifier">n1</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">insertBefore</span><span class="hl-brackets">(</span><span class="hl-identifier">n1</span><span class="hl-code">, </span><span class="hl-identifier">s</span><span class="hl-brackets">)</span><span class="hl-code">;
                </span><span class="hl-brackets">}
            }
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the current scroll position
         * @method getScroll
         * @private
         * @static
         */
        </span><span class="hl-identifier">getScroll</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">() {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">t</span><span class="hl-code">, </span><span class="hl-identifier">l</span><span class="hl-code">, </span><span class="hl-identifier">dde</span><span class="hl-code">=</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">documentElement</span><span class="hl-code">, </span><span class="hl-identifier">db</span><span class="hl-code">=</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">dde</span><span class="hl-code"> &amp;&amp; </span><span class="hl-brackets">(</span><span class="hl-identifier">dde</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code"> || </span><span class="hl-identifier">dde</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-brackets">)) {
                </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">dde</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code">;
                </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">dde</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else if </span><span class="hl-brackets">(</span><span class="hl-identifier">db</span><span class="hl-brackets">) {
                </span><span class="hl-identifier">t</span><span class="hl-code"> = </span><span class="hl-identifier">db</span><span class="hl-code">.</span><span class="hl-identifier">scrollTop</span><span class="hl-code">;
                </span><span class="hl-identifier">l</span><span class="hl-code"> = </span><span class="hl-identifier">db</span><span class="hl-code">.</span><span class="hl-identifier">scrollLeft</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">could not get scroll property</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}
            </span><span class="hl-reserved">return </span><span class="hl-brackets">{ </span><span class="hl-identifier">top</span><span class="hl-code">: </span><span class="hl-identifier">t</span><span class="hl-code">, </span><span class="hl-identifier">left</span><span class="hl-code">: </span><span class="hl-identifier">l </span><span class="hl-brackets">}</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Returns the specified element style property
         * @method getStyle
         * @param {HTMLElement} el          the element
         * @param {string}      styleProp   the style property
         * @return {string} The value of the style property
         * @deprecated use YAHOO.util.Dom.getStyle
         * @static
         */
        </span><span class="hl-identifier">getStyle</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">styleProp</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">styleProp</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Gets the scrollTop
         * @method getScrollTop
         * @return {int} the document's scrollTop
         * @static
         */
        </span><span class="hl-identifier">getScrollTop</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">() { </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">getScroll</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">top</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Gets the scrollLeft
         * @method getScrollLeft
         * @return {int} the document's scrollTop
         * @static
         */
        </span><span class="hl-identifier">getScrollLeft</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">() { </span><span class="hl-reserved">return this</span><span class="hl-code">.</span><span class="hl-identifier">getScroll</span><span class="hl-brackets">()</span><span class="hl-code">.</span><span class="hl-identifier">left</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Sets the x/y position of an element to the location of the
         * target element.
         * @method moveToEl
         * @param {HTMLElement} moveEl      The element to move
         * @param {HTMLElement} targetEl    The position reference element
         * @static
         */
        </span><span class="hl-identifier">moveToEl</span><span class="hl-code">: </span><span class="hl-reserved">function </span><span class="hl-brackets">(</span><span class="hl-identifier">moveEl</span><span class="hl-code">, </span><span class="hl-identifier">targetEl</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">aCoord</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getXY</span><span class="hl-brackets">(</span><span class="hl-identifier">targetEl</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setXY</span><span class="hl-brackets">(</span><span class="hl-identifier">moveEl</span><span class="hl-code">, </span><span class="hl-identifier">aCoord</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Gets the client height
         * @method getClientHeight
         * @return {int} client height in px
         * @deprecated use YAHOO.util.Dom.getViewportHeight instead
         * @static
         */
        </span><span class="hl-identifier">getClientHeight</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getViewportHeight</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Gets the client width
         * @method getClientWidth
         * @return {int} client width in px
         * @deprecated use YAHOO.util.Dom.getViewportWidth instead
         * @static
         */
        </span><span class="hl-identifier">getClientWidth</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
            </span><span class="hl-reserved">return </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getViewportWidth</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Numeric array sort function
         * @method numericSort
         * @static
         */
        </span><span class="hl-identifier">numericSort</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">) { </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code"> - </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Internal counter
         * @property _timeoutCount
         * @private
         * @static
         */
        </span><span class="hl-identifier">_timeoutCount</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Trying to make the load order less important.  Without this we get
         * an error if this file is loaded before the Event Utility.
         * @method _addListeners
         * @private
         * @static
         */
        </span><span class="hl-identifier">_addListeners</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">DDM</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">;
            </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code"> &amp;&amp; </span><span class="hl-builtin">document </span><span class="hl-brackets">) {
                </span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_onLoad</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_timeoutCount</span><span class="hl-code"> &gt; </span><span class="hl-number">2000</span><span class="hl-brackets">) {
                } </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                    </span><span class="hl-identifier">setTimeout</span><span class="hl-brackets">(</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_addListeners</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code"> &amp;&amp; </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-brackets">) {
                        </span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_timeoutCount</span><span class="hl-code"> += </span><span class="hl-number">1</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
            }
        }</span><span class="hl-code">,

        </span><span class="hl-comment">/**
         * Recursively searches the immediate parent and all child nodes for
         * the handle element in order to determine wheter or not it was
         * clicked.
         * @method handleWasClicked
         * @param node the html element to inspect
         * @static
         */
        </span><span class="hl-identifier">handleWasClicked</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">node</span><span class="hl-code">, </span><span class="hl-identifier">id</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isHandle</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)) {
                </span><span class="hl-reserved">return true</span><span class="hl-code">;
            </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                </span><span class="hl-comment">// check to see if this is a text node child of the one we want
                </span><span class="hl-reserved">var </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">node</span><span class="hl-code">.</span><span class="hl-identifier">parentNode</span><span class="hl-code">;

                </span><span class="hl-reserved">while </span><span class="hl-brackets">(</span><span class="hl-identifier">p</span><span class="hl-brackets">) {
                    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">isHandle</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)) {
                        </span><span class="hl-reserved">return true</span><span class="hl-code">;
                    </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
                        </span><span class="hl-identifier">p</span><span class="hl-code"> = </span><span class="hl-identifier">p</span><span class="hl-code">.</span><span class="hl-identifier">parentNode</span><span class="hl-code">;
                    </span><span class="hl-brackets">}
                }
            }

            </span><span class="hl-reserved">return false</span><span class="hl-code">;
        </span><span class="hl-brackets">}

    }</span><span class="hl-code">;

</span><span class="hl-brackets">}()</span><span class="hl-code">;

</span><span class="hl-comment">// shorter alias, save a few bytes
</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDropMgr</span><span class="hl-code">;
</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">_addListeners</span><span class="hl-brackets">()</span><span class="hl-code">;

</span><span class="hl-brackets">}

</span><span class="hl-comment">/**
 * A DragDrop implementation where the linked element follows the
 * mouse cursor during a drag.
 * @class DD
 * @extends YAHOO.util.DragDrop
 * @constructor
 * @param {String} id the id of the linked element
 * @param {String} sGroup the group of related DragDrop items
 * @param {object} config an object containing configurable attributes
 *                Valid properties for DD:
 *                    scroll
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">DD</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DD</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDrop</span><span class="hl-code">, </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * When set to true, the utility automatically tries to scroll the browser
     * window wehn a drag and drop element is dragged near the viewport boundary.
     * Defaults to true.
     * @property scroll
     * @type boolean
     */
    </span><span class="hl-identifier">scroll</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets the pointer offset to the distance between the linked element's top
     * left corner and the location the element was clicked
     * @method autoOffset
     * @param {int} iPageX the X coordinate of the click
     * @param {int} iPageY the Y coordinate of the click
     */
    </span><span class="hl-identifier">autoOffset</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">iPageX</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startPageX</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">iPageY</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">startPageY</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDelta</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets the pointer offset.  You can call this directly to force the
     * offset to be in a particular location (e.g., pass in 0,0 to set it
     * to the center of the object, as done in YAHOO.widget.Slider)
     * @method setDelta
     * @param {int} iDeltaX the distance from the left
     * @param {int} iDeltaY the distance from the top
     */
    </span><span class="hl-identifier">setDelta</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iDeltaX</span><span class="hl-code">, </span><span class="hl-identifier">iDeltaY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaX</span><span class="hl-code"> = </span><span class="hl-identifier">iDeltaX</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaY</span><span class="hl-code"> = </span><span class="hl-identifier">iDeltaY</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets the drag element to the location of the mousedown or click event,
     * maintaining the cursor location relative to the location on the element
     * that was clicked.  Override this if you want to place the element in a
     * location other than where the cursor is.
     * @method setDragElPos
     * @param {int} iPageX the X coordinate of the mousedown or drag event
     * @param {int} iPageY the Y coordinate of the mousedown or drag event
     */
    </span><span class="hl-identifier">setDragElPos</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {
        </span><span class="hl-comment">// the first time we do this, we are going to check to make sure
        // the element has css positioning

        </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">alignElWithMouse</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Sets the element to the location of the mousedown or click event,
     * maintaining the cursor location relative to the location on the element
     * that was clicked.  Override this if you want to place the element in a
     * location other than where the cursor is.
     * @method alignElWithMouse
     * @param {HTMLElement} el the element to move
     * @param {int} iPageX the X coordinate of the mousedown or drag event
     * @param {int} iPageY the Y coordinate of the mousedown or drag event
     */
    </span><span class="hl-identifier">alignElWithMouse</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">oCoord</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getTargetCoord</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaSetXY</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">aCoord</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setXY</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-identifier">aCoord</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">newLeft</span><span class="hl-code"> = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">left</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10 </span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">newTop</span><span class="hl-code">  = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">top</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10 </span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaSetXY</span><span class="hl-code"> = </span><span class="hl-brackets">[ </span><span class="hl-identifier">newLeft</span><span class="hl-code"> - </span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">newTop</span><span class="hl-code"> - </span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">y </span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">left</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-brackets">(</span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaSetXY</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">])</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">px</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">el</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">top</span><span class="hl-quotes">&quot;</span><span class="hl-code">,  </span><span class="hl-brackets">(</span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaSetXY</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">])</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">px</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">cachePosition</span><span class="hl-brackets">(</span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">autoScroll</span><span class="hl-brackets">(</span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">oCoord</span><span class="hl-code">.</span><span class="hl-identifier">y</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetHeight</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetWidth</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Saves the most recent position so that we can reset the constraints and
     * tick marks on-demand.  We need to know this so that we can calculate the
     * number of pixels the element is offset from its original position.
     * @method cachePosition
     * @param iPageX the current x position (optional, this just makes it so we
     * don't have to look it up again)
     * @param iPageY the current y position (optional, this just makes it so we
     * don't have to look it up again)
     */
    </span><span class="hl-identifier">cachePosition</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageX</span><span class="hl-code"> = </span><span class="hl-identifier">iPageX</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageY</span><span class="hl-code"> = </span><span class="hl-identifier">iPageY</span><span class="hl-code">;
        </span><span class="hl-brackets">} </span><span class="hl-reserved">else </span><span class="hl-brackets">{
            </span><span class="hl-reserved">var </span><span class="hl-identifier">aCoord</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">getXY</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">())</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageX</span><span class="hl-code"> = </span><span class="hl-identifier">aCoord</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">;
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastPageY</span><span class="hl-code"> = </span><span class="hl-identifier">aCoord</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Auto-scroll the window if the dragged object has been moved beyond the
     * visible window boundary.
     * @method autoScroll
     * @param {int} x the drag element's x position
     * @param {int} y the drag element's y position
     * @param {int} h the height of the drag element
     * @param {int} w the width of the drag element
     * @private
     */
    </span><span class="hl-identifier">autoScroll</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-code">, </span><span class="hl-identifier">h</span><span class="hl-code">, </span><span class="hl-identifier">w</span><span class="hl-brackets">) {

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">scroll</span><span class="hl-brackets">) {
            </span><span class="hl-comment">// The client height
            </span><span class="hl-reserved">var </span><span class="hl-identifier">clientH</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">getClientHeight</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-comment">// The client width
            </span><span class="hl-reserved">var </span><span class="hl-identifier">clientW</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">getClientWidth</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-comment">// The amt scrolled down
            </span><span class="hl-reserved">var </span><span class="hl-identifier">st</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">getScrollTop</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-comment">// The amt scrolled right
            </span><span class="hl-reserved">var </span><span class="hl-identifier">sl</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">getScrollLeft</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-comment">// Location of the bottom of the element
            </span><span class="hl-reserved">var </span><span class="hl-identifier">bot</span><span class="hl-code"> = </span><span class="hl-identifier">h</span><span class="hl-code"> + </span><span class="hl-identifier">y</span><span class="hl-code">;

            </span><span class="hl-comment">// Location of the right of the element
            </span><span class="hl-reserved">var </span><span class="hl-identifier">right</span><span class="hl-code"> = </span><span class="hl-identifier">w</span><span class="hl-code"> + </span><span class="hl-identifier">x</span><span class="hl-code">;

            </span><span class="hl-comment">// The distance from the cursor to the bottom of the visible area,
            // adjusted so that we don't scroll if the cursor is beyond the
            // element drag constraints
            </span><span class="hl-reserved">var </span><span class="hl-identifier">toBot</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-identifier">clientH</span><span class="hl-code"> + </span><span class="hl-identifier">st</span><span class="hl-code"> - </span><span class="hl-identifier">y</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaY</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-comment">// The distance from the cursor to the right of the visible area
            </span><span class="hl-reserved">var </span><span class="hl-identifier">toRight</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-identifier">clientW</span><span class="hl-code"> + </span><span class="hl-identifier">sl</span><span class="hl-code"> - </span><span class="hl-identifier">x</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaX</span><span class="hl-brackets">)</span><span class="hl-code">;


            </span><span class="hl-comment">// How close to the edge the cursor must be before we scroll
            // var thresh = (document.all) ? 100 : 40;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">thresh</span><span class="hl-code"> = </span><span class="hl-number">40</span><span class="hl-code">;

            </span><span class="hl-comment">// How many pixels to scroll per autoscroll op.  This helps to reduce
            // clunky scrolling. IE is more sensitive about this ... it needs this
            // value to be higher.
            </span><span class="hl-reserved">var </span><span class="hl-identifier">scrAmt</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">all</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-number">80</span><span class="hl-code"> : </span><span class="hl-number">30</span><span class="hl-code">;

            </span><span class="hl-comment">// Scroll down if we are near the bottom of the visible page and the
            // obj extends below the crease
            </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">bot</span><span class="hl-code"> &gt; </span><span class="hl-identifier">clientH</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">toBot</span><span class="hl-code"> &lt; </span><span class="hl-identifier">thresh </span><span class="hl-brackets">) {
                </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">scrollTo</span><span class="hl-brackets">(</span><span class="hl-identifier">sl</span><span class="hl-code">, </span><span class="hl-identifier">st</span><span class="hl-code"> + </span><span class="hl-identifier">scrAmt</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-comment">// Scroll up if the window is scrolled down and the top of the object
            // goes above the top border
            </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">y</span><span class="hl-code"> &lt; </span><span class="hl-identifier">st</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">st</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">y</span><span class="hl-code"> - </span><span class="hl-identifier">st</span><span class="hl-code"> &lt; </span><span class="hl-identifier">thresh </span><span class="hl-brackets">) {
                </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">scrollTo</span><span class="hl-brackets">(</span><span class="hl-identifier">sl</span><span class="hl-code">, </span><span class="hl-identifier">st</span><span class="hl-code"> - </span><span class="hl-identifier">scrAmt</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-comment">// Scroll right if the obj is beyond the right border and the cursor is
            // near the border.
            </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">right</span><span class="hl-code"> &gt; </span><span class="hl-identifier">clientW</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">toRight</span><span class="hl-code"> &lt; </span><span class="hl-identifier">thresh </span><span class="hl-brackets">) {
                </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">scrollTo</span><span class="hl-brackets">(</span><span class="hl-identifier">sl</span><span class="hl-code"> + </span><span class="hl-identifier">scrAmt</span><span class="hl-code">, </span><span class="hl-identifier">st</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}

            </span><span class="hl-comment">// Scroll left if the window has been scrolled to the right and the obj
            // extends past the left border
            </span><span class="hl-reserved">if </span><span class="hl-brackets">( </span><span class="hl-identifier">x</span><span class="hl-code"> &lt; </span><span class="hl-identifier">sl</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">sl</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">x</span><span class="hl-code"> - </span><span class="hl-identifier">sl</span><span class="hl-code"> &lt; </span><span class="hl-identifier">thresh </span><span class="hl-brackets">) {
                </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">scrollTo</span><span class="hl-brackets">(</span><span class="hl-identifier">sl</span><span class="hl-code"> - </span><span class="hl-identifier">scrAmt</span><span class="hl-code">, </span><span class="hl-identifier">st</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-brackets">}
        }
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Finds the location the element should be placed if we want to move
     * it to where the mouse location less the click offset would place us.
     * @method getTargetCoord
     * @param {int} iPageX the X coordinate of the click
     * @param {int} iPageY the Y coordinate of the click
     * @return an object that contains the coordinates (Object.x and Object.y)
     * @private
     */
    </span><span class="hl-identifier">getTargetCoord</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {


        </span><span class="hl-reserved">var </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">iPageX</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaX</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">iPageY</span><span class="hl-code"> - </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">deltaY</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainX</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code"> &lt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minX</span><span class="hl-brackets">) { </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minX</span><span class="hl-code">; </span><span class="hl-brackets">}
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code"> &gt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxX</span><span class="hl-brackets">) { </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxX</span><span class="hl-code">; </span><span class="hl-brackets">}
        }

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">constrainY</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">y</span><span class="hl-code"> &lt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minY</span><span class="hl-brackets">) { </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">minY</span><span class="hl-code">; </span><span class="hl-brackets">}
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">y</span><span class="hl-code"> &gt; </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxY</span><span class="hl-brackets">) { </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">maxY</span><span class="hl-code">; </span><span class="hl-brackets">}
        }

        </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getTick</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">xTicks</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getTick</span><span class="hl-brackets">(</span><span class="hl-identifier">y</span><span class="hl-code">, </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">yTicks</span><span class="hl-brackets">)</span><span class="hl-code">;


        </span><span class="hl-reserved">return </span><span class="hl-brackets">{</span><span class="hl-identifier">x</span><span class="hl-code">:</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-code">:</span><span class="hl-identifier">y</span><span class="hl-brackets">}</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/*
     * Sets up config options specific to this class. Overrides
     * YAHOO.util.DragDrop, but all versions of this method through the
     * inheritance chain are called
     */
    </span><span class="hl-identifier">applyConfig</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DD</span><span class="hl-code">.</span><span class="hl-identifier">superclass</span><span class="hl-code">.</span><span class="hl-identifier">applyConfig</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">scroll</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">scroll</span><span class="hl-code"> !== </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/*
     * Event that fires prior to the onMouseDown event.  Overrides
     * YAHOO.util.DragDrop.
     */
    </span><span class="hl-identifier">b4MouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-comment">// this.resetConstraints();
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">autoOffset</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">,
                            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">))</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/*
     * Event that fires prior to the onDrag event.  Overrides
     * YAHOO.util.DragDrop.
     */
    </span><span class="hl-identifier">b4Drag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDragElPos</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">,
                            </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">))</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">DD </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}

    </span><span class="hl-comment">//////////////////////////////////////////////////////////////////////////
    // Debugging ygDragDrop events that can be overridden
    //////////////////////////////////////////////////////////////////////////
    /*
    startDrag: function(x, y) {
    },

    onDrag: function(e) {
    },

    onDragEnter: function(e, id) {
    },

    onDragOver: function(e, id) {
    },

    onDragOut: function(e, id) {
    },

    onDragDrop: function(e, id) {
    },

    endDrag: function(e) {
    }

    */

</span><span class="hl-brackets">})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * A DragDrop implementation that inserts an empty, bordered div into
 * the document that follows the cursor during drag operations.  At the time of
 * the click, the frame div is resized to the dimensions of the linked html
 * element, and moved to the exact location of the linked element.
 *
 * References to the &quot;frame&quot; element refer to the single proxy element that
 * was created to be dragged in place of all DDProxy elements on the
 * page.
 *
 * @class DDProxy
 * @extends YAHOO.util.DD
 * @constructor
 * @param {String} id the id of the linked html element
 * @param {String} sGroup the group of related DragDrop objects
 * @param {object} config an object containing configurable attributes
 *                Valid properties for DDProxy in addition to those in DragDrop:
 *                   resizeFrame, centerFrame, dragElId
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">DDProxy</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initFrame</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">/**
 * The default drag frame div id
 * @property YAHOO.util.DDProxy.dragElId
 * @type String
 * @static
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">DDProxy</span><span class="hl-default">.</span><span class="hl-identifier">dragElId</span><span class="hl-default"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">ygddfdiv</span><span class="hl-quotes">&quot;</span><span class="hl-default">;

</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDProxy</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DD</span><span class="hl-code">, </span><span class="hl-brackets">{

    </span><span class="hl-comment">/**
     * By default we resize the drag frame to be the same size as the element
     * we want to drag (this is to get the frame effect).  We can turn it off
     * if we want a different behavior.
     * @property resizeFrame
     * @type boolean
     */
    </span><span class="hl-identifier">resizeFrame</span><span class="hl-code">: </span><span class="hl-reserved">true</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * By default the frame is positioned exactly where the drag element is, so
     * we use the cursor offset provided by YAHOO.util.DD.  Another option that works only if
     * you do not have constraints on the obj is to have the drag frame centered
     * around the cursor.  Set centerFrame to true for this effect.
     * @property centerFrame
     * @type boolean
     */
    </span><span class="hl-identifier">centerFrame</span><span class="hl-code">: </span><span class="hl-reserved">false</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Creates the proxy element if it does not yet exist
     * @method createFrame
     */
    </span><span class="hl-identifier">createFrame</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">self</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">body</span><span class="hl-code"> = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">body</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">body</span><span class="hl-code"> || !</span><span class="hl-identifier">body</span><span class="hl-code">.</span><span class="hl-identifier">firstChild</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">setTimeout</span><span class="hl-brackets">( </span><span class="hl-reserved">function</span><span class="hl-brackets">() { </span><span class="hl-identifier">self</span><span class="hl-code">.</span><span class="hl-identifier">createFrame</span><span class="hl-brackets">()</span><span class="hl-code">; </span><span class="hl-brackets">}</span><span class="hl-code">, </span><span class="hl-number">50 </span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">return</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">var </span><span class="hl-identifier">div</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">div</span><span class="hl-brackets">) {
            </span><span class="hl-identifier">div</span><span class="hl-code">    = </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">createElement</span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">div</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">div</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">dragElId</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code">  = </span><span class="hl-identifier">div</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;

            </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">position</span><span class="hl-code">   = </span><span class="hl-quotes">&quot;</span><span class="hl-string">absolute</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">visibility</span><span class="hl-code"> = </span><span class="hl-quotes">&quot;</span><span class="hl-string">hidden</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">cursor</span><span class="hl-code">     = </span><span class="hl-quotes">&quot;</span><span class="hl-string">move</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">border</span><span class="hl-code">     = </span><span class="hl-quotes">&quot;</span><span class="hl-string">2px solid #aaa</span><span class="hl-quotes">&quot;</span><span class="hl-code">;
            </span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">zIndex</span><span class="hl-code">     = </span><span class="hl-number">999</span><span class="hl-code">;

            </span><span class="hl-comment">// appendChild can blow up IE if invoked prior to the window load event
            // while rendering a table.  It is possible there are other scenarios
            // that would cause this to happen as well.
            </span><span class="hl-identifier">body</span><span class="hl-code">.</span><span class="hl-identifier">insertBefore</span><span class="hl-brackets">(</span><span class="hl-identifier">div</span><span class="hl-code">, </span><span class="hl-identifier">body</span><span class="hl-code">.</span><span class="hl-identifier">firstChild</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Initialization for the drag frame element.  Must be called in the
     * constructor of all subclasses
     * @method initFrame
     */
    </span><span class="hl-identifier">initFrame</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">createFrame</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">applyConfig</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDProxy</span><span class="hl-code">.</span><span class="hl-identifier">superclass</span><span class="hl-code">.</span><span class="hl-identifier">applyConfig</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">resizeFrame</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">resizeFrame</span><span class="hl-code"> !== </span><span class="hl-reserved">false</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">centerFrame</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">centerFrame</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDragElId</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">config</span><span class="hl-code">.</span><span class="hl-identifier">dragElId</span><span class="hl-code"> || </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDProxy</span><span class="hl-code">.</span><span class="hl-identifier">dragElId</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * Resizes the drag frame to the dimensions of the clicked object, positions
     * it over the object, and finally displays it
     * @method showFrame
     * @param {int} iPageX X click position
     * @param {int} iPageY Y click position
     * @private
     */
    </span><span class="hl-identifier">showFrame</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">dragEl</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">s</span><span class="hl-code"> = </span><span class="hl-identifier">dragEl</span><span class="hl-code">.</span><span class="hl-identifier">style</span><span class="hl-code">;

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_resizeProxy</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">centerFrame</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDelta</span><span class="hl-brackets">( </span><span class="hl-builtin">Math</span><span class="hl-code">.</span><span class="hl-identifier">round</span><span class="hl-brackets">(</span><span class="hl-identifier">parseInt</span><span class="hl-brackets">(</span><span class="hl-identifier">s</span><span class="hl-code">.</span><span class="hl-identifier">width</span><span class="hl-code">,  </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-quotes">/</span><span class="hl-string">2),
                           Math.round(parseInt(s.height, 10)</span><span class="hl-quotes">/</span><span class="hl-number">2</span><span class="hl-brackets">) )</span><span class="hl-code">;
        </span><span class="hl-brackets">}

        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDragElPos</span><span class="hl-brackets">(</span><span class="hl-identifier">iPageX</span><span class="hl-code">, </span><span class="hl-identifier">iPageY</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visible</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">/**
     * The proxy is automatically resized to the dimensions of the linked
     * element when a drag is initiated, unless resizeFrame is set to false
     * @method _resizeProxy
     * @private
     */
    </span><span class="hl-identifier">_resizeProxy</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">resizeFrame</span><span class="hl-brackets">) {
            </span><span class="hl-reserved">var </span><span class="hl-identifier">DOM</span><span class="hl-code">    = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">el</span><span class="hl-code">     = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">dragEl</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;

            </span><span class="hl-reserved">var </span><span class="hl-identifier">bt</span><span class="hl-code"> = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">borderTopWidth</span><span class="hl-quotes">&quot;    </span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">br</span><span class="hl-code"> = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">borderRightWidth</span><span class="hl-quotes">&quot;  </span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">bb</span><span class="hl-code"> = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">borderBottomWidth</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">bl</span><span class="hl-code"> = </span><span class="hl-identifier">parseInt</span><span class="hl-brackets">( </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">getStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">borderLeftWidth</span><span class="hl-quotes">&quot;   </span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-number">10</span><span class="hl-brackets">)</span><span class="hl-code">;

            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isNaN</span><span class="hl-brackets">(</span><span class="hl-identifier">bt</span><span class="hl-brackets">)) { </span><span class="hl-identifier">bt</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-brackets">}
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isNaN</span><span class="hl-brackets">(</span><span class="hl-identifier">br</span><span class="hl-brackets">)) { </span><span class="hl-identifier">br</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-brackets">}
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isNaN</span><span class="hl-brackets">(</span><span class="hl-identifier">bb</span><span class="hl-brackets">)) { </span><span class="hl-identifier">bb</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-brackets">}
            </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">isNaN</span><span class="hl-brackets">(</span><span class="hl-identifier">bl</span><span class="hl-brackets">)) { </span><span class="hl-identifier">bl</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-brackets">}


            </span><span class="hl-reserved">var </span><span class="hl-identifier">newWidth</span><span class="hl-code">  = </span><span class="hl-builtin">Math</span><span class="hl-code">.</span><span class="hl-identifier">max</span><span class="hl-brackets">(</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetWidth</span><span class="hl-code">  - </span><span class="hl-identifier">br</span><span class="hl-code"> - </span><span class="hl-identifier">bl</span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-reserved">var </span><span class="hl-identifier">newHeight</span><span class="hl-code"> = </span><span class="hl-builtin">Math</span><span class="hl-code">.</span><span class="hl-identifier">max</span><span class="hl-brackets">(</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">el</span><span class="hl-code">.</span><span class="hl-identifier">offsetHeight</span><span class="hl-code"> - </span><span class="hl-identifier">bt</span><span class="hl-code"> - </span><span class="hl-identifier">bb</span><span class="hl-brackets">)</span><span class="hl-code">;


            </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">( </span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">width</span><span class="hl-quotes">&quot;</span><span class="hl-code">,  </span><span class="hl-identifier">newWidth</span><span class="hl-code">  + </span><span class="hl-quotes">&quot;</span><span class="hl-string">px</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">)</span><span class="hl-code">;
            </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">( </span><span class="hl-identifier">dragEl</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">height</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-identifier">newHeight</span><span class="hl-code"> + </span><span class="hl-quotes">&quot;</span><span class="hl-string">px</span><span class="hl-quotes">&quot; </span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-brackets">}
    }</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.util.DragDrop
    </span><span class="hl-identifier">b4MouseDown</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageX</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">y</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Event</span><span class="hl-code">.</span><span class="hl-identifier">getPageY</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">autoOffset</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">setDragElPos</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.util.DragDrop
    </span><span class="hl-identifier">b4StartDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">) {
        </span><span class="hl-comment">// show the drag frame
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">showFrame</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">y</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.util.DragDrop
    </span><span class="hl-identifier">b4EndDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">hidden</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-comment">// overrides YAHOO.util.DragDrop
    // By default we try to move the element to the last location of the frame.
    // This is so that the default behavior mirrors that of YAHOO.util.DD.
    </span><span class="hl-identifier">endDrag</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">var </span><span class="hl-identifier">DOM</span><span class="hl-code"> = </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">Dom</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">lel</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getEl</span><span class="hl-brackets">()</span><span class="hl-code">;
        </span><span class="hl-reserved">var </span><span class="hl-identifier">del</span><span class="hl-code"> = </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getDragEl</span><span class="hl-brackets">()</span><span class="hl-code">;

        </span><span class="hl-comment">// Show the drag frame briefly so we can get its position
        // del.style.visibility = &quot;&quot;;
        </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">del</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;

        </span><span class="hl-comment">// Hide the linked element before the move to get around a Safari
        // rendering bug.
        //lel.style.visibility = &quot;hidden&quot;;
        </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">lel</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">hidden</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDM</span><span class="hl-code">.</span><span class="hl-identifier">moveToEl</span><span class="hl-brackets">(</span><span class="hl-identifier">lel</span><span class="hl-code">, </span><span class="hl-identifier">del</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">//del.style.visibility = &quot;hidden&quot;;
        </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">del</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">hidden</span><span class="hl-quotes">&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">//lel.style.visibility = &quot;&quot;;
        </span><span class="hl-identifier">DOM</span><span class="hl-code">.</span><span class="hl-identifier">setStyle</span><span class="hl-brackets">(</span><span class="hl-identifier">lel</span><span class="hl-code">, </span><span class="hl-quotes">&quot;</span><span class="hl-string">visibility</span><span class="hl-quotes">&quot;</span><span class="hl-code">, </span><span class="hl-quotes">&quot;&quot;</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-code">,

    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">DDProxy </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}

})</span><span class="hl-default">;
</span><span class="hl-comment">/**
 * A DragDrop implementation that does not move, but can be a drop
 * target.  You would get the same result by simply omitting implementation
 * for the event callbacks, but this way we reduce the processing cost of the
 * event listener and the callbacks.
 * @class DDTarget
 * @extends YAHOO.util.DragDrop
 * @constructor
 * @param {String} id the id of the element that is a drop target
 * @param {String} sGroup the group of related DragDrop objects
 * @param {object} config an object containing configurable attributes
 *                 Valid properties for DDTarget in addition to those in
 *                 DragDrop:
 *                    none
 */
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">util</span><span class="hl-default">.</span><span class="hl-identifier">DDTarget</span><span class="hl-default"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">) {
    </span><span class="hl-reserved">if </span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-brackets">) {
        </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">initTarget</span><span class="hl-brackets">(</span><span class="hl-identifier">id</span><span class="hl-code">, </span><span class="hl-identifier">sGroup</span><span class="hl-code">, </span><span class="hl-identifier">config</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
}</span><span class="hl-default">;

</span><span class="hl-comment">// YAHOO.util.DDTarget.prototype = new YAHOO.util.DragDrop();
</span><span class="hl-identifier">YAHOO</span><span class="hl-default">.</span><span class="hl-identifier">extend</span><span class="hl-brackets">(</span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DDTarget</span><span class="hl-code">, </span><span class="hl-identifier">YAHOO</span><span class="hl-code">.</span><span class="hl-identifier">util</span><span class="hl-code">.</span><span class="hl-identifier">DragDrop</span><span class="hl-code">, </span><span class="hl-brackets">{
    </span><span class="hl-identifier">toString</span><span class="hl-code">: </span><span class="hl-reserved">function</span><span class="hl-brackets">() {
        </span><span class="hl-reserved">return </span><span class="hl-brackets">(</span><span class="hl-quotes">&quot;</span><span class="hl-string">DDTarget </span><span class="hl-quotes">&quot;</span><span class="hl-code"> + </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">id</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}
})</span><span class="hl-default">;
</span></pre></div><hr>Copyright &copy; 2006 Jack Slocum. All rights reserved.</body></html>